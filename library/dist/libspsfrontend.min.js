(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["libspsfrontend"] = factory();
	else
		root["libspsfrontend"] = factory();
})(this, function() {
return /******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Afk/AfkLogic.ts":
/*!*****************************!*\
  !*** ./src/Afk/AfkLogic.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AfkLogic: function() { return /* binding */ AfkLogic; }
/* harmony export */ });
/* harmony import */ var _Config_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Config/Config */ "./src/Config/Config.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");


var AfkLogic = /** @class */ (function () {
    function AfkLogic(controlScheme, afkTimeout) {
        this.warnTimeout = 0;
        this.closeTimeout = 10;
        this.active = false;
        this.warnTimer = undefined;
        this.countDown = 0;
        this.countDownTimer = undefined;
        this.warnTimeout = afkTimeout;
        this.controlScheme = controlScheme;
    }
    /**
     * The methods that occur when an afk event listener is clicked
     */
    AfkLogic.prototype.onAfkClick = function () {
        this.hideCurrentOverlay();
        clearInterval(this.countDownTimer);
        this.startAfkWarningTimer();
    };
    /**
     * Start the warning timer if a timeout is set greater that 0 seconds
     */
    AfkLogic.prototype.startAfkWarningTimer = function () {
        if (this.warnTimeout > 0) {
            this.active = true;
        }
        else {
            this.active = false;
        }
        this.resetAfkWarningTimer();
    };
    /**
     * Stop the afk warning timer
     */
    AfkLogic.prototype.stopAfkWarningTimer = function () {
        this.active = false;
        clearInterval(this.warnTimer);
        clearInterval(this.countDownTimer);
    };
    /**
     * Pause the timer which when elapsed will warn the user they are inactive.
     */
    AfkLogic.prototype.pauseAfkWarningTimer = function () {
        this.active = false;
    };
    /**
     * If the user interacts then reset the warning timer.
     */
    AfkLogic.prototype.resetAfkWarningTimer = function () {
        var _this = this;
        if (this.active) {
            clearTimeout(this.warnTimer);
            this.warnTimer = setTimeout(function () { return _this.activateAfkEvent(); }, this.warnTimeout * 1000);
        }
    };
    /**
     * Show the AFK overlay and begin the countDown
     */
    AfkLogic.prototype.activateAfkEvent = function () {
        var _this = this;
        // Pause the timer while the user is looking at the inactivity warning overlay
        this.pauseAfkWarningTimer();
        // instantiate a new overlay 
        this.showAfkOverlay();
        // update our countDown timer and overlay contents
        this.countDown = this.closeTimeout;
        this.updateAfkCountdown();
        // if we are in locked mouse exit pointerlock 
        if (this.controlScheme == _Config_Config__WEBPACK_IMPORTED_MODULE_0__.ControlSchemeType.LockedMouse) {
            // minor hack to alleviate ios not supporting pointerlock
            if (document.exitPointerLock) {
                document.exitPointerLock();
            }
        }
        // reset our countDown interval accordingly 
        this.countDownTimer = setInterval(function () {
            _this.countDown--;
            if (_this.countDown == 0) {
                // The user failed to click so hide the overlay and disconnect them.
                _this.hideCurrentOverlay();
                _this.setDisconnectMessageOverride("You have been disconnected due to inactivity");
                _this.closeWebSocket();
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "You have been disconnected due to inactivity");
                // switch off the afk feature as stream has closed 
                _this.stopAfkWarningTimer();
            }
            else {
                // Update the countDown message.
                _this.updateAfkCountdown();
            }
        }, 1000);
    };
    /**
     * An override method for updating the afk countdown number in the overlay
     */
    AfkLogic.prototype.updateAfkCountdown = function () { };
    /**
     * An override method for showing the afk overlay
     */
    AfkLogic.prototype.showAfkOverlay = function () { };
    /**
     * An override method for hiding the afk overlay
     */
    AfkLogic.prototype.hideCurrentOverlay = function () { };
    /**
     * An  override method for setting the override for the disconnect message
     */
    AfkLogic.prototype.setDisconnectMessageOverride = function (message) { };
    /**
     * An override method for closing the websocket connection from the clients side
     */
    AfkLogic.prototype.closeWebSocket = function () { };
    return AfkLogic;
}());



/***/ }),

/***/ "./src/Config/Config.ts":
/*!******************************!*\
  !*** ./src/Config/Config.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Config: function() { return /* binding */ Config; },
/* harmony export */   ControlSchemeType: function() { return /* binding */ ControlSchemeType; }
/* harmony export */ });
var Config = /** @class */ (function () {
    /**
     * @param signallingServerAddress - the address of the signaling server
     * @param playerElement - the player element ID
     */
    function Config(signallingServerAddress, playerElement, isMobile) {
        if (isMobile === void 0) { isMobile = false; }
        // PRESET OPTIONS
        // enable the auto connect of the websocket 
        this.enableSpsAutoConnect = false;
        // enable the autoplay of the video if enabled by browser
        this.enableSpsAutoplay = false;
        // start the video muted
        this.startVideoMuted = false;
        this.isIOS = false;
        // mobile user
        this.isMobile = false;
        // set the amount of wait time in seconds while there is inactivity for afk to occur 
        this.afkTimeout = 120;
        // The control scheme controls the behaviour of the mouse when it interacts with the WebRTC player.
        this.controlScheme = ControlSchemeType.LockedMouse;
        // Browser keys are those which are typically used by the browser UI. We usually want to suppress these to allow, for example, UE4 to show shader complexity with the F5 key without the web page refreshing.
        this.suppressBrowserKeys = true;
        // UE4 has a fake touches option which fakes a single finger touch when the user drags with their mouse. 
        // We may perform the reverse; a single finger touch may be converted into a mouse drag UE4 side. This allows a non-touch application to be controlled partially via a touch device.
        this.fakeMouseWithTouches = false;
        this.signallingServerAddress = signallingServerAddress;
        this.playerElement = playerElement;
        this.isMobile = isMobile;
    }
    return Config;
}());

/**
 * The enum associated with the mouse being locked or hovering
 */
var ControlSchemeType;
(function (ControlSchemeType) {
    ControlSchemeType[ControlSchemeType["LockedMouse"] = 0] = "LockedMouse";
    ControlSchemeType[ControlSchemeType["HoveringMouse"] = 1] = "HoveringMouse";
})(ControlSchemeType || (ControlSchemeType = {}));


/***/ }),

/***/ "./src/DataChannel/DataChannelController.ts":
/*!**************************************************!*\
  !*** ./src/DataChannel/DataChannelController.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataChannelController: function() { return /* binding */ DataChannelController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DataChannelReceiveMessageType */ "./src/DataChannel/DataChannelReceiveMessageType.ts");
/* harmony import */ var _InitialSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InitialSettings */ "./src/DataChannel/InitialSettings.ts");
/* harmony import */ var _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../DataChannel/LatencyTestResults */ "./src/DataChannel/LatencyTestResults.ts");




var at = /** @class */ (function () {
    function at(e, t, s) {
        this.inRange = e, this.x = t, this.y = s;
    }
    return at;
}());
var lt = /** @class */ (function () {
    function lt(e, t) {
        this.x = e, this.y = t;
    }
    return lt;
}());
var dt = /** @class */ (function () {
    function dt(e, t) {
        this.x = e, this.y = t;
    }
    return dt;
}());
var ot = /** @class */ (function () {
    function ot(e) {
        this.videoElementParent = null;
        this.videoElement = null;
        this.ratio = 0;
        this.videoElementProvider = e;
        this.normalizeAndQuantizeUnsignedFunc = function () {
            throw new Error("Normalize and quantize unsigned, method not implemented.");
        };
        this.normalizeAndQuantizeSignedFunc = function () {
            throw new Error("Normalize and unquantize signed, method not implemented.");
        };
        this.denormalizeAndUnquantizeUnsignedFunc = function () {
            throw new Error("Denormalize and unquantize unsigned, method not implemented.");
        };
    }
    ot.prototype.normalizeAndQuantizeUnsigned = function (e, t) {
        return this.normalizeAndQuantizeUnsignedFunc(e, t);
    };
    ot.prototype.unquantizeAndDenormalizeUnsigned = function (e, t) {
        return this.denormalizeAndUnquantizeUnsignedFunc(e, t);
    };
    ot.prototype.normalizeAndQuantizeSigned = function (e, t) {
        return this.normalizeAndQuantizeSignedFunc(e, t);
    };
    ot.prototype.setupNormalizeAndQuantize = function () {
        var _this = this;
        if ((this.videoElementParent = this.videoElementProvider.getVideoParentElement(), this.videoElement = this.videoElementProvider.getVideoElement(), this.videoElementParent && this.videoElement)) {
            var e = this.videoElementParent.clientHeight / this.videoElementParent.clientWidth;
            var t = this.videoElement.videoHeight / this.videoElement.videoWidth;
            if (e > t) {
                //console.log("Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio");
                this.ratio = e / t;
                this.normalizeAndQuantizeUnsignedFunc = function (e, t) { return _this.normalizeAndQuantizeUnsignedPlayerBigger(e, t); };
                this.normalizeAndQuantizeSignedFunc = function (e, t) { return _this.normalizeAndQuantizeSignedPlayerBigger(e, t); };
                this.denormalizeAndUnquantizeUnsignedFunc = function (e, t) { return _this.denormalizeAndUnquantizeUnsignedPlayerBigger(e, t); };
            }
            else {
                //console.log("Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio");
                this.ratio = t / e;
                this.normalizeAndQuantizeUnsignedFunc = function (e, t) { return _this.normalizeAndQuantizeUnsignedPlayerSmaller(e, t); };
                this.normalizeAndQuantizeSignedFunc = function (e, t) { return _this.normalizeAndQuantizeSignedPlayerSmaller(e, t); };
                this.denormalizeAndUnquantizeUnsignedFunc = function (e, t) { return _this.denormalizeAndUnquantizeUnsignedPlayerSmaller(e, t); };
            }
        }
    };
    ot.prototype.normalizeAndQuantizeUnsignedPlayerBigger = function (e, t) {
        var s = e / this.videoElementParent.clientWidth;
        var n = this.ratio * (t / this.videoElementParent.clientHeight - 0.5) + 0.5;
        return (s < 0 || s > 1 || n < 0 || n > 1 ? new at(!1, 65535, 65535) : new at(!0, 65536 * s, 65536 * n));
    };
    ot.prototype.denormalizeAndUnquantizeUnsignedPlayerBigger = function (e, t) {
        var s = e / 65536;
        var n = (t / 65536 - 0.5) / this.ratio + 0.5;
        return new lt(s * this.videoElementParent.clientWidth, n * this.videoElementParent.clientHeight);
    };
    ot.prototype.normalizeAndQuantizeSignedPlayerBigger = function (e, t) {
        var s = e / (0.5 * this.videoElementParent.clientWidth);
        var n = this.ratio * t / (0.5 * this.videoElementParent.clientHeight);
        return new dt(32767 * s, 32767 * n);
    };
    ot.prototype.normalizeAndQuantizeUnsignedPlayerSmaller = function (e, t) {
        var s = this.ratio * (e / this.videoElementParent.clientWidth - 0.5) + 0.5;
        var n = t / this.videoElementParent.clientHeight;
        return s < 0 || s > 1 || n < 0 || n > 1 ? new at(false, 65535, 65535) : new at(true, 65536 * s, 65536 * n);
    };
    ot.prototype.denormalizeAndUnquantizeUnsignedPlayerSmaller = function (e, t) {
        var s = (e / 65536 - 0.5) / this.ratio + 0.5;
        var n = t / 65536;
        return new lt(s * this.videoElementParent.clientWidth, n * this.videoElementParent.clientHeight);
    };
    ot.prototype.normalizeAndQuantizeSignedPlayerSmaller = function (e, t) {
        var s = this.ratio * e / (0.5 * this.videoElementParent.clientWidth);
        var n = t / (0.5 * this.videoElementParent.clientHeight);
        return new dt(32767 * s, 32767 * n);
    };
    return ot;
}());
/**
 * Handles the Sending and Receiving of messages to the UE Instance via the Data Channel
 */
var DataChannelController = /** @class */ (function () {
    function DataChannelController(videoElement, config) {
        this.isReceivingFreezeFrame = false;
        DataChannelController.coordinateConverter = new ot(videoElement);
        this.isIOS = config.isIOS;
    }
    DataChannelController.prototype.focusAndOpenKeyboard = function (el, timeout) {
        if (!timeout) {
            timeout = 100;
        }
        if (el) {
            // Align temp input element approximately where the input element is
            // so the cursor doesn't jump around
            var __tempEl__1 = document.createElement('input');
            __tempEl__1.style.position = 'absolute';
            __tempEl__1.style.top = el.offsetTop + 7 + "px";
            __tempEl__1.style.left = el.offsetLeft + "px";
            __tempEl__1.style.height = '0';
            __tempEl__1.style.opacity = '0';
            // Put this temp element as a child of the page <body> and focus on it
            document.body.appendChild(__tempEl__1);
            __tempEl__1.focus();
            // The keyboard is open. Now do a delayed focus on the target element
            setTimeout(function () {
                el.focus();
                el.click();
                // Remove the temp element
                document.body.removeChild(__tempEl__1);
            }, timeout);
        }
    };
    /**
     * To Create and Set up a Data Channel
     * @param peerConnection - The RTC Peer Connection
     * @param label - Label of the Data Channel
     * @param datachannelOptions - Optional RTC DataChannel options
     */
    DataChannelController.prototype.createDataChannel = function (peerConnection, label, datachannelOptions) {
        var _this = this;
        this.peerConnection = peerConnection;
        this.label = label;
        this.datachannelOptions = datachannelOptions;
        if (datachannelOptions == null) {
            this.datachannelOptions = {};
            this.datachannelOptions.ordered = true;
        }
        this.dataChannel = this.peerConnection.createDataChannel(this.label, this.datachannelOptions);
        //We Want an Array Buffer not a blob
        this.dataChannel.binaryType = "arraybuffer";
        this.dataChannel.onopen = function () { return _this.handleOnOpen(); };
        this.dataChannel.onclose = function () { return _this.handleOnClose(); };
        this.dataChannel.onmessage = function (ev) { _this.handleOnMessage(ev); };
    };
    /**
     * Handles when the Data Channel is opened
     */
    DataChannelController.prototype.handleOnOpen = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Data Channel: " + this.label + " is opened.", 7);
    };
    /**
     * Handles when the Data Channel is closed
     */
    DataChannelController.prototype.handleOnClose = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Data Channel: " + this.label + " is closed.", 7);
    };
    /**
     * Handles when a message is received
     * @param event - Message Event
     */
    DataChannelController.prototype.handleOnMessage = function (event) {
        var message = new Uint8Array(event.data);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Message incoming", 6);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Message:" + message, 6);
        switch (message[0]) {
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.QualityControlOwnership: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.QualityControlOwnership", 6);
                var QualityOwnership = new Boolean(message[1]).valueOf();
                this.onQualityControlOwnership(QualityOwnership);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.Response: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Response", 6);
                this.onResponse(message);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.Command: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Command", 6);
                this.onCommand(message);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.FreezeFrame: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.FreezeFrame", 6);
                this.processFreezeFrameMessage(message);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.UnfreezeFrame: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.FreezeFrame", 6);
                this.isReceivingFreezeFrame = false;
                this.onUnFreezeFrame();
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.VideoEncoderAvgQP: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.VideoEncoderAvgQP", 6);
                var AvgQP = Number(new TextDecoder("utf-16").decode(message.slice(1)));
                this.onVideoEncoderAvgQP(AvgQP);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.latencyTest: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.latencyTest", 6);
                var latencyAsString = new TextDecoder("utf-16").decode(message.slice(1));
                var iLatencyTestResults = JSON.parse(latencyAsString);
                var latencyTestResults = new _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_3__.LatencyTestResults();
                Object.assign(latencyTestResults, iLatencyTestResults);
                latencyTestResults.processFields();
                this.onLatencyTestResult(latencyTestResults);
                break;
            }
            case _DataChannelReceiveMessageType__WEBPACK_IMPORTED_MODULE_1__.DataChannelReceiveMessageType.InitialSettings: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.InitialSettings", 6);
                var payloadAsString = new TextDecoder("utf-16").decode(message.slice(1));
                var iInitialSettings = JSON.parse(payloadAsString);
                var initialSettings = new _InitialSettings__WEBPACK_IMPORTED_MODULE_2__.InitialSettings();
                Object.assign(initialSettings, iInitialSettings);
                initialSettings.ueCompatible();
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), payloadAsString, 6);
                this.OnInitialSettings(initialSettings);
                break;
            }
            default: {
                //Logger.Log(Logger.GetStackTrace(), message[0].toString());
                //Logger.Error(Logger.GetStackTrace(), "unknown message sent on the Data channel");
                break;
            }
        }
    };
    /**
     * Fired when a Response message is sent from the UE Instance
     * @param message - Message Data Uint8Array
     */
    DataChannelController.prototype.onResponse = function (message) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Response", 6);
        var response = new TextDecoder("utf-16").decode(message.slice(1));
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), response, 6);
        // add to response handlers 
        /*for (let listener of responseEventListeners.values()) {
            listener(response);
        }*/
        var t = JSON.parse(response);
        console.log(response);
        if (t.name == 'selectedText') {
            navigator.clipboard.writeText(t.data);
        }
        if (t.command == 'Join Session') {
            console.log("Join Session");
            this.ueDescriptorUi.sendUiInteraction(JSON.stringify({
                "Password": "Palatial",
                "IP": "palatial.tenant-palatial-platform.coreweave.cloud:2222"
            }));
        }
    };
    /**
     * Fired when a Command message is sent from the UE Instance
     * @param message - Message Data Uint8Array
     */
    DataChannelController.prototype.onCommand = function (message) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "DataChannelReceiveMessageType.Command", 6);
        var commandAsString = new TextDecoder("utf-16").decode(message.slice(1));
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Data Channel Command: " + commandAsString, 6);
        var command = JSON.parse(commandAsString);
        if (command.command === "onScreenKeyboard") {
            //show on screen Keyboard
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Show on screen keyboard: " + commandAsString, 6);
            this.showOnScreenKeyboard(command);
        }
    };
    DataChannelController.prototype.showOnScreenKeyboard = function (command) {
        var hiddenInput = DataChannelController.hiddenInput;
        if (command.showOnScreenKeyboard) {
            if (true) { // this.isIOS
                // Show the 'edit text' button.
                DataChannelController.editTextButton.classList.remove('hiddenState');
                // Place the 'edit text' button near the UE input widget.
                var pos = DataChannelController.coordinateConverter.unquantizeAndDenormalizeUnsigned(command.x, command.y);
                if (pos.x != 0 && pos.y != 0) {
                    DataChannelController.editTextButton.style.top = pos.y.toString() + 'px';
                    DataChannelController.editTextButton.style.left = (pos.x - 40).toString() + 'px';
                }
            }
            else {}
        }
        else {
            // Hide the 'edit text' button.
            DataChannelController.editTextButton.classList.add('hiddenState');
            // Hide the on-screen keyboard.
            DataChannelController.hiddenInput.blur();
        }
    };
    /**
     * Send Data over the Data channel to the UE Instance
     * @param data - Message Data Array Buffer
     */
    DataChannelController.prototype.sendData = function (data) {
        // reset the afk inactivity
        this.resetAfkWarningTimerOnDataSend();
        if (this.dataChannel && this.dataChannel.readyState == "open") {
            this.dataChannel.send(data);
        }
        else {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Message Failed: " + new Uint8Array(data));
        }
    };
    /**
     * Fired when the UE Instance updates who has Quality Ownership
     * @param hasQualityOwnership - Does the client have Quality Ownership
     */
    DataChannelController.prototype.onQualityControlOwnership = function (hasQualityOwnership) { };
    /**
     * Fired when the UE Instance sends freeze frame data
     * @param message - Freeze Frame Data
     */
    DataChannelController.prototype.processFreezeFrameMessage = function (message) { };
    /**
     * Fired when the UE Instance sends a un Freeze Frame
     */
    DataChannelController.prototype.onUnFreezeFrame = function () { };
    /**
     * Fired when the UE Instance sends the Video Encoder Avg QP
     * @param AvgQP - Avg QP
     */
    DataChannelController.prototype.onVideoEncoderAvgQP = function (AvgQP) { };
    /**
     * Fired when the UE Instance sends Latency test Results
     * @param latencyTestResults - Latency Test Results
     */
    DataChannelController.prototype.onLatencyTestResult = function (latencyTestResults) { };
    /**
     * Fired when the UE Instance sends Initial Settings
     * @param InitialSettings - Initial Settings
     */
    DataChannelController.prototype.OnInitialSettings = function (InitialSettings) { };
    /**
     * An override method for resetting the Afk warning timer when data is sent over the data channel
     */
    DataChannelController.prototype.resetAfkWarningTimerOnDataSend = function () { };
    // If the user focuses on a UE input widget then we show them a button to open
    // the on-screen keyboard. JavaScript security means we can only show the
    // on-screen keyboard in response to a user interaction.
    DataChannelController.editTextButton = undefined;
    // A hidden input text box which is used only for focusing and opening the
    // on-screen keyboard.
    DataChannelController.hiddenInput = undefined;
    return DataChannelController;
}());



/***/ }),

/***/ "./src/DataChannel/DataChannelReceiveMessageType.ts":
/*!**********************************************************!*\
  !*** ./src/DataChannel/DataChannelReceiveMessageType.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataChannelReceiveMessageType: function() { return /* binding */ DataChannelReceiveMessageType; }
/* harmony export */ });
/**
 * Data Channel Receives Message Type
 */
var DataChannelReceiveMessageType;
(function (DataChannelReceiveMessageType) {
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["QualityControlOwnership"] = 0] = "QualityControlOwnership";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["Response"] = 1] = "Response";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["Command"] = 2] = "Command";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["FreezeFrame"] = 3] = "FreezeFrame";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["UnfreezeFrame"] = 4] = "UnfreezeFrame";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["VideoEncoderAvgQP"] = 5] = "VideoEncoderAvgQP";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["latencyTest"] = 6] = "latencyTest";
    DataChannelReceiveMessageType[DataChannelReceiveMessageType["InitialSettings"] = 7] = "InitialSettings";
})(DataChannelReceiveMessageType || (DataChannelReceiveMessageType = {}));


/***/ }),

/***/ "./src/DataChannel/InitialSettings.ts":
/*!********************************************!*\
  !*** ./src/DataChannel/InitialSettings.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Encoder: function() { return /* binding */ Encoder; },
/* harmony export */   InitialSettings: function() { return /* binding */ InitialSettings; },
/* harmony export */   PixelStreaming: function() { return /* binding */ PixelStreaming; },
/* harmony export */   WebRTC: function() { return /* binding */ WebRTC; }
/* harmony export */ });
/**
 * Latency Test Results Data
 */
var InitialSettings = /** @class */ (function () {
    function InitialSettings() {
        this.PixelStreaming = new PixelStreaming();
        this.Encoder = new Encoder();
        this.WebRTC = new WebRTC();
    }
    InitialSettings.prototype.ueCompatible = function () {
        if (this.WebRTC.MaxFPS != null) {
            this.WebRTC.FPS = this.WebRTC.MaxFPS;
        }
    };
    return InitialSettings;
}());

var PixelStreaming = /** @class */ (function () {
    function PixelStreaming() {
    }
    return PixelStreaming;
}());

var Encoder = /** @class */ (function () {
    function Encoder() {
    }
    return Encoder;
}());

var WebRTC = /** @class */ (function () {
    function WebRTC() {
    }
    return WebRTC;
}());



/***/ }),

/***/ "./src/DataChannel/LatencyTestResults.ts":
/*!***********************************************!*\
  !*** ./src/DataChannel/LatencyTestResults.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LatencyTestResults: function() { return /* binding */ LatencyTestResults; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Latency Test Results Data
 */
var LatencyTestResults = /** @class */ (function () {
    function LatencyTestResults() {
        //Fields Set from the latency payload regardless of version
        this.ReceiptTimeMs = null;
        this.TransmissionTimeMs = null;
        //Fields Set from the latency payload from 4.27.2
        this.PreCaptureTimeMs = null;
        this.PostCaptureTimeMs = null;
        this.PreEncodeTimeMs = null;
        this.PostEncodeTimeMs = null;
        //Fields Set from the latency payload from 5.0
        this.EncodeMs = null;
        this.CaptureToSendMs = null;
        //Fields Set when processed
        this.testStartTimeMs = 0;
        this.browserReceiptTimeMs = 0;
        //Fields set from calculations
        this.latencyExcludingDecode = 0;
        this.testDuration = 0;
        //ueLatency: number = 0;
        this.networkLatency = 0;
        this.browserSendLatency = 0;
        this.frameDisplayDeltaTimeMs = 0;
        this.endToEndLatency = 0;
        //uePixelStreamLatency: number = 0;
        this.encodeLatency = 0;
    }
    /**
     * Sets the Delta Time Milliseconds
     * @param DeltaTimeMs - Delta Time Milliseconds
     */
    LatencyTestResults.prototype.setFrameDisplayDeltaTime = function (DeltaTimeMs) {
        if (this.frameDisplayDeltaTimeMs == 0) {
            this.frameDisplayDeltaTimeMs = Math.round(DeltaTimeMs);
        }
    };
    LatencyTestResults.prototype.processFields = function () {
        if (this.EncodeMs == null && (this.PreEncodeTimeMs != null || this.PostEncodeTimeMs != null)) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Setting Encode Ms \n " + this.PostEncodeTimeMs + " \n " + this.PreEncodeTimeMs, 6);
            this.EncodeMs = this.PostEncodeTimeMs - this.PreEncodeTimeMs;
        }
        if (this.CaptureToSendMs == null && (this.PreCaptureTimeMs != null || this.PostCaptureTimeMs != null)) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Setting CaptureToSendMs Ms \n " + this.PostCaptureTimeMs + " \n " + this.PreCaptureTimeMs, 6);
            this.CaptureToSendMs = this.PostCaptureTimeMs - this.PreCaptureTimeMs;
        }
    };
    return LatencyTestResults;
}());



/***/ }),

/***/ "./src/Delegate/DelegateBase.ts":
/*!**************************************!*\
  !*** ./src/Delegate/DelegateBase.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DelegateBase: function() { return /* binding */ DelegateBase; }
/* harmony export */ });
/**
 * Provides common base functionality for delegates that implement the IDelegate interface
*/
var DelegateBase = /** @class */ (function () {
    /**
     * @param config - A newly instantiated config object
     * returns the base delegate object with the config inside it along with a new instance of the Overlay controller class
     */
    function DelegateBase(config) {
        this.showActionOrErrorOnDisconnect = true;
        this.config = config;
    }
    DelegateBase.prototype.setConfigTimeout = function (time) {
        this.config.afkTimeout = time;
    };
    /**
     * Shows the disconnect overlay
     */
    DelegateBase.prototype.showDisconnectOverlay = function (updateText) {
        this.hideCurrentOverlay();
        this.updateDisconnectOverlay(updateText);
        this.disconnectOverlay.show();
        this.currentOverlay = this.disconnectOverlay;
    };
    /**
     * Update the disconnect overlays span text
     * @param updateText the new countdown number
     */
    DelegateBase.prototype.updateDisconnectOverlay = function (updateText) {
        this.disconnectOverlay.update(updateText);
    };
    /**
     * Activates the disconnect overlays action
     */
    DelegateBase.prototype.onDisconnectionAction = function () {
        this.disconnectOverlay.activate();
    };
    /**
     * Hides the current overlay
     */
    DelegateBase.prototype.hideCurrentOverlay = function () {
        if (this.currentOverlay != null) {
            this.currentOverlay.hide();
            this.currentOverlay = null;
        }
    };
    /**
     * Shows the connect overlay
     */
    DelegateBase.prototype.showConnectOverlay = function () {
        this.hideCurrentOverlay();
        this.connectOverlay.show();
        this.currentOverlay = this.connectOverlay;
    };
    /**
     * Shows the play overlay
     */
    DelegateBase.prototype.showPlayOverlay = function () {
        this.hideCurrentOverlay();
        this.playOverlay.show();
        this.currentOverlay = this.playOverlay;
    };
    /**
     * Shows the text overlay
     */
    DelegateBase.prototype.showTextOverlay = function (text) {
        this.hideCurrentOverlay();
        this.infoOverlay.update(text);
        this.infoOverlay.show();
        this.currentOverlay = this.infoOverlay;
    };
    /**
     * Shows the error overlay
     */
    DelegateBase.prototype.showErrorOverlay = function (text) {
        this.hideCurrentOverlay();
        this.errorOverlay.update(text);
        this.errorOverlay.show();
        this.currentOverlay = this.errorOverlay;
    };
    /**
     * Activates the connect overlays action
     */
    DelegateBase.prototype.onConnectAction = function () {
        this.connectOverlay.activate();
    };
    /**
     * Activates the play overlays action
     */
    DelegateBase.prototype.onPlayAction = function () {
        this.playOverlay.activate();
    };
    /**
     * Shows the afk overlay
     * @param countDown the countdown number for the afk countdown
     */
    DelegateBase.prototype.showAfkOverlay = function (countDown) {
        this.hideCurrentOverlay();
        this.updateAfkOverlay(countDown);
        this.afkOverlay.show();
        this.currentOverlay = this.afkOverlay;
    };
    /**
     * Update the afk overlays countdown number
     * @param countDown the new countdown number
     */
    DelegateBase.prototype.updateAfkOverlay = function (countDown) {
        this.afkOverlay.updateCountdown(countDown);
    };
    /**
     * Activates the afk overlays action
     */
    DelegateBase.prototype.onAfkAction = function () {
        this.afkOverlay.activate();
    };
    /**
     * Instantiate the WebRTCPlayerController interface to provide WebRTCPlayerController functionality within this class and set up anything that requires it
     * @param iWebRtcPlayerController
     */
    DelegateBase.prototype.setIWebRtcPlayerController = function (iWebRtcPlayerController) {
        var _this = this;
        this.iWebRtcController = iWebRtcPlayerController;
        this.iWebRtcController.resizePlayerStyle();
        this.disconnectOverlay.onAction(function () {
            _this.onWebRtcAutoConnect();
            _this.iWebRtcController.connectToSignallingSever();
        });
        // Build the webRtc connect overlay Event Listener and show the connect overlay
        this.connectOverlay.onAction(function () { return _this.iWebRtcController.connectToSignallingSever(); });
        // set up the afk overlays action 
        this.afkOverlay.onAction(function () { return _this.iWebRtcController.onAfkClick(); });
        // set up the play overlays action 
        this.playOverlay.onAction(function () {
            _this.onStreamLoading();
            _this.iWebRtcController.playStream();
        });
        // set up the connect overlays action
        this.showConnectOrAutoConnectOverlays();
    };
    /**
     * Show the Connect Overlay or auto connect
     */
    DelegateBase.prototype.showConnectOrAutoConnectOverlays = function () {
        // set up if the auto play will be used or regular click to start
        if (!this.config.enableSpsAutoConnect) {
            this.showConnectOverlay();
        }
        else {
            // if autoplaying show an info overlay while while waiting for the connection to begin 
            this.onWebRtcAutoConnect();
            this.iWebRtcController.connectToSignallingSever();
        }
    };
    /**
     * Show the webRtcAutoConnect Overlay and connect
     */
    DelegateBase.prototype.onWebRtcAutoConnect = function () {
        this.showTextOverlay("Auto Connecting Now");
        this.showActionOrErrorOnDisconnect = true;
    };
    /**
     * Set up functionality to happen when an instance state change occurs
     * @param instanceState - the message instance state
     */
    DelegateBase.prototype.onInstanceStateChange = function (instanceState) { };
    /**
     * Set up functionality to happen when receiving an auth response
     * @param authResponse - the auth response message type
     */
    DelegateBase.prototype.onAuthenticationResponse = function (authResponse) { };
    /**
     * Set up functionality to happen when receiving a webRTC answer
     */
    DelegateBase.prototype.onWebRtcAnswer = function () {
        this.showTextOverlay("RTC Answer");
    };
    /**
     * Shows a text overlay to alert the user the stream is currently loading
     */
    DelegateBase.prototype.onStreamLoading = function () {
        this.showTextOverlay("Loading Stream");
    };
    /**
     * Event fired when the video is disconnected
     */
    DelegateBase.prototype.onDisconnect = function (eventString) {
        // if we have overridden the default disconnection messsage, assign the new value here
        if (this.iWebRtcController.getDisconnectMessageOverride() != "" && this.iWebRtcController.getDisconnectMessageOverride() !== undefined && this.iWebRtcController.getDisconnectMessageOverride() != null) {
            eventString = this.iWebRtcController.getDisconnectMessageOverride();
            this.iWebRtcController.setDisconnectMessageOverride('');
        }
        if (this.showActionOrErrorOnDisconnect == false) {
            this.showErrorOverlay("Disconnected: " + eventString);
            this.showActionOrErrorOnDisconnect = true;
        }
        else {
            this.showDisconnectOverlay("Disconnected: " + eventString + "  \n Click To Restart");
        }
    };
    /**
     * Handles when Web Rtc is connecting
     */
    DelegateBase.prototype.onWebRtcConnecting = function () {
        this.showTextOverlay("Starting connection to server, please wait");
    };
    /**
     * Handles when Web Rtc has connected
     */
    DelegateBase.prototype.onWebRtcConnected = function () {
        this.showTextOverlay("WebRTC connected, waiting for video");
    };
    /**
     * Handles when Web Rtc fails to connect
     */
    DelegateBase.prototype.onWebRtcFailed = function () {
        this.showErrorOverlay("Unable to setup video");
    };
    /**
     * Set up methods and functions to run when the video is initialised
     */
    DelegateBase.prototype.onVideoInitialised = function () { };
    /**
     * Set up functionality to happen when receiving latency test results
     * @param latency - latency test results object
     */
    DelegateBase.prototype.onLatencyTestResult = function (latency) { };
    /**
     * Set up functionality to happen when receiving video statistics
     * @param videoStats - video statistics as a aggregate stats object
     */
    DelegateBase.prototype.onVideoStats = function (videoStats) { };
    /**
     * Set up functionality to happen when calculating the average video encoder qp
     * @param QP - the quality number of the stream
     */
    DelegateBase.prototype.onVideoEncoderAvgQP = function (QP) { };
    /**
     * Set up functionality to happen when receiving and handling initial settings for the UE app
     * @param settings - initial UE app settings
     */
    DelegateBase.prototype.onInitialSettings = function (settings) { };
    /**
     * Set up functionality to happen when setting quality control ownership of a stream
     * @param hasQualityOwnership - does this user have quality ownership of the stream true / false
     */
    DelegateBase.prototype.onQualityControlOwnership = function (hasQualityOwnership) { };
    return DelegateBase;
}());



/***/ }),

/***/ "./src/FreezeFrame/FreezeFrame.ts":
/*!****************************************!*\
  !*** ./src/FreezeFrame/FreezeFrame.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FreezeFrame: function() { return /* binding */ FreezeFrame; }
/* harmony export */ });
/**
 * A class for managing the freeze frame object
 */
var FreezeFrame = /** @class */ (function () {
    /**
     * Construct a freeze frame
     * @param rootDiv the div that a freeze frame element will be created into
     */
    function FreezeFrame(rootDiv) {
        this.freezeFrameHeight = 0;
        this.freezeFrameWidth = 0;
        this.rootDiv = rootDiv;
        // create the overlay
        this.rootElement = document.createElement('div');
        this.rootElement.id = 'freezeFrame';
        this.rootElement.style.display = 'none';
        this.rootElement.style.pointerEvents = 'none';
        this.rootElement.style.position = 'absolute';
        this.rootElement.style.zIndex = '20';
        // create the image place holder
        this.imageElement = document.createElement('img');
        this.imageElement.style.position = 'absolute';
        // append the image into the root element and append the element to the root div
        this.rootElement.appendChild(this.imageElement);
        this.rootDiv.appendChild(this.rootElement);
    }
    /**
     * Set the freeze frame element for showing
     */
    FreezeFrame.prototype.setElementForShow = function () {
        this.rootElement.style.display = 'block';
    };
    /**
     * Set the freeze frame element for hiding
     */
    FreezeFrame.prototype.setElementForHide = function () {
        this.rootElement.style.display = 'none';
    };
    /**
     * Update the freeze frames image source
     * @param jpeg the freeze frame image as a byte array data
     */
    FreezeFrame.prototype.updateImageElementSource = function (jpeg) {
        var base64 = btoa(jpeg.reduce(function (data, byte) { return data + String.fromCharCode(byte); }, ''));
        this.imageElement.src = 'data:image/jpeg;base64,' + base64;
    };
    /**
     * Set the dimensions for the freeze frame from the element and resize it
     */
    FreezeFrame.prototype.setDimensionsFromElementAndResize = function () {
        this.freezeFrameHeight = this.imageElement.naturalHeight;
        this.freezeFrameWidth = this.imageElement.naturalWidth;
        this.resize();
    };
    /**
     * Resize a freeze frame element
     */
    FreezeFrame.prototype.resize = function () {
        if (this.freezeFrameWidth !== 0 && this.freezeFrameHeight !== 0) {
            var displayWidth = 0;
            var displayHeight = 0;
            var displayTop = 0;
            var displayLeft = 0;
            if (this.enlargeDisplayToFillWindow === null || this.enlargeDisplayToFillWindow === true) {
                var windowAspectRatio = window.innerWidth / window.innerHeight;
                var videoAspectRatio = this.freezeFrameWidth / this.freezeFrameHeight;
                if (windowAspectRatio < videoAspectRatio) {
                    displayWidth = window.innerWidth;
                    displayHeight = Math.floor(window.innerWidth / videoAspectRatio);
                    displayTop = Math.floor((window.innerHeight - displayHeight) * 0.5);
                    displayLeft = 0;
                }
                else {
                    displayWidth = Math.floor(window.innerHeight * videoAspectRatio);
                    displayHeight = window.innerHeight;
                    displayTop = 0;
                    displayLeft = Math.floor((window.innerWidth - displayWidth) * 0.5);
                }
            }
            else {
                // Video is coming in at native resolution, we care more about the player size
                var playerAspectRatio = this.rootDiv.offsetWidth / this.rootDiv.offsetHeight;
                var videoAspectRatio = this.freezeFrameWidth / this.freezeFrameHeight;
                if (playerAspectRatio < videoAspectRatio) {
                    displayWidth = this.rootDiv.offsetWidth;
                    displayHeight = Math.floor(this.rootDiv.offsetWidth / videoAspectRatio);
                    displayTop = Math.floor((this.rootDiv.offsetHeight - displayHeight) * 0.5);
                    displayLeft = 0;
                }
                else {
                    displayWidth = Math.floor(this.rootDiv.offsetHeight * videoAspectRatio);
                    displayHeight = this.rootDiv.offsetHeight;
                    displayTop = 0;
                    displayLeft = Math.floor((this.rootDiv.offsetWidth - displayWidth) * 0.5);
                }
            }
            this.rootElement.style.width = this.rootDiv.offsetWidth + 'px';
            this.rootElement.style.height = this.rootDiv.offsetHeight + 'px';
            this.rootElement.style.left = 0 + 'px';
            this.rootElement.style.top = 0 + 'px';
            this.imageElement.style.width = displayWidth + 'px';
            this.imageElement.style.height = displayHeight + 'px';
            this.imageElement.style.left = displayLeft + 'px';
            this.imageElement.style.top = displayTop + 'px';
        }
    };
    return FreezeFrame;
}());



/***/ }),

/***/ "./src/FreezeFrame/FreezeFrameController.ts":
/*!**************************************************!*\
  !*** ./src/FreezeFrame/FreezeFrameController.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FreezeFrameController: function() { return /* binding */ FreezeFrameController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _FreezeFrame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FreezeFrame */ "./src/FreezeFrame/FreezeFrame.ts");


/**
 * A class for controlling freeze frame functionality
 */
var FreezeFrameController = /** @class */ (function () {
    /**
     * Construct a freeze frame controller
     * @param rootDiv the div that a freeze frame element will be created into
     */
    function FreezeFrameController(rootDiv) {
        this.receiving = false;
        this.size = 0;
        this.jpeg = undefined;
        this.valid = false;
        this.freezeFrame = new _FreezeFrame__WEBPACK_IMPORTED_MODULE_1__.FreezeFrame(rootDiv);
    }
    /**
     * Show the freeze frame if it is valid
     */
    FreezeFrameController.prototype.showFreezeFrame = function () {
        if (this.valid) {
            this.freezeFrame.setElementForShow();
        }
    };
    /**
     * Hide the freeze frame and set the validity to false
     */
    FreezeFrameController.prototype.hideFreezeFrame = function () {
        this.valid = false;
        this.freezeFrame.setElementForHide();
    };
    /**
     * Update the freeze frames image source and load it
     * @param jpeg the freeze frame image as a byte array data
     * @param onLoadCallBack a call back for managing if the play overlay needs to be shown or not
     */
    FreezeFrameController.prototype.updateFreezeFrameAndShow = function (jpeg, onLoadCallBack) {
        var _this = this;
        this.freezeFrame.updateImageElementSource(jpeg);
        this.freezeFrame.imageElement.onload = function () {
            _this.freezeFrame.setDimensionsFromElementAndResize();
            onLoadCallBack();
        };
    };
    /**
     * Process the new freeze frame image and update it
     * @param view the freeze frame image as a byte array data
     * @param onLoadCallBack a call back for managing if the play overlay needs to be shown or not
     */
    FreezeFrameController.prototype.processFreezeFrameMessage = function (view, onLoadCallBack) {
        // Reset freeze frame if we got a freeze frame message and we are not "receiving" yet.
        if (!this.receiving) {
            this.receiving = true;
            this.valid = false;
            this.size = 0;
            this.jpeg = undefined;
        }
        // Extract total size of freeze frame (across all chunks)
        this.size = (new DataView(view.slice(1, 5).buffer)).getInt32(0, true);
        // Get the jpeg part of the payload
        var jpegBytes = view.slice(1 + 4);
        // Append to existing jpeg that holds the freeze frame
        if (this.jpeg) {
            var jpeg = new Uint8Array(this.jpeg.length + jpegBytes.length);
            jpeg.set(this.jpeg, 0);
            jpeg.set(jpegBytes, this.jpeg.length);
            this.jpeg = jpeg;
        }
        // No existing freeze frame jpeg, make one
        else {
            this.jpeg = jpegBytes;
            this.receiving = true;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received first chunk of freeze frame: " + this.jpeg.length + "/" + this.size, 6);
        }
        // Finished receiving freeze frame, we can show it now
        if (this.jpeg.length === this.size) {
            this.receiving = false;
            this.valid = true;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received complete freeze frame " + this.size, 6);
            this.updateFreezeFrameAndShow(this.jpeg, onLoadCallBack);
        }
        // We received more data than the freeze frame payload message indicate (this is an error)
        else if (this.jpeg.length > this.size) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received bigger freeze frame than advertised: " + this.jpeg.length + "/" + this.size);
            this.jpeg = undefined;
            this.receiving = false;
        }
    };
    return FreezeFrameController;
}());



/***/ }),

/***/ "./src/Inputs/FakeTouchController.ts":
/*!*******************************************!*\
  !*** ./src/Inputs/FakeTouchController.ts ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FakeTouchController: function() { return /* binding */ FakeTouchController; }
/* harmony export */ });
/* harmony import */ var _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputMouseMessage */ "./src/UeInstanceMessage/UeInputMouseMessage.ts");
/* harmony import */ var _MouseButtons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MouseButtons */ "./src/Inputs/MouseButtons.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");



/**
 * Allows for the usage of fake touch events and implements ITouchController
 * @param dataChannelController - The controller for the Data channel
 * @param videoPlayerElement - The video player DOM element
 */
var FakeTouchController = /** @class */ (function () {
    function FakeTouchController(dataChannelController, videoPlayerElement) {
        var _this = this;
        this.ueInputMouseMessage = new _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__.UeInputMouseMessage(dataChannelController);
        this.videoPlayerElement = videoPlayerElement;
        this.fingers = [];
        document.ontouchstart = function (ev) { return _this.onTouchStart(ev); };
        document.ontouchend = function (ev) { return _this.onTouchEnd(ev); };
        document.ontouchmove = function (ev) { return _this.onTouchMove(ev); };
    }
    /**
     * When a touch event begins
     * @param touch - the activating touch event
     */
    FakeTouchController.prototype.onTouchStart = function (touch) {
        var touchInfo = touch.changedTouches[0];
        var fingerInfo = {
            ID: touchInfo.identifier,
            X: touchInfo.clientX - this.videoPlayerElement.getBoundingClientRect().left,
            Y: touchInfo.clientY - -this.videoPlayerElement.getBoundingClientRect().top
        };
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "Touch start", 6);
        this.fingers.push(fingerInfo);
        var mouseEvent = new MouseEvent(touch.type, touchInfo);
        this.videoPlayerElement.onmouseenter(mouseEvent);
        this.ueInputMouseMessage.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, fingerInfo.X, fingerInfo.Y);
    };
    /**
     * When a touch event ends
     * @param touchEvent - the activating touch event
     */
    FakeTouchController.prototype.onTouchEnd = function (touch) {
        var touchInfo = touch.changedTouches[0];
        for (var i = 0; i < this.fingers.length; i++) {
            if (touchInfo.identifier === this.fingers[i].ID) {
                var x = touchInfo.clientX - this.videoPlayerElement.getBoundingClientRect().left;
                var y = touchInfo.clientY - this.videoPlayerElement.getBoundingClientRect().top;
                this.ueInputMouseMessage.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, x, y);
                var mouseEvent = new MouseEvent(touch.type, touch);
                this.videoPlayerElement.onmouseleave(mouseEvent);
                this.fingers[i] = this.fingers[this.fingers.length - 1];
                this.fingers.pop();
            }
        }
    };
    /**
     * On a Move touch event
     * @param touchEvent - the activating touch event
     */
    FakeTouchController.prototype.onTouchMove = function (touchEvent) {
        var touchInfo = touchEvent.changedTouches[0];
        for (var i = 0; i < this.fingers.length; i++) {
            if (touchInfo.identifier === this.fingers[i].ID) {
                var x = touchInfo.clientX - this.videoPlayerElement.getBoundingClientRect().left;
                var y = touchInfo.clientY - this.videoPlayerElement.getBoundingClientRect().top;
                this.ueInputMouseMessage.sendMouseMove(x, y, x - this.fingers[i].X, y - this.fingers[i].Y);
                this.fingers[i].X = x;
                this.fingers[i].Y = y;
            }
        }
    };
    return FakeTouchController;
}());



/***/ }),

/***/ "./src/Inputs/GamepadController.ts":
/*!*****************************************!*\
  !*** ./src/Inputs/GamepadController.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GamePadController: function() { return /* binding */ GamePadController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _UeInstanceMessage_UeInputGamePadMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputGamePadMessage */ "./src/UeInstanceMessage/UeInputGamePadMessage.ts");


/**
 * The class that handles the functionality of gamepads and controllers
 */
var GamePadController = /** @class */ (function () {
    /**
     * @param dataChannelController - the data chanel controller
     */
    function GamePadController(dataChannelController) {
        var _this = this;
        this.ueInputGamePadMessage = new _UeInstanceMessage_UeInputGamePadMessage__WEBPACK_IMPORTED_MODULE_1__.UeInputGamePadMessage(dataChannelController);
        if ("GamepadEvent" in window) {
            window.addEventListener("gamepadconnected", function (ev) { return _this.gamePadConnectHandler(ev); });
            window.addEventListener("gamepaddisconnected", function (ev) { return _this.gamePadDisconnectHandler(ev); });
        }
        else if ("WebKitGamepadEvent" in window) {
            window.addEventListener("webkitgamepadconnected", function (ev) { return _this.gamePadConnectHandler(ev); });
            window.addEventListener("webkitgamepaddisconnected", function (ev) { return _this.gamePadDisconnectHandler(ev); });
        }
        this.controllers = [];
    }
    /**
     * Connects the gamepad handler
     * @param gamePadEvent - the activating gamepad event
     */
    GamePadController.prototype.gamePadConnectHandler = function (gamePadEvent) {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Gamepad connect handler", 6);
        var gamepad = gamePadEvent.gamepad;
        var temp = {
            currentState: gamepad,
            prevState: gamepad
        };
        this.controllers.push(temp);
        this.controllers[gamepad.index].currentState = gamepad;
        this.controllers[gamepad.index].prevState = gamepad;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "gamepad: " + gamepad.id + " connected", 6);
        window.requestAnimationFrame(function () { return _this.updateStatus(); });
    };
    /**
     * Disconnects the gamepad handler
     * @param gamePadEvent - the activating gamepad event
     */
    GamePadController.prototype.gamePadDisconnectHandler = function (gamePadEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Gamepad disconnect handler", 6);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "gamepad: " + gamePadEvent.gamepad.id + " disconnected", 6);
        delete this.controllers[gamePadEvent.gamepad.index];
        this.controllers = this.controllers.filter(function (controller) { return controller !== undefined; });
    };
    /**
     * Scan for connected gamepads
     */
    GamePadController.prototype.scanGamePads = function () {
        var gamepads = ((navigator.getGamepads) ? navigator.getGamepads() : []); //  : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);
        for (var i = 0; i < gamepads.length; i++) {
            if (gamepads[i] && (gamepads[i].index in this.controllers)) {
                this.controllers[gamepads[i].index].currentState = gamepads[i];
            }
        }
    };
    /**
     * Updates the status of the gamepad and sends the inputs
     */
    GamePadController.prototype.updateStatus = function () {
        var _this = this;
        this.scanGamePads();
        // Iterate over multiple controllers in the case the multiple gamepads are connected
        for (var _i = 0, _a = this.controllers; _i < _a.length; _i++) {
            var controller = _a[_i];
            try {
                var currentState = controller.currentState;
                for (var i = 0; i < controller.currentState.buttons.length; i++) {
                    var currentButton = controller.currentState.buttons[i];
                    var previousButton = controller.prevState.buttons[i];
                    // Button 6 is actually the left trigger, send it to UE as an analog axis
                    // Button 7 is actually the right trigger, send it to UE as an analog axis
                    // The rest are normal buttons. Treat as such
                    if (currentButton.pressed && !previousButton.pressed) {
                        // New press
                        if (i == 6) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 5, currentButton.value);
                        }
                        else if (i == 7) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 6, currentButton.value);
                        }
                        else {
                            this.ueInputGamePadMessage.sendControllerButtonPressed(currentState.index, i, false);
                        }
                    }
                    else if (!currentButton.pressed && previousButton.pressed) {
                        // release
                        if (i == 6) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 5, 0);
                        }
                        else if (i == 7) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 6, 0);
                        }
                        else {
                            this.ueInputGamePadMessage.sendControllerButtonReleased(currentState.index, i);
                        }
                    }
                    else if (currentButton.pressed && previousButton.pressed) {
                        // repeat press / hold
                        if (i == 6) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 5, currentButton.value);
                        }
                        else if (i == 7) {
                            this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 6, currentButton.value);
                        }
                        else {
                            this.ueInputGamePadMessage.sendControllerButtonPressed(currentState.index, i, true);
                        }
                    }
                    // Last case is button isn't currently pressed and wasn't pressed before. This doesn't need an else block
                }
                for (var i = 0; i < currentState.axes.length; i += 2) {
                    var x = parseFloat(currentState.axes[i].toFixed(4));
                    // https://w3c.github.io/gamepad/#remapping Gamepad browser side standard mapping has positive down, negative up. This is downright disgusting. So we fix it.
                    var y = -parseFloat(currentState.axes[i + 1].toFixed(4));
                    if (i === 0) {
                        // left stick
                        // axis 1 = left horizontal
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 1, x);
                        // axis 2 = left vertical
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 2, y);
                    }
                    else if (i === 2) {
                        // right stick
                        // axis 3 = right horizontal
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 3, x);
                        // axis 4 = right vertical
                        this.ueInputGamePadMessage.sendControllerAxisMove(currentState.index, 4, y);
                    }
                }
                this.controllers[currentState.index].prevState = currentState;
            }
            catch (error) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Oh dear the gamepad poll loop has thrown an error");
            }
        }
        window.requestAnimationFrame(function () { return _this.updateStatus(); });
    };
    return GamePadController;
}());



/***/ }),

/***/ "./src/Inputs/GyroController.ts":
/*!**************************************!*\
  !*** ./src/Inputs/GyroController.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GyroController: function() { return /* binding */ GyroController; }
/* harmony export */ });
/**
 * The Class that handles gyro input
 */
var GyroController = /** @class */ (function () {
    function GyroController(dataChannelController) {
        this.dataChannelController = dataChannelController;
    }
    return GyroController;
}());



/***/ }),

/***/ "./src/Inputs/InputController.ts":
/*!***************************************!*\
  !*** ./src/Inputs/InputController.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InputController: function() { return /* binding */ InputController; }
/* harmony export */ });
/* harmony import */ var _FakeTouchController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FakeTouchController */ "./src/Inputs/FakeTouchController.ts");
/* harmony import */ var _KeyboardController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./KeyboardController */ "./src/Inputs/KeyboardController.ts");
/* harmony import */ var _MouseController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MouseController */ "./src/Inputs/MouseController.ts");
/* harmony import */ var _TouchController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TouchController */ "./src/Inputs/TouchController.ts");
/* harmony import */ var _GamepadController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GamepadController */ "./src/Inputs/GamepadController.ts");
/* harmony import */ var _Config_Config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Config/Config */ "./src/Config/Config.ts");
/* harmony import */ var _VideoPlayer_VideoPlayerMouseLockedEvents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../VideoPlayer/VideoPlayerMouseLockedEvents */ "./src/VideoPlayer/VideoPlayerMouseLockedEvents.ts");
/* harmony import */ var _VideoPlayer_VideoPlayerMouseHoverEvents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../VideoPlayer/VideoPlayerMouseHoverEvents */ "./src/VideoPlayer/VideoPlayerMouseHoverEvents.ts");
/* harmony import */ var _GyroController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./GyroController */ "./src/Inputs/GyroController.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");










/**
 * Class for handling inputs for mouse and keyboard
 */
var InputController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - the data channel controller
     */
    function InputController(dataChannelController, ueDescriptorUi, videoElementProvider) {
        this.dataChannelController = dataChannelController;
        this.videoElementProvider = videoElementProvider;
        this.ueDescriptorUi = ueDescriptorUi;
    }
    /**
     * registers browser key events
     * @param suppressBrowserKeys - option to suppress browser keys
     */
    InputController.prototype.registerKeyBoard = function (suppressBrowserKeys) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Register Keyboard Events", 7);
        this.keyboardController = new _KeyboardController__WEBPACK_IMPORTED_MODULE_1__.KeyboardController(this.dataChannelController, this.ueDescriptorUi, suppressBrowserKeys);
        this.keyboardController.registerKeyBoardEvents();
    };
    /**
     * register mouse events based on a control type
     * @param controlScheme - if the mouse is either hovering or locked
     */
    InputController.prototype.registerMouse = function (controlScheme) {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Register Mouse Events", 7);
        // casting these as any as they do not have the moz attributes we require
        var videoElement = this.videoElementProvider.getVideoElement();
        var videoInputBindings;
        this.mouseController = new _MouseController__WEBPACK_IMPORTED_MODULE_2__.MouseController(this.dataChannelController, this.videoElementProvider);
        switch (controlScheme) {
            case _Config_Config__WEBPACK_IMPORTED_MODULE_5__.ControlSchemeType.LockedMouse:
                videoInputBindings = new _VideoPlayer_VideoPlayerMouseLockedEvents__WEBPACK_IMPORTED_MODULE_6__.VideoPlayerMouseLockedEvents(this.videoElementProvider, this.mouseController);
                videoElement.onclick = function (event) { return _this.videoElementProvider.setClickActions(event); };
                document.addEventListener('pointerlockchange', function () { return videoInputBindings.handleLockStateChange(); }, false);
                document.addEventListener('mozpointerlockchange', function () { return videoInputBindings.handleLockStateChange(); }, false);
                break;
            case _Config_Config__WEBPACK_IMPORTED_MODULE_5__.ControlSchemeType.HoveringMouse:
                videoInputBindings = new _VideoPlayer_VideoPlayerMouseHoverEvents__WEBPACK_IMPORTED_MODULE_7__.VideoPlayerMouseHoverEvents(this.mouseController);
                // set the onclick to null if the input bindings were previously set to pointerlock
                videoElement.onclick = null;
                document.addEventListener("mousemove", function (mouseEvent) { return videoInputBindings.handleMouseMove(mouseEvent); }, { passive: false });
                document.addEventListener("wheel", function (mouseEvent) { return videoInputBindings.handleMouseWheel(mouseEvent); }, { passive: false });
                videoElement.onmousedown = function (mouseEvent) { return videoInputBindings.handleMouseDown(mouseEvent); };
                videoElement.onmouseup = function (mouseEvent) { return videoInputBindings.handleMouseUp(mouseEvent); };
                break;
            default:
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "unknown Control Scheme Type Defaulting to Locked Mouse Events");
                break;
        }
    };
    /**
     * register touch events
     * @param fakeMouseTouch - the faked mouse touch event
     * @param playerElement - the player elements DOM
     */
    InputController.prototype.registerTouch = function (fakeMouseTouch, playerElement) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Registering Touch", 6);
        if (fakeMouseTouch) {
            //(<HTMLVideoElement>playerElement.getElementsByTagName("video")[0])
            this.touchController = new _FakeTouchController__WEBPACK_IMPORTED_MODULE_0__.FakeTouchController(this.dataChannelController, playerElement);
        }
        else {
            this.touchController = new _TouchController__WEBPACK_IMPORTED_MODULE_3__.TouchController(this.dataChannelController, playerElement, this.videoElementProvider);
        }
    };
    /**
     * registers a gamepad
     */
    InputController.prototype.registerGamePad = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Register Game Pad", 7);
        this.gamePadController = new _GamepadController__WEBPACK_IMPORTED_MODULE_4__.GamePadController(this.dataChannelController);
    };
    /**
     * registers a gyro device
     */
    InputController.prototype.registerGyro = function () {
        this.gyroController = new _GyroController__WEBPACK_IMPORTED_MODULE_8__.GyroController(this.dataChannelController);
    };
    return InputController;
}());



/***/ }),

/***/ "./src/Inputs/KeyboardController.ts":
/*!******************************************!*\
  !*** ./src/Inputs/KeyboardController.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KeyboardController: function() { return /* binding */ KeyboardController; }
/* harmony export */ });
/* harmony import */ var _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SpecialKeyCodes */ "./src/Inputs/SpecialKeyCodes.ts");
/* harmony import */ var _UeInstanceMessage_UeInputKeyboardMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputKeyboardMessage */ "./src/UeInstanceMessage/UeInputKeyboardMessage.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");



/**
 * Handles the Keyboard Inputs for the document
 */
var KeyboardController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - Data Channel Controller
     * @param suppressBrowserKeys - Suppress Browser Keys
     */
    function KeyboardController(dataChannelController, ueDescriptorUi, suppressBrowserKeys) {
        this.ueInputKeyBoardMessage = new _UeInstanceMessage_UeInputKeyboardMessage__WEBPACK_IMPORTED_MODULE_1__.UeInputKeyboardMessage(dataChannelController);
        this.ueDescriptorUi = ueDescriptorUi;
        this.suppressBrowserKeys = suppressBrowserKeys;
    }
    /**
     * Registers document keyboard events with the controller
     */
    KeyboardController.prototype.registerKeyBoardEvents = function () {
        var _this = this;
        document.onkeydown = function (ev) { return _this.handleOnKeyDown(ev); };
        document.onkeyup = function (ev) { return _this.handleOnKeyUp(ev); };
        //This has been deprecated as at Jun 13 2021
        document.onkeypress = function (ev) { return _this.handleOnKeyPress(ev); };
    };
    /**
     * Handles When a key is down
     * @param keyboardEvent - Keyboard event
     */
    KeyboardController.prototype.handleOnKeyDown = function (keyboardEvent) {
        if (keyboardEvent.ctrlKey) {
            if (keyboardEvent.key == 'v') {
                var self_1 = this;
                navigator.clipboard.readText().then(function (text) {
                    for (var i = 0; i < text.length; i++) {
                        var char = text.charAt(i);
                        var key = char.charCodeAt(0);
                        self_1.ueInputKeyBoardMessage.sendKeyDown(key, keyboardEvent.repeat);
                        document.onkeypress(new KeyboardEvent("keypress", { charCode: key }));
                    }
                }).catch(function (err) {
                    console.error('Failed to read clipboard contents: ', err);
                });
            }
            if (keyboardEvent.key == 'b') {
                console.log('name');
                this.ueDescriptorUi.sendUiInteraction(JSON.stringify({ "Name": 'RandomName' }));
            }
            if (keyboardEvent.key == 'c') {
                console.log('copy');
                //this.ueDescriptorUi.sendUiConsoleInteraction("requestInputSelection");
            }
            if (this.getKeycode(keyboardEvent) == _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.backSpace) {
                // clear input box
            }
        }
        else {
            var key = keyboardEvent.key;
            if (key == 'Unidentified') {
                return;
            }
            this.ueInputKeyBoardMessage.sendKeyDown(this.getKeycode(keyboardEvent), keyboardEvent.repeat);
            // backSpace is not considered a keypress in JavaScript but we need it
            // to be so characters may be deleted in a UE4 text entry field.
            if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.backSpace) {
                document.onkeypress(new KeyboardEvent("keypress", { charCode: _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.backSpace }));
            }
        }
        if (this.suppressBrowserKeys && this.isKeyCodeBrowserKey(keyboardEvent.keyCode)) {
            keyboardEvent.preventDefault();
        }
    };
    /**
     * handles when a key is up
     * @param keyboardEvent - Keyboard event
     */
    KeyboardController.prototype.handleOnKeyUp = function (keyboardEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "handleOnKeyUp", 6);
        this.ueInputKeyBoardMessage.sendKeyUp(this.getKeycode(keyboardEvent));
        if (this.suppressBrowserKeys && this.isKeyCodeBrowserKey(keyboardEvent.keyCode)) {
            keyboardEvent.preventDefault();
        }
    };
    /**
     * Handles when a key is press
     * @param keyboard - Keyboard Event
     */
    KeyboardController.prototype.handleOnKeyPress = function (keyboard) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "handleOnkeypress", 6);
        this.ueInputKeyBoardMessage.sendKeyPress(keyboard.charCode);
    };
    /**
     * Gets the Keycode of the Key pressed
     * @param keyboardEvent - Key board Event
     * @returns the key code of the Key
     */
    KeyboardController.prototype.getKeycode = function (keyboardEvent) {
        //Need to move this to a newer version using keyboard event location. as keyboardEvent.keycode is deprecated
        if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.shift && keyboardEvent.code === 'ShiftRight')
            return _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.rightShift;
        else if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.control && keyboardEvent.code === 'ControlRight')
            return _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.rightControl;
        else if (keyboardEvent.keyCode === _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.alt && keyboardEvent.code === 'AltRight')
            return _SpecialKeyCodes__WEBPACK_IMPORTED_MODULE_0__.SpecialKeyCodes.rightAlt;
        else
            return keyboardEvent.keyCode;
    };
    /**
     * Browser keys do not have a charCode so we only need to test keyCode.
     */
    KeyboardController.prototype.isKeyCodeBrowserKey = function (keyCode) {
        // Function keys or tab key.
        if (keyCode == 116 || keyCode == 122)
            return false;
        return keyCode >= 112 && keyCode <= 123 || keyCode === 9;
    };
    return KeyboardController;
}());

/* 5457524f4d4d */


/***/ }),

/***/ "./src/Inputs/MouseButtons.ts":
/*!************************************!*\
  !*** ./src/Inputs/MouseButtons.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MouseButton: function() { return /* binding */ MouseButton; },
/* harmony export */   MouseButtonsMask: function() { return /* binding */ MouseButtonsMask; }
/* harmony export */ });
/**
 * Mouse Button Data
 * {@link https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button}
 */
var MouseButton = /** @class */ (function () {
    function MouseButton() {
    }
    MouseButton.mainButton = 0; // Left button.
    MouseButton.auxiliaryButton = 1; // Wheel button.
    MouseButton.secondaryButton = 2; // Right button.
    MouseButton.fourthButton = 3; // Browser Back button.
    MouseButton.fifthButton = 4; // Browser Forward button.
    return MouseButton;
}());

/**
 * Mouse Button Mask Data
 * {@link https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons}
 */
var MouseButtonsMask = /** @class */ (function () {
    function MouseButtonsMask() {
    }
    MouseButtonsMask.primaryButton = 1; // Left button.
    MouseButtonsMask.secondaryButton = 2; // Right button.
    MouseButtonsMask.auxiliaryButton = 4; // Wheel button.
    MouseButtonsMask.fourthButton = 8; // Browser Back button.
    MouseButtonsMask.fifthButton = 16; // Browser Forward button.
    return MouseButtonsMask;
}());



/***/ }),

/***/ "./src/Inputs/MouseController.ts":
/*!***************************************!*\
  !*** ./src/Inputs/MouseController.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MouseController: function() { return /* binding */ MouseController; }
/* harmony export */ });
/* harmony import */ var _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputMouseMessage */ "./src/UeInstanceMessage/UeInputMouseMessage.ts");
/* harmony import */ var _MouseButtons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MouseButtons */ "./src/Inputs/MouseButtons.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");



/**
 * Handles the Mouse Inputs for the document
 */
var MouseController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - Data Channel Controller
     */
    function MouseController(dataChannelController, videoElementProvider) {
        this.unsignedOutOfRange = 65535;
        this.signedOutOfRange = 32767;
        this.printInputs = false;
        this.ueInputMouseMessage = new _UeInstanceMessage_UeInputMouseMessage__WEBPACK_IMPORTED_MODULE_0__.UeInputMouseMessage(dataChannelController);
        this.videoElementProvider = videoElementProvider;
    }
    /**
     * Handle when a mouse button is released
     * @param buttons - Mouse Button
     * @param X - Mouse pointer X coordinate
     * @param Y - Mouse pointer Y coordinate
     */
    MouseController.prototype.releaseMouseButtons = function (buttons, X, Y) {
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.primaryButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.secondaryButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.secondaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.auxiliaryButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.auxiliaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fourthButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fourthButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fifthButton) {
            this.sendMouseUp(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fifthButton, X, Y);
        }
    };
    /**
     * Handle when a mouse button is pressed
     * @param buttons - Mouse Button
     * @param X - Mouse pointer X coordinate
     * @param Y - Mouse pointer Y coordinate
     */
    MouseController.prototype.pressMouseButtons = function (buttons, X, Y) {
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.primaryButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.mainButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.secondaryButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.secondaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.auxiliaryButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.auxiliaryButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fourthButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fourthButton, X, Y);
        }
        if (buttons & _MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButtonsMask.fifthButton) {
            this.sendMouseDown(_MouseButtons__WEBPACK_IMPORTED_MODULE_1__.MouseButton.fifthButton, X, Y);
        }
    };
    /**
     * Handle when a mouse is moved
     * @param X - Mouse X Coordinate
     * @param Y - Mouse Y Coordinate
     * @param deltaX - Mouse Delta X Coordinate
     * @param deltaY - Mouse Delta Y Coordinate
     */
    MouseController.prototype.sendMouseMove = function (X, Y, deltaX, deltaY) {
        if (this.printInputs) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "x: " + X + ", y:" + Y + ", dX: " + deltaX + ", dY: " + deltaY, 7);
        }
        var mouseCord = this.normaliseAndQuantiseUnsigned(X, Y);
        var deltaCode = this.normaliseAndQuantiseSigned(deltaX, deltaY);
        this.ueInputMouseMessage.sendMouseMove(mouseCord.x, mouseCord.y, deltaCode.x, deltaCode.y);
    };
    /**
     * Handles when a mouse button is pressed down
     * @param button - Mouse Button Pressed
     * @param X  - Mouse X Coordinate
     * @param Y  - Mouse Y Coordinate
     */
    MouseController.prototype.sendMouseDown = function (button, X, Y) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "mouse button " + button + " down at (" + X + ", " + Y + ")", 6);
        var coord = this.normaliseAndQuantiseUnsigned(X, Y);
        this.ueInputMouseMessage.sendMouseDown(button, coord.x, coord.y);
    };
    /**
     * Handles when a mouse button is pressed up
     * @param button - Mouse Button Pressed
     * @param X  - Mouse X Coordinate
     * @param Y  - Mouse Y Coordinate
     */
    MouseController.prototype.sendMouseUp = function (button, X, Y) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "mouse button " + button + " up at (" + X + ", " + Y + ")", 6);
        var coord = this.normaliseAndQuantiseUnsigned(X, Y);
        this.ueInputMouseMessage.sendMouseUp(button, coord.x, coord.y);
    };
    /**
     * Handles when a mouse wheel event
     * @param deltaY - Mouse Wheel data
     * @param X  - Mouse X Coordinate
     * @param Y  - Mouse Y Coordinate
     */
    MouseController.prototype.sendMouseWheel = function (deltaY, X, Y) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), "mouse wheel with delta " + deltaY + " at (" + X + ", " + Y + ")", 6);
        var coord = this.normaliseAndQuantiseUnsigned(X, Y);
        this.ueInputMouseMessage.sendMouseWheel(deltaY * -1, coord.x, coord.y);
    };
    /**
     * Handles mouse enter
     */
    MouseController.prototype.sendMouseEnter = function () {
        this.ueInputMouseMessage.sendMouseEnter();
    };
    /**
     * Handles mouse Leave
     */
    MouseController.prototype.sendMouseLeave = function () {
        this.ueInputMouseMessage.sendMouseLeave();
    };
    /**
     * Normalises and Quantised the Mouse Coordinates
     * @param x - Mouse X Coordinate
     * @param y - Mouse Y Coordinate
     * @returns - Normalize And Quantize Unsigned Data Type
     */
    MouseController.prototype.normaliseAndQuantiseUnsigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio', 6);
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / rootDiv.clientWidth;
                var normalizedY = ratio * (y / rootDiv.clientHeight - 0.5) + 0.5;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
            else {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                var ratio = videoAspectRatio / playerAspectRatio;
                // Unsigned.
                var normalizedX = ratio * (x / rootDiv.clientWidth - 0.5) + 0.5;
                var normalizedY = y / rootDiv.clientHeight;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
        }
    };
    /**
     * Denormalises and unquantised the Mouse Coordinates
     * @param x - Mouse X Coordinate
     * @param y - Mouse Y Coordinate
     * @returns - unquantise and Denormalize Unsigned Data Type
     */
    MouseController.prototype.unquantiseAndDenormaliseUnsigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio', 6);
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / (this.unsignedOutOfRange + 1);
                var normalizedY = (y / (this.unsignedOutOfRange + 1) - 0.5) / ratio + 0.5;
                return {
                    x: normalizedX * rootDiv.clientWidth,
                    y: normalizedY * rootDiv.clientHeight
                };
            }
            else {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                var ratio = videoAspectRatio / playerAspectRatio;
                // Unsigned.
                var normalizedX = (x / (this.unsignedOutOfRange + 1) - 0.5) / ratio + 0.5;
                var normalizedY = y / (this.unsignedOutOfRange + 1);
                return {
                    x: normalizedX * rootDiv.clientWidth,
                    y: normalizedY * rootDiv.clientHeight
                };
            }
        }
    };
    /**
     * Normalises and Quantised the Mouse Coordinates
     * @param x - Mouse X Coordinate
     * @param y - Mouse Y Coordinate
     * @returns - Normalize And Quantize Signed Data Type
     */
    MouseController.prototype.normaliseAndQuantiseSigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio', 6);
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / (0.5 * rootDiv.clientWidth);
                var normalizedY = (ratio * y) / (0.5 * rootDiv.clientHeight);
                return {
                    x: normalizedX * this.signedOutOfRange,
                    y: normalizedY * this.signedOutOfRange
                };
            }
            else {
                if (this.printInputs) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_2__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                }
                var ratio = videoAspectRatio / playerAspectRatio;
                // Signed.
                var normalizedX = (ratio * x) / (0.5 * rootDiv.clientWidth);
                var normalizedY = y / (0.5 * rootDiv.clientHeight);
                return {
                    x: normalizedX * this.signedOutOfRange,
                    y: normalizedY * this.signedOutOfRange
                };
            }
        }
    };
    return MouseController;
}());



/***/ }),

/***/ "./src/Inputs/SpecialKeyCodes.ts":
/*!***************************************!*\
  !*** ./src/Inputs/SpecialKeyCodes.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpecialKeyCodes: function() { return /* binding */ SpecialKeyCodes; }
/* harmony export */ });
/**
 * Registers the Special Key codes
 *  Must be kept in sync with JavaScriptKeyCodeToFKey C++ array.
 * The index of the entry in the array is the special key code given below.
 */
var SpecialKeyCodes = /** @class */ (function () {
    function SpecialKeyCodes() {
    }
    SpecialKeyCodes.backSpace = 8;
    SpecialKeyCodes.shift = 16;
    SpecialKeyCodes.control = 17;
    SpecialKeyCodes.alt = 18;
    SpecialKeyCodes.rightShift = 253;
    SpecialKeyCodes.rightControl = 254;
    SpecialKeyCodes.rightAlt = 255;
    return SpecialKeyCodes;
}());



/***/ }),

/***/ "./src/Inputs/TouchController.ts":
/*!***************************************!*\
  !*** ./src/Inputs/TouchController.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TouchController: function() { return /* binding */ TouchController; }
/* harmony export */ });
/* harmony import */ var _UeInstanceMessage_UeInputTouchMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../UeInstanceMessage/UeInputTouchMessage */ "./src/UeInstanceMessage/UeInputTouchMessage.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");


/**
 * Handles the Touch input Events
 */
var TouchController = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - the data channel controller
     * @param playerElement - the player element DOM
     */
    function TouchController(dataChannelController, playerElement, videoElementProvider) {
        var _this = this;
        this.ueInputTouchMessage = new _UeInstanceMessage_UeInputTouchMessage__WEBPACK_IMPORTED_MODULE_0__.UeInputTouchMessage(dataChannelController, videoElementProvider);
        this.playerElement = playerElement;
        this.playerElement.ontouchstart = function (ev) { return _this.onTouchStart(ev); };
        this.playerElement.ontouchend = function (ev) { return _this.onTouchEnd(ev); };
        this.playerElement.ontouchmove = function (ev) { return _this.onTouchMove(ev); };
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "Touch Events Registered", 6);
    }
    /**
     * When a touch event starts
     * @param event - the touch event being intercepted
     */
    TouchController.prototype.onTouchStart = function (touchEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "on Touch Start", 6);
        for (var i = 0; i < touchEvent.changedTouches.length; i++) {
            var touch = touchEvent.changedTouches[i];
            var finger = this.ueInputTouchMessage.fingers.pop();
            if (finger === undefined) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "who has more then 10 fingers", 6);
            }
            this.ueInputTouchMessage.fingersIds[touch.identifier] = finger;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "touch.identifier: " + touch.identifier, 6);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "finger: " + finger, 6);
        }
        this.ueInputTouchMessage.sendTouchStart(touchEvent.changedTouches);
        touchEvent.preventDefault();
    };
    /**
     * When a touch event ends
     * @param event - the touch event being intercepted
     */
    TouchController.prototype.onTouchEnd = function (touchEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "on Touch END", 6);
        for (var i = 0; i < touchEvent.changedTouches.length; i++) {
            var touch = touchEvent.changedTouches[i];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "on Forget Touch", 6);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "touch id: " + touch.identifier, 6);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "Fingers id Touch id: " + this.ueInputTouchMessage.fingersIds[touch.identifier], 6);
            this.ueInputTouchMessage.fingers.push(this.ueInputTouchMessage.fingersIds[touch.identifier]);
            this.ueInputTouchMessage.fingers.sort(function (a, b) { return b - a; });
            delete this.ueInputTouchMessage.fingersIds[touch.identifier];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "touch.identifier: " + touch.identifier, 6);
        }
        this.ueInputTouchMessage.sendTouchEnd(touchEvent.changedTouches);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_1__.Logger.GetStackTrace(), "Sucessful touch END", 6);
        touchEvent.preventDefault();
    };
    /**
     * when a moving touch event occurs
     * @param event - the touch event being intercepted
     */
    TouchController.prototype.onTouchMove = function (touchEvent) {
        this.ueInputTouchMessage.sendTouchMove(touchEvent.touches);
        touchEvent.preventDefault();
    };
    return TouchController;
}());



/***/ }),

/***/ "./src/Logger/Logger.ts":
/*!******************************!*\
  !*** ./src/Logger/Logger.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Logger: function() { return /* binding */ Logger; }
/* harmony export */ });
var Logger = /** @class */ (function () {
    function Logger() {
    }
    /**
     * Captures the stack and returns it
     * @returns the current stack
     */
    Logger.GetStackTrace = function () {
        var error = new Error();
        var formattedStack = "No Stack Available for this browser";
        // format the error
        if (error.stack) {
            formattedStack = error.stack.toString().replace(/Error/g, '');
        }
        return formattedStack;
    };
    ;
    /**
     * Set the log verbosity level
     */
    Logger.SetLoggerVerbosity = function (verboseLogLevel) {
        if (this.verboseLogLevel != null) {
            this.verboseLogLevel = verboseLogLevel;
        }
    };
    /**
     * The standard logging output
     * @param stack - the stack trace
     * @param message - the message to be logged
     * @param verbosity - the verbosity level
     */
    Logger.Log = function (stack, message, verbosity) {
        if (verbosity > this.verboseLogLevel) {
            return;
        }
        var returnString = "Level: Log, Caller: " + stack + ", Msg: " + message;
        console.log(returnString);
    };
    /**
     * The standard logging output
     * @param stack - the stack trace
     * @param message - the message to be logged
     * @param verbosity - the verbosity level
     */
    Logger.Info = function (stack, message, verbosity) {
        if (verbosity > this.verboseLogLevel) {
            return;
        }
        var returnString = "Level: Info, Msg: " + message;
        console.info(returnString);
    };
    /**
     * The standard logging output
     * @param stack - the stack trace
     * @param message - the message to be logged
     */
    Logger.Error = function (stack, message) {
        var returnString = "Level: Error, Caller: " + stack + ", Msg: " + message;
        console.error(returnString);
    };
    Logger.verboseLogLevel = 5;
    return Logger;
}());



/***/ }),

/***/ "./src/MicPlayer/MicController.ts":
/*!****************************************!*\
  !*** ./src/MicPlayer/MicController.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MicController: function() { return /* binding */ MicController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

var MicController = /** @class */ (function () {
    function MicController(urlParams) {
        // get the mic status from the url 
        this.useMic = urlParams.has('useMic');
        if (this.useMic) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Microphone access is enabled IT IS EXPERIMENTAL AND IS NOT PROPERLY SUPPORTED ACROSS UE. IF IT DOES NOT WORK ITS YOUR OWN FAULT! YOU HAVE BEEN TOLD.");
        }
        // if (!this.useMic) {
        //     Logger.Log(Logger.GetStackTrace(), "Microphone access is not enabled. Pass ?useMic in the url to enable it.");
        // }
        // check if the connection is not local and is https or mic will not work 
        this.isLocalhostConnection = location.hostname === "localhost" || location.hostname === "127.0.0.1";
        this.isHttpsConnection = location.protocol === 'https:';
        if (this.useMic && !this.isLocalhostConnection && !this.isHttpsConnection) {
            this.useMic = false;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access.");
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'");
        }
    }
    return MicController;
}());



/***/ }),

/***/ "./src/PeerConnectionController/AggregatedStats.ts":
/*!*********************************************************!*\
  !*** ./src/PeerConnectionController/AggregatedStats.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AggregatedStats: function() { return /* binding */ AggregatedStats; }
/* harmony export */ });
/* harmony import */ var _InboundAudioStats__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InboundAudioStats */ "./src/PeerConnectionController/InboundAudioStats.ts");
/* harmony import */ var _InboundVideoStats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InboundVideoStats */ "./src/PeerConnectionController/InboundVideoStats.ts");
/* harmony import */ var _DataChannelStats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DataChannelStats */ "./src/PeerConnectionController/DataChannelStats.ts");
/* harmony import */ var _CandidateStat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CandidateStat */ "./src/PeerConnectionController/CandidateStat.ts");
/* harmony import */ var _CandidatePairStats__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CandidatePairStats */ "./src/PeerConnectionController/CandidatePairStats.ts");
/* harmony import */ var _OutBoundVideoStats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OutBoundVideoStats */ "./src/PeerConnectionController/OutBoundVideoStats.ts");
/* harmony import */ var _StreamStats__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StreamStats */ "./src/PeerConnectionController/StreamStats.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};








var AggregatedStats = /** @class */ (function () {
    function AggregatedStats() {
        this.inboundVideoStats = new _InboundVideoStats__WEBPACK_IMPORTED_MODULE_1__.inboundVideoStats();
        this.inboundAudioStats = new _InboundAudioStats__WEBPACK_IMPORTED_MODULE_0__.inboundAudioStats();
        this.candidatePair = new _CandidatePairStats__WEBPACK_IMPORTED_MODULE_4__.CandidatePairStats();
        this.dataChannelStats = new _DataChannelStats__WEBPACK_IMPORTED_MODULE_2__.dataChannelStats();
        this.outBoundVideoStats = new _OutBoundVideoStats__WEBPACK_IMPORTED_MODULE_5__.OutBoundVideoStats();
        this.streamStats = new _StreamStats__WEBPACK_IMPORTED_MODULE_6__.StreamStats();
    }
    /**
     * Gather all the information from the RTC Peer Connection Report
     * @param rtcStatsReport - RTC Stats Report
     */
    AggregatedStats.prototype.processStats = function (rtcStatsReport) {
        var _this = this;
        this.localCandidates = new Array();
        this.remoteCandidates = new Array();
        rtcStatsReport.forEach(function (stat) {
            var type = stat.type;
            switch (type) {
                case "candidate-pair":
                    _this.handleCandidatePair(stat);
                    break;
                case "certificate":
                    break;
                case "codec":
                    break;
                case "csrc":
                    break;
                case "data-channel":
                    _this.handleDataChannel(stat);
                    break;
                case "inbound-rtp":
                    _this.handleInBoundRTP(stat);
                    break;
                case "local-candidate":
                    _this.handleLocalCandidate(stat);
                    break;
                case "media-source":
                    break;
                case "outbound-rtp":
                    break;
                case "peer-connection":
                    break;
                case "remote-candidate":
                    _this.handleRemoteCandidate(stat);
                    break;
                case "remote-inbound-rtp":
                    break;
                case "remote-outbound-rtp":
                    _this.handleRemoteOutBound(stat);
                    break;
                case "track":
                    _this.handleTrack(stat);
                    break;
                case "transport":
                    break;
                case "stream":
                    _this.handleStream(stat);
                    break;
                default:
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.GetStackTrace(), "unhandled Stat Type");
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.GetStackTrace(), stat);
                    break;
            }
        });
    };
    /**
     * Process stream stats data from webrtc
     *
     * @param stat the stats coming in from webrtc
     */
    AggregatedStats.prototype.handleStream = function (stat) {
        this.streamStats = stat;
    };
    /**
     * Process the Ice Candidate Pair Data
     */
    AggregatedStats.prototype.handleCandidatePair = function (stat) {
        this.candidatePair.bytesReceived = stat.bytesReceived;
        this.candidatePair.bytesSent = stat.bytesSent;
        this.candidatePair.localCandidateId = stat.localCandidateId;
        this.candidatePair.remoteCandidateId = stat.remoteCandidateId;
        this.candidatePair.nominated = stat.nominated;
        this.candidatePair.readable = stat.readable;
        this.candidatePair.selected = stat.selected;
        this.candidatePair.writable = stat.writable;
        this.candidatePair.state = stat.state;
        this.candidatePair.currentRoundTripTime = stat.currentRoundTripTime;
    };
    /**
     * Process the Data Channel Data
     */
    AggregatedStats.prototype.handleDataChannel = function (stat) {
        this.dataChannelStats.bytesReceived = stat.dataytesReceived;
        this.dataChannelStats.bytesSent = stat.bytesSent;
        this.dataChannelStats.dataChannelIdentifier = stat.dataChannelIdentifier;
        this.dataChannelStats.id = stat.id;
        this.dataChannelStats.label = stat.label;
        this.dataChannelStats.messagesReceived = stat.messagesReceived;
        this.dataChannelStats.messagesSent = stat.messagesSent;
        this.dataChannelStats.protocol = stat.protocol;
        this.dataChannelStats.state = stat.state;
        this.dataChannelStats.timestamp = stat.timestamp;
    };
    /**
     * Process the Local Ice Candidate Data
     */
    AggregatedStats.prototype.handleLocalCandidate = function (stat) {
        var localCandidate = new _CandidateStat__WEBPACK_IMPORTED_MODULE_3__.CandidateStat();
        localCandidate.label = "local-candidate";
        localCandidate.address = stat.address;
        localCandidate.port = stat.port;
        localCandidate.protocol = stat.protocol;
        localCandidate.candidateType = stat.candidateType;
        localCandidate.id = stat.id;
        this.localCandidates.push(localCandidate);
    };
    /**
     * Process the Remote Ice Candidate Data
     */
    AggregatedStats.prototype.handleRemoteCandidate = function (stat) {
        var RemoteCandidate = new _CandidateStat__WEBPACK_IMPORTED_MODULE_3__.CandidateStat();
        RemoteCandidate.label = "local-candidate";
        RemoteCandidate.address = stat.address;
        RemoteCandidate.port = stat.port;
        RemoteCandidate.protocol = stat.protocol;
        RemoteCandidate.id = stat.id;
        RemoteCandidate.candidateType = stat.candidateType;
        this.remoteCandidates.push(RemoteCandidate);
    };
    /**
     * Process the Inbound RTP Audio and Video Data
     */
    AggregatedStats.prototype.handleInBoundRTP = function (stat) {
        switch (stat.kind) {
            case "video":
                this.inboundVideoStats.timestamp = stat.timestamp;
                this.inboundVideoStats.bytesReceived = stat.bytesReceived;
                this.inboundVideoStats.framesDecoded = stat.framesDecoded;
                this.inboundVideoStats.packetsLost = stat.packetsLost;
                this.inboundVideoStats.jitter = stat.jitter;
                this.inboundVideoStats.bytesReceivedStart = (this.inboundVideoStats.bytesReceivedStart == null) ? stat.bytesReceived : this.inboundVideoStats.bytesReceivedStart;
                this.inboundVideoStats.framesDecodedStart = (this.inboundVideoStats.framesDecodedStart == null) ? stat.framesDecoded : this.inboundVideoStats.framesDecodedStart;
                this.inboundVideoStats.timestampStart = (this.inboundVideoStats.timestampStart == null) ? stat.timestamp : this.inboundVideoStats.timestampStart;
                this.inboundVideoStats.framesDecodedStart = (this.inboundVideoStats.framesDecodedStart == null) ? stat.framesDecoded : this.inboundVideoStats.framesDecodedStart;
                if (this.lastVideoStats != undefined) {
                    this.inboundVideoStats.bitrate = 8 * (stat.bytesReceived - this.lastVideoStats.bytesReceived) / (stat.timestamp - this.lastVideoStats.timestamp);
                    this.inboundVideoStats.bitrate = Math.floor(this.inboundVideoStats.bitrate);
                    this.inboundVideoStats.lowBitrate = (this.inboundVideoStats.lowBitrate == undefined || Number.isNaN(this.inboundVideoStats.lowBitrate)) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.lowBitrate;
                    this.inboundVideoStats.lowBitrate = (this.inboundVideoStats.bitrate < this.inboundVideoStats.lowBitrate || Number.isNaN(this.inboundVideoStats.lowBitrate)) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.lowBitrate;
                    this.inboundVideoStats.highBitrate = (this.inboundVideoStats.highBitrate == undefined || Number.isNaN(this.inboundVideoStats.highBitrate)) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.highBitrate;
                    this.inboundVideoStats.highBitrate = (this.inboundVideoStats.bitrate > this.inboundVideoStats.highBitrate) ? this.inboundVideoStats.bitrate : this.inboundVideoStats.highBitrate;
                    this.inboundVideoStats.avgBitrate = 8 * (this.inboundVideoStats.bytesReceived - this.lastVideoStats.bytesReceived) / (this.inboundVideoStats.timestamp - this.lastVideoStats.timestamp);
                    this.inboundVideoStats.avgBitrate = Math.floor(this.inboundVideoStats.avgBitrate);
                    this.inboundVideoStats.framerate = (this.inboundVideoStats.framesDecoded - this.lastVideoStats.framesDecoded) / ((this.inboundVideoStats.timestamp - this.lastVideoStats.timestamp) / 1000);
                    this.inboundVideoStats.framerate = Math.floor(this.inboundVideoStats.framerate);
                    this.inboundVideoStats.lowFramerate = (this.inboundVideoStats.lowFramerate == undefined || Number.isNaN(this.inboundVideoStats.lowFramerate)) ? this.inboundVideoStats.framerate : this.inboundVideoStats.lowFramerate;
                    this.inboundVideoStats.lowFramerate = (this.inboundVideoStats.framerate < this.inboundVideoStats.lowFramerate) ? this.inboundVideoStats.framerate : this.inboundVideoStats.lowFramerate;
                    this.inboundVideoStats.highFramerate = (this.inboundVideoStats.highFramerate == undefined || Number.isNaN(this.inboundVideoStats.highFramerate)) ? this.inboundVideoStats.framerate : this.inboundVideoStats.highFramerate;
                    this.inboundVideoStats.highFramerate = (this.inboundVideoStats.framerate < this.inboundVideoStats.highFramerate) ? this.inboundVideoStats.framerate : this.inboundVideoStats.highFramerate;
                    this.inboundVideoStats.averageFrameRate = (this.inboundVideoStats.framesDecoded - this.lastVideoStats.framesDecodedStart) / ((this.inboundVideoStats.timestamp - this.lastVideoStats.timestampStart) / 1000);
                    this.inboundVideoStats.averageFrameRate = Math.floor(this.inboundVideoStats.averageFrameRate);
                }
                this.lastVideoStats = __assign({}, this.inboundVideoStats);
                break;
            case "audio":
                this.inboundAudioStats.bytesReceived = stat.bytesReceived;
                this.inboundAudioStats.jitter = stat.jitter;
                this.inboundAudioStats.packetsLost = stat.packetslost;
                this.inboundAudioStats.timestamp = stat.timestamp;
                break;
            default:
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_7__.Logger.GetStackTrace(), "Kind is not handled");
                break;
        }
    };
    /**
     * Process the outbound RTP Audio and Video Data
     */
    AggregatedStats.prototype.handleRemoteOutBound = function (stat) {
        switch (stat.kind) {
            case "video":
                this.outBoundVideoStats.bytesSent = stat.bytesSent;
                this.outBoundVideoStats.id = stat.id;
                this.outBoundVideoStats.localId = stat.localId;
                this.outBoundVideoStats.packetsSent = stat.packetsSent;
                this.outBoundVideoStats.remoteTimestamp = stat.remoteTimestamp;
                this.outBoundVideoStats.timestamp = stat.timestamp;
                break;
            case "audio":
                break;
            default:
                break;
        }
    };
    /**
     * Process the Inbound Video Track Data
     */
    AggregatedStats.prototype.handleTrack = function (stat) {
        // we only want to extract stats from the video track
        if (stat.type === 'track' && (stat.trackIdentifier === 'video_label' || stat.kind === 'video')) {
            this.inboundVideoStats.framesDropped = stat.framesDropped;
            this.inboundVideoStats.framesReceived = stat.framesReceived;
            this.inboundVideoStats.framesDroppedPercentage = stat.framesDropped / stat.framesReceived * 100;
            this.inboundVideoStats.frameHeight = stat.frameHeight;
            this.inboundVideoStats.frameWidth = stat.frameWidth;
            this.inboundVideoStats.frameHeightStart = (this.inboundVideoStats.frameHeightStart == null) ? stat.frameHeight : this.inboundVideoStats.frameHeightStart;
            this.inboundVideoStats.frameWidthStart = (this.inboundVideoStats.frameWidthStart == null) ? stat.frameWidth : this.inboundVideoStats.frameWidthStart;
        }
    };
    /**
     * Check if a value coming in from our stats is actually a number
     */
    AggregatedStats.prototype.isNumber = function (value) {
        return typeof value === 'number' && isFinite(value);
    };
    return AggregatedStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/CandidatePairStats.ts":
/*!************************************************************!*\
  !*** ./src/PeerConnectionController/CandidatePairStats.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CandidatePairStats: function() { return /* binding */ CandidatePairStats; }
/* harmony export */ });
/**
 * ICE Candidate Pair Stats collected from the RTC Stats Report
 */
var CandidatePairStats = /** @class */ (function () {
    function CandidatePairStats() {
    }
    return CandidatePairStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/CandidateStat.ts":
/*!*******************************************************!*\
  !*** ./src/PeerConnectionController/CandidateStat.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CandidateStat: function() { return /* binding */ CandidateStat; }
/* harmony export */ });
/**
 * ICE Candidate Stat collected from the RTC Stats Report
 */
var CandidateStat = /** @class */ (function () {
    function CandidateStat() {
    }
    return CandidateStat;
}());



/***/ }),

/***/ "./src/PeerConnectionController/DataChannelStats.ts":
/*!**********************************************************!*\
  !*** ./src/PeerConnectionController/DataChannelStats.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dataChannelStats: function() { return /* binding */ dataChannelStats; }
/* harmony export */ });
/**
 * Data Channel Stats collected from the RTC Stats Report
 */
var dataChannelStats = /** @class */ (function () {
    function dataChannelStats() {
    }
    return dataChannelStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/InboundAudioStats.ts":
/*!***********************************************************!*\
  !*** ./src/PeerConnectionController/InboundAudioStats.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   inboundAudioStats: function() { return /* binding */ inboundAudioStats; }
/* harmony export */ });
/**
 * Inbound Audio Stats collected from the RTC Stats Report
 */
var inboundAudioStats = /** @class */ (function () {
    function inboundAudioStats() {
    }
    return inboundAudioStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/InboundVideoStats.ts":
/*!***********************************************************!*\
  !*** ./src/PeerConnectionController/InboundVideoStats.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   inboundVideoStats: function() { return /* binding */ inboundVideoStats; }
/* harmony export */ });
/**
 * Inbound Video Stats collected from the RTC Stats Report
 */
var inboundVideoStats = /** @class */ (function () {
    function inboundVideoStats() {
        this.receiveToCompositeMs = 0;
        this.timestamp = 0;
        this.bytesReceived = 0;
        this.framesDecoded = 0;
        this.packetsLost = 0;
        this.bytesReceivedStart = 0;
        this.framesDecodedStart = 0;
        this.timestampStart = 0;
        this.bitrate = 0;
        this.lowBitrate = 0;
        this.highBitrate = 0;
        this.avgBitrate = 0;
        this.framerate = 0;
        this.lowFramerate = 0;
        this.highFramerate = 0;
        this.averageFrameRate = 0;
        this.framesDropped = 0;
        this.framesReceived = 0;
        this.framesDroppedPercentage = 0;
        this.frameHeight = 0;
        this.frameWidth = 0;
        this.frameHeightStart = 0;
        this.frameWidthStart = 0;
        this.jitter = 0;
    }
    return inboundVideoStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/OutBoundVideoStats.ts":
/*!************************************************************!*\
  !*** ./src/PeerConnectionController/OutBoundVideoStats.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OutBoundVideoStats: function() { return /* binding */ OutBoundVideoStats; }
/* harmony export */ });
/**
 * Outbound Video Stats collected from the RTC Stats Report
 */
var OutBoundVideoStats = /** @class */ (function () {
    function OutBoundVideoStats() {
    }
    return OutBoundVideoStats;
}());



/***/ }),

/***/ "./src/PeerConnectionController/PeerConnectionController.ts":
/*!******************************************************************!*\
  !*** ./src/PeerConnectionController/PeerConnectionController.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PeerConnectionController: function() { return /* binding */ PeerConnectionController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _AggregatedStats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AggregatedStats */ "./src/PeerConnectionController/AggregatedStats.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


/**
 * Handles the Peer Connection
 */
var PeerConnectionController = /** @class */ (function () {
    /**
     * Create a new RTC Peer Connection client
     * @param options - Peer connection Options
     */
    function PeerConnectionController(options, turnState) {
        var _this = this;
        // Set the turn state to true or false for rtc options
        this.forceTurn = turnState;
        if (this.forceTurn === true) {
            options.iceTransportPolicy = "relay";
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Forcing TURN usage by setting ICE Transport Policy in peer connection config.", 6);
        }
        // build a new peer connection with the options
        this.peerConnection = new RTCPeerConnection(options);
        this.peerConnection.onsignalingstatechange = function (ev) { return _this.handleSignalStateChange(ev); };
        this.peerConnection.oniceconnectionstatechange = function (ev) { return _this.handleIceConnectionStateChange(ev); };
        this.peerConnection.onicegatheringstatechange = function (ev) { return _this.handleIceGatheringStateChange(ev); };
        this.peerConnection.ontrack = function (ev) { return _this.handleOnTrack(ev); };
        this.peerConnection.onicecandidate = function (ev) { return _this.handelIceCandidate(ev); };
        this.aggregatedStats = new _AggregatedStats__WEBPACK_IMPORTED_MODULE_1__.AggregatedStats();
    }
    /**
     * Create an offer for the Web RTC handshake and send the offer to the signaling server via websocket
     * @param offerOptions - RTC Offer Options
     */
    PeerConnectionController.prototype.createOffer = function (offerOptions, useMic) {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Create Offer", 6);
        this.setupTracksToSendAsync(useMic).finally(function () { });
        this.peerConnection.createOffer(offerOptions).then(function (offer) {
            _this.showTextOverlayConnecting();
            offer.sdp = _this.mungeOffer(offer.sdp, useMic);
            _this.peerConnection.setLocalDescription(offer);
            _this.onSendWebRTCOffer(offer);
        }).catch(function (onRejectedReason) {
            _this.showTextOverlaySetupFailure();
        });
    };
    /**
     * Generate Aggregated Stats and then fire a onVideo Stats event
     */
    PeerConnectionController.prototype.generateStats = function () {
        /*this.peerConnection.getStats(null).then((StatsData: RTCStatsReport) => {
            this.aggregatedStats.processStats(StatsData);
            this.onVideoStats(this.aggregatedStats);
        });*/
    };
    /**
     * Close The Peer Connection
     */
    PeerConnectionController.prototype.close = function () {
        if (this.peerConnection) {
            this.peerConnection.close();
            this.peerConnection = null;
        }
    };
    /**
     * Modify the Session Descriptor
     * @param sdp - Session Descriptor as a string
     * @param useMic - Is the microphone in use
     * @returns A modified Session Descriptor
     */
    PeerConnectionController.prototype.mungeOffer = function (sdp, useMic) {
        var temp = sdp;
        temp.replace(/(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm, "$1;x-google-start-bitrate=10000;x-google-max-bitrate=100000\r\n");
        temp.replace('useinbandfec=1', 'useinbandfec=1;stereo=1;sprop-maxcapturerate=48000');
        // Increase the capture rate of audio so we can have higher quality audio over mic
        if (useMic) {
            temp = temp.replace('useinbandfec=1', 'useinbandfec=1;sprop-maxcapturerate=48000;maxaveragebitrate=510000');
        }
        return temp;
    };
    /**
     * Set the Remote Descriptor from the signaling server to the RTC Peer Connection
     * @param sdpAnswer - RTC Session Descriptor from the Signaling Server
     */
    PeerConnectionController.prototype.handleAnswer = function (sdpAnswer) {
        this.peerConnection.setRemoteDescription(sdpAnswer);
    };
    /**
     * When a Ice Candidate is received add to the RTC Peer Connection
     * @param iceCandidate - RTC Ice Candidate from the Signaling Server
     */
    PeerConnectionController.prototype.handleOnIce = function (iceCandidate) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "peerconnection handleOnIce", 6);
        // // if forcing TURN, reject any candidates not relay
        if (this.forceTurn) {
            // check if no relay address is found, if so, we are assuming it means no TURN server
            if (iceCandidate.candidate.indexOf("relay") < 0) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Dropping candidate because it was not TURN relay. | Type= " + iceCandidate.type + " | Protocol= " + iceCandidate.protocol + " | Address=" + iceCandidate.address + " | Port=" + iceCandidate.port + " |", 6);
                return;
            }
        }
        this.peerConnection.addIceCandidate(iceCandidate);
    };
    /**
     * When the RTC Peer Connection Signaling server state Changes
     * @param state - Signaling Server State Change Event
     */
    PeerConnectionController.prototype.handleSignalStateChange = function (state) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'signaling state change: ' + state, 6);
    };
    /**
     * Handle when the Ice Connection State Changes
     * @param state - Ice Connection State
     */
    PeerConnectionController.prototype.handleIceConnectionStateChange = function (state) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'ice connection state change: ' + state, 6);
    };
    /**
     * Handle when the Ice Gathering State Changes
     * @param state - Ice Gathering State Change
     */
    PeerConnectionController.prototype.handleIceGatheringStateChange = function (state) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'ice gathering state change: ' + JSON.stringify(state), 6);
    };
    /**
     * Activates the onTrack method
     * @param event - The webRtc track event
     */
    PeerConnectionController.prototype.handleOnTrack = function (event) {
        this.onTrack(event);
    };
    /**
     * Activates the onPeerIceCandidate
     * @param event - The peer ice candidate
     */
    PeerConnectionController.prototype.handelIceCandidate = function (event) {
        this.onPeerIceCandidate(event);
    };
    /**
     * An override method for onTrack for use outside of the PeerConnectionController
     * @param trackEvent - The webRtc track event
     */
    PeerConnectionController.prototype.onTrack = function (trackEvent) { };
    /**
     * An override method for onPeerIceCandidate for use outside of the PeerConnectionController
     * @param peerConnectionIceEvent - The peer ice candidate
     */
    PeerConnectionController.prototype.onPeerIceCandidate = function (peerConnectionIceEvent) { };
    /**
     * Setup tracks on the RTC Peer Connection
     */
    PeerConnectionController.prototype.setupTracksToSendAsync = function (useMic) {
        return __awaiter(this, void 0, void 0, function () {
            var hasTransceivers, audioOptions, mediaSendOptions, stream, _i, _a, transceiver, _b, _c, track, _d, _e, track;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        hasTransceivers = this.peerConnection.getTransceivers().length > 0;
                        // Setup a transceiver for getting UE video
                        this.peerConnection.addTransceiver("video", { direction: "recvonly" });
                        if (!!useMic) return [3 /*break*/, 1];
                        this.peerConnection.addTransceiver("audio", { direction: "recvonly" });
                        return [3 /*break*/, 3];
                    case 1:
                        audioOptions = useMic ?
                            {
                                autoGainControl: false,
                                channelCount: 1,
                                echoCancellation: false,
                                latency: 0,
                                noiseSuppression: false,
                                sampleRate: 48000,
                                sampleSize: 16,
                                volume: 1.0
                            } : false;
                        mediaSendOptions = {
                            video: false,
                            audio: audioOptions,
                        };
                        return [4 /*yield*/, navigator.mediaDevices.getUserMedia(mediaSendOptions)];
                    case 2:
                        stream = _f.sent();
                        if (stream) {
                            if (hasTransceivers) {
                                for (_i = 0, _a = this.peerConnection.getTransceivers(); _i < _a.length; _i++) {
                                    transceiver = _a[_i];
                                    if (transceiver && transceiver.receiver && transceiver.receiver.track && transceiver.receiver.track.kind === "audio") {
                                        for (_b = 0, _c = stream.getTracks(); _b < _c.length; _b++) {
                                            track = _c[_b];
                                            if (track.kind && track.kind == "audio") {
                                                transceiver.sender.replaceTrack(track);
                                                transceiver.direction = "sendrecv";
                                            }
                                        }
                                    }
                                }
                            }
                            else {
                                for (_d = 0, _e = stream.getTracks(); _d < _e.length; _d++) {
                                    track = _e[_d];
                                    if (track.kind && track.kind == "audio") {
                                        this.peerConnection.addTransceiver(track, { direction: "sendrecv" });
                                    }
                                }
                            }
                        }
                        else {
                            this.peerConnection.addTransceiver("audio", { direction: "recvonly" });
                        }
                        _f.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * And override event for when the video stats are fired
     * @param event - Aggregated Stats
     */
    PeerConnectionController.prototype.onVideoStats = function (event) { };
    /**
     * Event to send the RTC offer to the Signaling server
     * @param offer - RTC Offer
     */
    PeerConnectionController.prototype.onSendWebRTCOffer = function (offer) { };
    /**
     * An override for showing the Peer connection connecting Overlay
     */
    PeerConnectionController.prototype.showTextOverlayConnecting = function () { };
    /**
     * An override for showing the Peer connection Failed overlay
     */
    PeerConnectionController.prototype.showTextOverlaySetupFailure = function () { };
    return PeerConnectionController;
}());



/***/ }),

/***/ "./src/PeerConnectionController/StreamStats.ts":
/*!*****************************************************!*\
  !*** ./src/PeerConnectionController/StreamStats.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StreamStats: function() { return /* binding */ StreamStats; }
/* harmony export */ });
/**
 * Class to hold the stream stats data coming in from webRtc
 */
var StreamStats = /** @class */ (function () {
    function StreamStats() {
    }
    return StreamStats;
}());



/***/ }),

/***/ "./src/UeInstanceMessage/UeControlMessage.ts":
/*!***************************************************!*\
  !*** ./src/UeInstanceMessage/UeControlMessage.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeControlMessage: function() { return /* binding */ UeControlMessage; }
/* harmony export */ });
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
/* harmony import */ var _UeDescriptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeDescriptor */ "./src/UeInstanceMessage/UeDescriptor.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles Sending control messages to the UE Instance
 */
var UeControlMessage = /** @class */ (function (_super) {
    __extends(UeControlMessage, _super);
    /**
     *
     * @param dataChannelController - Data Channel Controller
     */
    function UeControlMessage(dataChannelController) {
        return _super.call(this, dataChannelController) || this;
    }
    /**
     * Send IFrame Request to the UE Instance
     */
    UeControlMessage.prototype.SendIFrameRequest = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.iFrameRequest]);
        this.sendData(payload.buffer);
    };
    /**
     * Send Request to Take Quality Control to the UE Instance
     */
    UeControlMessage.prototype.SendRequestQualityControl = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.requestQualityControl]);
        this.sendData(payload.buffer);
    };
    /**
     * Send Max FPS Request to the UE Instance
     */
    UeControlMessage.prototype.SendMaxFpsRequest = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.maxFpsRequest]);
        this.sendData(payload.buffer);
    };
    /**
     * Send Average Bitrate Request to the UE Instance
     */
    UeControlMessage.prototype.SendAverageBitrateRequest = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.averageBitrateRequest]);
        this.sendData(payload.buffer);
    };
    /**
     * Send a Start Streaming Message to the UE Instance
     */
    UeControlMessage.prototype.SendStartStreaming = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.startStreaming]);
        this.sendData(payload.buffer);
    };
    /**
     * Send a Stop Streaming Message to the UE Instance
     */
    UeControlMessage.prototype.SendStopStreaming = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.stopStreaming]);
        this.sendData(payload.buffer);
    };
    /**
     * Send a Latency Test to the UE Instance
     * @param StartTimeMs - Start Time of the Latency test
     */
    UeControlMessage.prototype.sendLatencyTest = function (StartTimeMs) {
        var payload = {
            StartTime: StartTimeMs,
        };
        this.sendDescriptor(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.latencyTest, JSON.stringify(payload));
    };
    /**
     * Send a Request Initial Settings to the UE Instance
     */
    UeControlMessage.prototype.SendRequestInitialSettings = function () {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_0__.UeMessageType.requestInitialSettings]);
        this.sendData(payload.buffer);
    };
    return UeControlMessage;
}(_UeDescriptor__WEBPACK_IMPORTED_MODULE_1__.UeDescriptor));



/***/ }),

/***/ "./src/UeInstanceMessage/UeDataMessage.ts":
/*!************************************************!*\
  !*** ./src/UeInstanceMessage/UeDataMessage.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeDataMessage: function() { return /* binding */ UeDataMessage; }
/* harmony export */ });
/**
 * Handles sending a message to the UE Instance
 */
var UeDataMessage = /** @class */ (function () {
    /**
     *
     * @param dataChannelController - Data Channel Controller
     */
    function UeDataMessage(dataChannelController) {
        this.dataChannelController = dataChannelController;
    }
    /**
     * Send an Array Buffer to the UE Instance
     * @param buffer - Message Buffer Array
     */
    UeDataMessage.prototype.sendData = function (buffer) {
        this.dataChannelController.sendData(buffer);
    };
    return UeDataMessage;
}());



/***/ }),

/***/ "./src/UeInstanceMessage/UeDescriptor.ts":
/*!***********************************************!*\
  !*** ./src/UeInstanceMessage/UeDescriptor.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeDescriptor: function() { return /* binding */ UeDescriptor; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles sending a Descriptor to the UE Instance
 */
var UeDescriptor = /** @class */ (function (_super) {
    __extends(UeDescriptor, _super);
    /**
    * @param datachannelController - Data Channel Controller
    */
    function UeDescriptor(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Send a Descriptor to the UE Instances
     * @param messageType - UE Message Type
     * @param JSODescriptor - Descriptor Message as JSON
     */
    UeDescriptor.prototype.sendDescriptor = function (messageType, JSODescriptor) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending: " + JSODescriptor, 6);
        // Add the UTF-16 JSON string to the array byte buffer, going two bytes at
        // a time.
        var data = new DataView(new ArrayBuffer(1 + 2 + 2 * JSODescriptor.length));
        var byteIdx = 0;
        data.setUint8(byteIdx, messageType);
        byteIdx++;
        data.setUint16(byteIdx, JSODescriptor.length, true);
        byteIdx += 2;
        for (var i = 0; i < JSODescriptor.length; i++) {
            data.setUint16(byteIdx, JSODescriptor.charCodeAt(i), true);
            byteIdx += 2;
        }
        this.sendData(data.buffer);
    };
    return UeDescriptor;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_1__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeDescriptorUi.ts":
/*!*************************************************!*\
  !*** ./src/UeInstanceMessage/UeDescriptorUi.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeDescriptorUi: function() { return /* binding */ UeDescriptorUi; }
/* harmony export */ });
/* harmony import */ var _UeDescriptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDescriptor */ "./src/UeInstanceMessage/UeDescriptor.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles the Sending of a UI Descriptor to the UE Instance
 */
var UeDescriptorUi = /** @class */ (function (_super) {
    __extends(UeDescriptorUi, _super);
    /**
     * @param dataChannelController - Data Channel Controller
     */
    function UeDescriptorUi(dataChannelController, config) {
        var _this = _super.call(this, dataChannelController) || this;
        _this.dataChannelController = dataChannelController;
        _this.config = config;
        return _this;
    }
    /**
     * Send a set res UI Descriptor to UE Instance
     * @param width - Width of res
     * @param height - Height of res
     */
    UeDescriptorUi.prototype.sendUpdateVideoStreamSize = function (width, height) {
        if (this.config.isMobile) {
            width *= 2;
            height *= 2;
        }
        var s = JSON.stringify({
            "Resolution.Width": width,
            "Resolution.Height": height
        });
        var n = {
            id: 51
        };
        var r = new DataView(new ArrayBuffer(3 + 2 * s.length));
        var o = 0;
        r.setUint8(o, n.id), o++, r.setUint16(o, s.length, !0), o += 2;
        for (var e = 0; e < s.length; e++) {
            r.setUint16(o, s.charCodeAt(e), !0);
            o += 2;
        }
        this.dataChannelController.sendData(r.buffer);
    };
    /**
     * Send a stat fps UI Descriptor to UE Instance
     */
    UeDescriptorUi.prototype.sendShowFps = function () {
        this.sendUiConsoleInteraction("stat fps");
    };
    /**
     * Send a Encoder Rate Control to UE Instance
     * @param rateControl - Rate Control "CBR" | "VBR" | "ConstQP"
     */
    UeDescriptorUi.prototype.sendEncoderRateControl = function (rateControl) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.RateControl " + rateControl);
    };
    /**
     * Send Encoder Target Bit Rate to the UE Instance
     * @param targetBitRate - Send a Target Bit Rate
     */
    UeDescriptorUi.prototype.sendEncoderTargetBitRate = function (targetBitRate) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.TargetBitrate " + (targetBitRate > 0 ? targetBitRate : -1));
    };
    /**
     * Send Encoder Max Bit Rate VBR to UE Instance
     * @param maxBitRate - Send A Max Bit Rate
     */
    UeDescriptorUi.prototype.sendEncoderMaxBitrateVbr = function (maxBitRate) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.MaxBitrateVBR " + (maxBitRate > 0 ? maxBitRate : 1));
    };
    /**
     * Send the Minimum Quantization Parameter to the UE Instance
     * @param minQP - Minimum Quantization Parameter
     */
    UeDescriptorUi.prototype.sendEncoderMinQP = function (minQP) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.MinQP " + minQP);
    };
    /**
     * Send the Maximum Quantization Parameter to the UE Instance
     * @param maxQP - Maximum Quantization Parameter
     */
    UeDescriptorUi.prototype.sendEncoderMaxQP = function (maxQP) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.MaxQP " + maxQP);
    };
    /**
     * Send Enable Filler Data to the UE Instance
     * @param enable - True
     */
    UeDescriptorUi.prototype.sendEncoderEnableFillerData = function (enable) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.EnableFillerData " + Number(enable).valueOf());
    };
    /**
     * Send Encoder MultiPass to UE Instance
     * @param multiPass - MultiPass "DISABLED" | "QUARTER" | "FULL"
     */
    UeDescriptorUi.prototype.sendEncoderMultiPass = function (multiPass) {
        this.sendUiConsoleInteraction("PixelStreaming.Encoder.Multipass " + multiPass);
    };
    /**
     * Send a Web RTC Degradation Preference to UE Instance
     * @param DegradationPreference - Degradation Preference "BALANCED" | "MAINTAIN_FRAMERATE" | "MAINTAIN_RESOLUTION"
     */
    UeDescriptorUi.prototype.sendWebRtcDegradationPreference = function (DegradationPreference) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.DegradationPreference " + DegradationPreference);
    };
    /**
     * Sends the Max FPS to the UE Instance
     * @param MaxFps - Web RTC Max Frames Per Second
     */
    UeDescriptorUi.prototype.sendWebRtcMaxFps = function (MaxFps) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.MaxFps " + MaxFps);
    };
    /**
    * Sends the FPS to the UE Instance used un UE 5.0
    * @param Fps - Web RTC Frames Per Second
    */
    UeDescriptorUi.prototype.sendWebRtcFps = function (Fps) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.Fps " + Fps);
    };
    /**
     * Sends the Minimum bit rate to the UE Instance
     * @param MinBitrate - Web RTC Minimum Bitrate
     */
    UeDescriptorUi.prototype.sendWebRtcMinBitrate = function (MinBitrate) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.MinBitrate " + MinBitrate);
    };
    /**
     * Sends the Maximum bit rate to the UE Instance
     * @param MaxBitrate - Web RTC Maximum Bitrate
     */
    UeDescriptorUi.prototype.sendWebRtcMaxBitrate = function (MaxBitrate) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.MaxBitrate " + MaxBitrate);
    };
    /**
     * Sends the Low Quantization Parameter Threshold level to the UE Instance
     * @param LowQpThreshold - Low Quantization Parameter Threshold Level
     */
    UeDescriptorUi.prototype.sendWebRtcLowQpThreshold = function (LowQpThreshold) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.LowQpThreshold " + LowQpThreshold);
    };
    /**
     * Sends the High Quantization Parameter Threshold level to the UE Instance
     * @param HighQpThreshold - High Quantization Parameter Threshold Level
     */
    UeDescriptorUi.prototype.sendWebRtcHighQpThreshold = function (HighQpThreshold) {
        this.sendUiConsoleInteraction("PixelStreaming.WebRTC.HighQpThreshold " + HighQpThreshold);
    };
    /**
     * Sends a descriptor string to the UE Interaction Instance
     * @param descriptor - the String descriptor to send
     */
    UeDescriptorUi.prototype.sendUiInteraction = function (descriptor) {
        this.sendDescriptor(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.uiInteraction, descriptor);
    };
    /**
     * Sends a console descriptor
     * @param descriptor - The string descriptor to send
     */
    UeDescriptorUi.prototype.sendUiConsoleInteraction = function (descriptor) {
        var payload = {
            Console: descriptor
        };
        this.sendUiInteraction(JSON.stringify(payload));
    };
    UeDescriptorUi.prototype.sendCommand = function (payload) {
        this.sendUiInteraction(JSON.stringify(payload));
    };
    return UeDescriptorUi;
}(_UeDescriptor__WEBPACK_IMPORTED_MODULE_0__.UeDescriptor));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputGamePadMessage.ts":
/*!********************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputGamePadMessage.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeInputGamePadMessage: function() { return /* binding */ UeInputGamePadMessage; }
/* harmony export */ });
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * The class for handling UE Input GamePad Messages. It implements the UeDataMessage class
 */
var UeInputGamePadMessage = /** @class */ (function (_super) {
    __extends(UeInputGamePadMessage, _super);
    /**
     *
     * @param datachannelController - Data Channel Controller
     */
    function UeInputGamePadMessage(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Send the controller button press data through the data channel
     * @param controllerIndex - the controller index number
     * @param buttonIndex - the button index number
     * @param isRepeat - is this a repeat press
     */
    UeInputGamePadMessage.prototype.sendControllerButtonPressed = function (controllerIndex, buttonIndex, isRepeat) {
        var Data = new DataView(new ArrayBuffer(4));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.gamepadButtonPressed);
        Data.setUint8(1, controllerIndex);
        Data.setUint8(2, buttonIndex);
        Data.setUint8(3, Number(isRepeat).valueOf());
        this.sendData(Data.buffer);
    };
    /**
     * Send the controller button release data through the data channel
     * @param controllerIndex - the controller index number
     * @param buttonIndex  - the button index number
     */
    UeInputGamePadMessage.prototype.sendControllerButtonReleased = function (controllerIndex, buttonIndex) {
        var Data = new DataView(new ArrayBuffer(3));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.gamepadButtonReleased);
        Data.setUint8(1, controllerIndex);
        Data.setUint8(2, buttonIndex);
        this.sendData(Data.buffer);
    };
    /**
     * Send controller axis data through the data channel
     * @param controllerIndex - the controller index number
     * @param axisIndex - the axis index number
     * @param analogValue - the analogue value number
     */
    UeInputGamePadMessage.prototype.sendControllerAxisMove = function (controllerIndex, axisIndex, analogValue) {
        var Data = new DataView(new ArrayBuffer(11));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.gamepadAnalog);
        Data.setUint8(1, controllerIndex);
        Data.setUint8(2, axisIndex);
        Data.setFloat64(3, analogValue, true);
        this.sendData(Data.buffer);
    };
    return UeInputGamePadMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_0__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputKeyboardMessage.ts":
/*!*********************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputKeyboardMessage.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeInputKeyboardMessage: function() { return /* binding */ UeInputKeyboardMessage; }
/* harmony export */ });
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles sending Keyboard Messages to the UE Instance
 */
var UeInputKeyboardMessage = /** @class */ (function (_super) {
    __extends(UeInputKeyboardMessage, _super);
    /**
     *
     * @param datachannelController - Data Channel Controller
     */
    function UeInputKeyboardMessage(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Sends the key down to the UE Instance
     * @param keyCode - Key code
     * @param isRepeat - Is the key repeating
     */
    UeInputKeyboardMessage.prototype.sendKeyDown = function (keyCode, isRepeat) {
        var Payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.keyDown, keyCode, Number(isRepeat).valueOf()]);
        this.sendData(Payload.buffer);
    };
    /**
     * Sends the Key Up to the UE Instance
     * @param keyCode - Key code
     */
    UeInputKeyboardMessage.prototype.sendKeyUp = function (keyCode) {
        var payload = new Uint8Array([_UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.keyUp, keyCode]);
        this.sendData(payload.buffer);
    };
    /**
     * Sends the key press to the UE Instance
     * @param CharCode - character code of a key pressed
     */
    UeInputKeyboardMessage.prototype.sendKeyPress = function (CharCode) {
        var data = new DataView(new ArrayBuffer(3));
        data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.keyPress);
        data.setUint16(1, CharCode, true);
        this.sendData(data.buffer);
    };
    return UeInputKeyboardMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_0__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputMouseMessage.ts":
/*!******************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputMouseMessage.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeInputMouseMessage: function() { return /* binding */ UeInputMouseMessage; }
/* harmony export */ });
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Handles sending Mouse Messages to the UE Instance
 */
var UeInputMouseMessage = /** @class */ (function (_super) {
    __extends(UeInputMouseMessage, _super);
    /**
    * @param datachannelController - Data channel Controller
    */
    function UeInputMouseMessage(datachannelController) {
        return _super.call(this, datachannelController) || this;
    }
    /**
     * Send Mouse Enter to the UE Instance
     */
    UeInputMouseMessage.prototype.sendMouseEnter = function () {
        var Data = new DataView(new ArrayBuffer(1));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseEnter);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Leave to the UE Instance
     */
    UeInputMouseMessage.prototype.sendMouseLeave = function () {
        var Data = new DataView(new ArrayBuffer(1));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseLeave);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Down to the UE Instance
     * @param button - Mouse Button
     * @param X - X Coordinate Value of mouse
     * @param Y - Y Coordinate Value of mouse
     */
    UeInputMouseMessage.prototype.sendMouseDown = function (button, X, Y) {
        var Data = new DataView(new ArrayBuffer(6));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseDown);
        Data.setUint8(1, button);
        Data.setUint16(2, X, true);
        Data.setUint16(4, Y, true);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Up to the UE Instance
     * @param button - Mouse Button
     * @param X - X Coordinate Value of mouse
     * @param Y - Y Coordinate Value of mouse
     */
    UeInputMouseMessage.prototype.sendMouseUp = function (button, X, Y) {
        var Data = new DataView(new ArrayBuffer(6));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseUp);
        Data.setUint8(1, button);
        Data.setUint16(2, X, true);
        Data.setUint16(4, Y, true);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse Move to the UE Instance
     * @param mouseCordX - X Mouse Coordinate
     * @param mouseCordY - Y Mouse Coordinate
     * @param deltaX - X Mouse Delta Coordinate
     * @param deltaY - Y Mouse Delta Coordinate
     */
    UeInputMouseMessage.prototype.sendMouseMove = function (mouseCordX, mouseCordY, deltaX, deltaY) {
        var Data = new DataView(new ArrayBuffer(9));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseMove);
        Data.setUint16(1, mouseCordX, true);
        Data.setUint16(3, mouseCordY, true);
        Data.setInt16(5, deltaX, true);
        Data.setInt16(7, deltaY, true);
        this.sendData(Data.buffer);
    };
    /**
     * Send Mouse wheel event to the UE Instance
     * @param deltaY - Mouse Wheel delta Y
     * @param X - Mouse X Coordinate
     * @param Y - Mouse Y Coordinate
     */
    UeInputMouseMessage.prototype.sendMouseWheel = function (deltaY, X, Y) {
        var Data = new DataView(new ArrayBuffer(7));
        Data.setUint8(0, _UeMessageTypes__WEBPACK_IMPORTED_MODULE_1__.UeMessageType.mouseWheel);
        Data.setInt16(1, deltaY, true);
        Data.setUint16(3, X, true);
        Data.setUint16(5, Y, true);
        this.sendData(Data.buffer);
    };
    return UeInputMouseMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_0__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeInputTouchMessage.ts":
/*!******************************************************!*\
  !*** ./src/UeInstanceMessage/UeInputTouchMessage.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeInputTouchMessage: function() { return /* binding */ UeInputTouchMessage; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _UeDataMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UeDataMessage */ "./src/UeInstanceMessage/UeDataMessage.ts");
/* harmony import */ var _UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UeMessageTypes */ "./src/UeInstanceMessage/UeMessageTypes.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/**
 * Handles Sending Touch messages to the UE Instance
 */
var UeInputTouchMessage = /** @class */ (function (_super) {
    __extends(UeInputTouchMessage, _super);
    /**
     * @param datachannelController - Data channel Controller
     */
    function UeInputTouchMessage(datachannelController, videoElementProvider) {
        var _this = _super.call(this, datachannelController) || this;
        _this.unsignedOutOfRange = 65535;
        _this.signedOutOfRange = 32767;
        _this.videoElementProvider = videoElementProvider;
        _this.fingersIds = {};
        _this.fingers = [9, 8, 7, 6, 5, 4, 3, 2, 1, 0];
        _this.printInputs = false;
        return _this;
    }
    /**
     * Handles Touch event Start
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouchStart = function (touches) {
        this.sendTouch(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchStart, touches);
    };
    /**
     * Handles Touch event End
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouchEnd = function (touches) {
        this.sendTouch(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchEnd, touches);
    };
    /**
     * Handles Touch event Move
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouchMove = function (touches) {
        this.sendTouch(_UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchMove, touches);
    };
    /**
     * Handles Sending the Touch Event to the UE Instance via the Data channel
     * @param touches - Touch List
     */
    UeInputTouchMessage.prototype.sendTouch = function (touchType, touches) {
        var data = new DataView(new ArrayBuffer(2 + 7 * touches.length));
        data.setUint8(0, touchType);
        data.setUint8(1, touches.length);
        var byte = 2;
        for (var t = 0; t < touches.length; t++) {
            var touch = touches[t];
            //	    let offsetLeft = this.videoElementProvider.getVideoElement().getBoundingClientRect().left;
            //          let offsetTop = this.videoElementProvider.getVideoElement().getBoundingClientRect().top;
            var x = touch.clientX;
            var y = touch.clientY;
            if (touchType === _UeMessageTypes__WEBPACK_IMPORTED_MODULE_2__.UeMessageType.touchMove) {
                x -= this.videoElementProvider.getVideoElement().getBoundingClientRect().left;
                y -= this.videoElementProvider.getVideoElement().getBoundingClientRect().top;
            }
            var coord = this.normaliseAndQuantiseUnsigned(x, y);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "X: " + x + " Y: " + y, 6);
            //      byte =  2
            data.setUint16(byte, coord.x, true);
            byte += 2;
            //      byte =  4
            data.setUint16(byte, coord.y, true);
            byte += 2;
            //      byte =  6
            data.setUint8(byte, this.fingersIds[touch.identifier]);
            byte += 1;
            //      byte =  7
            data.setUint8(byte, 255 * touch.force); // force is between 0.0 and 1.0 so quantize into byte.
            byte += 1;
            //      byte =  8
            data.setUint8(byte, coord.inRange ? 1 : 0); // mark the touch as in the player or not
            byte += 1;
        }
        this.sendData(data.buffer);
    };
    /**
     * TO DO
     * @param x - X Coordinate
     * @param y - Y Coordinate
     * @returns - Normalised and Quantised Unsigned values
     */
    UeInputTouchMessage.prototype.normaliseAndQuantiseUnsigned = function (x, y) {
        var rootDiv = this.videoElementProvider.getVideoParentElement();
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rootDiv && videoElement) {
            var playerAspectRatio = rootDiv.clientHeight / rootDiv.clientWidth;
            var videoAspectRatio = videoElement.videoHeight / videoElement.videoWidth;
            // Unsigned XY positions are the ratio (0.0..1.0) along a viewport axis,
            // quantized into an uint16 (0..65536).
            // Signed XY deltas are the ratio (-1.0..1.0) along a viewport axis,
            // quantized into an int16 (-32767..32767).
            // This allows the browser viewport and client viewport to have a different
            // size.
            // Hack: Currently we set an out-of-range position to an extreme (65535)
            // as we can't yet accurately detect mouse enter and leave events
            // precisely inside a video with an aspect ratio which causes mattes.
            if (playerAspectRatio > videoAspectRatio) {
                var ratio = playerAspectRatio / videoAspectRatio;
                // Unsigned.
                var normalizedX = x / rootDiv.clientWidth;
                var normalizedY = ratio * (y / rootDiv.clientHeight - 0.5) + 0.5;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
            else {
                if (this.printInputs) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio', 6);
                }
                var ratio = videoAspectRatio / playerAspectRatio;
                // Unsigned. 
                var normalizedX = ratio * (x / rootDiv.clientWidth - 0.5) + 0.5;
                var normalizedY = y / rootDiv.clientHeight;
                if (normalizedX < 0.0 || normalizedX > 1.0 || normalizedY < 0.0 || normalizedY > 1.0) {
                    return {
                        inRange: false,
                        x: this.unsignedOutOfRange,
                        y: this.unsignedOutOfRange
                    };
                }
                else {
                    return {
                        inRange: true,
                        x: normalizedX * (this.unsignedOutOfRange + 1),
                        y: normalizedY * (this.unsignedOutOfRange + 1)
                    };
                }
            }
        }
    };
    return UeInputTouchMessage;
}(_UeDataMessage__WEBPACK_IMPORTED_MODULE_1__.UeDataMessage));



/***/ }),

/***/ "./src/UeInstanceMessage/UeMessageTypes.ts":
/*!*************************************************!*\
  !*** ./src/UeInstanceMessage/UeMessageTypes.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UeMessageType: function() { return /* binding */ UeMessageType; }
/* harmony export */ });
/**
 * The Type of message sent to the UE instance over the data channel
 * Must be kept in sync with PixelStreamingProtocol::EToUE4Msg C++ enum.
 * {@link https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Plugins/Media/PixelStreaming/Source/PixelStreaming/Private/ProtocolDefs.h} Requires Login
 */
var UeMessageType = /** @class */ (function () {
    function UeMessageType() {
    }
    /**********************************************************************/
    /*
     * Control Messages. Range = 0..49.
     */
    UeMessageType.iFrameRequest = 0;
    UeMessageType.requestQualityControl = 1;
    UeMessageType.maxFpsRequest = 2;
    UeMessageType.averageBitrateRequest = 3;
    UeMessageType.startStreaming = 4;
    UeMessageType.stopStreaming = 5;
    UeMessageType.latencyTest = 6;
    UeMessageType.requestInitialSettings = 7;
    /**********************************************************************/
    /*
     * Input Messages. Range = 50..89.
     */
    // Generic Input Messages. Range = 50..59.
    UeMessageType.uiInteraction = 50;
    UeMessageType.command = 51;
    // Keyboard Input Message. Range = 60..69.
    UeMessageType.keyDown = 60;
    UeMessageType.keyUp = 61;
    UeMessageType.keyPress = 62;
    // Mouse Input Messages. Range = 70..79.
    UeMessageType.mouseEnter = 70;
    UeMessageType.mouseLeave = 71;
    UeMessageType.mouseDown = 72;
    UeMessageType.mouseUp = 73;
    UeMessageType.mouseMove = 74;
    UeMessageType.mouseWheel = 75;
    // Touch Input Messages. Range = 80..89.
    UeMessageType.touchStart = 80;
    UeMessageType.touchEnd = 81;
    UeMessageType.touchMove = 82;
    // Gamepad Input Messages. Range = 90..99
    UeMessageType.gamepadButtonPressed = 90;
    UeMessageType.gamepadButtonReleased = 91;
    UeMessageType.gamepadAnalog = 92;
    return UeMessageType;
}());



/***/ }),

/***/ "./src/Ui/UiController.ts":
/*!********************************!*\
  !*** ./src/Ui/UiController.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UiController: function() { return /* binding */ UiController; },
/* harmony export */   playerStyleAttributes: function() { return /* binding */ playerStyleAttributes; }
/* harmony export */ });
/**
 * The Ui Controller class handles all methods that interact with the UI
 */
var UiController = /** @class */ (function () {
    function UiController(videoPlayerProvider) {
        var _this = this;
        this.lastTimeResized = new Date().getTime();
        this.videoPlayerProvider = videoPlayerProvider;
        this.playerStyleAttributes = new playerStyleAttributes();
        // set resize events to the windows if it is resized or its orientation is changed
        window.addEventListener('resize', function () { return _this.resizePlayerStyle(); }, true);
        window.addEventListener('orientationchange', function () { return _this.onOrientationChange(); });
    }
    /**
     * Resizes the player element to fill the window
     * @param playerElement - the player DOM element
     */
    UiController.prototype.resizePlayerStyleToFillWindow = function (playerElement) {
        var videoElement = this.videoPlayerProvider.getVideoElement();
        // Fill the player display in window, keeping picture's aspect ratio.
        var windowAspectRatio = window.innerHeight / window.innerWidth;
        var playerAspectRatio = playerElement.clientHeight / playerElement.clientWidth;
        // We want to keep the video ratio correct for the video stream
        var videoWidth;
        var videoHeight;
        if (!videoElement === undefined) {
            videoWidth = parseInt(videoElement.getAttribute("videoWidth"));
            videoHeight = parseInt(videoElement.getAttribute("videoHeight"));
        }
        var videoAspectRatio = videoHeight / videoWidth;
        if (isNaN(videoAspectRatio)) {
            //Video is not initialised yet so set playerElement to size of window
            this.playerStyleAttributes.styleWidth = window.innerWidth;
            this.playerStyleAttributes.styleHeight = window.innerHeight;
            this.playerStyleAttributes.styleTop = 0;
            this.playerStyleAttributes.styleLeft = 0;
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
        else if (windowAspectRatio < playerAspectRatio) {
            // Window height is the constraining factor so to keep aspect ratio change width appropriately
            this.playerStyleAttributes.styleWidth = Math.floor(window.innerHeight / videoAspectRatio);
            this.playerStyleAttributes.styleHeight = window.innerHeight;
            this.playerStyleAttributes.styleTop = 0;
            this.playerStyleAttributes.styleLeft = Math.floor((window.innerWidth - this.playerStyleAttributes.styleWidth) * 0.5);
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
        else {
            // Window width is the constraining factor so to keep aspect ratio change height appropriately
            this.playerStyleAttributes.styleWidth = window.innerWidth;
            this.playerStyleAttributes.styleHeight = Math.floor(window.innerWidth * videoAspectRatio);
            this.playerStyleAttributes.styleTop = Math.floor((window.innerHeight - this.playerStyleAttributes.styleHeight) * 0.5);
            this.playerStyleAttributes.styleLeft = 0;
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
    };
    /**
     * Resizes the player element to fit the actual size of the stream
     * @param playerElement - the player DOM element
     */
    UiController.prototype.resizePlayerStyleToActualSize = function (playerElement) {
        var videoElement = this.videoPlayerProvider.getVideoElement();
        var videoElementLength;
        if (!videoElement === undefined) {
            videoElementLength = parseInt(videoElement.getAttribute("length"));
        }
        if (videoElementLength > 0) {
            // Display image in its actual size
            this.playerStyleAttributes.styleWidth = videoElement.videoWidth;
            this.playerStyleAttributes.styleHeight = videoElement.videoHeight;
            var Top = Math.floor((window.innerHeight - this.playerStyleAttributes.styleHeight) * 0.5);
            var Left = Math.floor((window.innerWidth - this.playerStyleAttributes.styleWidth) * 0.5);
            this.playerStyleAttributes.styleTop = (Top > 0) ? Top : 0;
            this.playerStyleAttributes.styleLeft = (Left > 0) ? Left : 0;
            playerElement.setAttribute('style', "top: " + this.playerStyleAttributes.styleTop + "px; left: " + this.playerStyleAttributes.styleLeft + "px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
        }
    };
    /**
     * Resizes the player element to fit an arbitrary size
     * @param playerElement - the player DOM element
     */
    UiController.prototype.resizePlayerStyleToArbitrarySize = function (playerElement) {
        playerElement.setAttribute('style', "top: 0px; left: 0px; width: " + this.playerStyleAttributes.styleWidth + "px; height: " + this.playerStyleAttributes.styleHeight + "px; cursor: " + this.playerStyleAttributes.styleCursor + "; " + this.playerStyleAttributes.styleAdditional);
    };
    /**
     * An override for setting up the mouse and freezeFrame
     * @param element - the player DOM element
     */
    UiController.prototype.setUpMouseAndFreezeFrame = function (element) { };
    /**
     * An override for updating the video stream size
     */
    UiController.prototype.updateVideoStreamSize = function () { };
    /**
     * Resizes the player style based on the window height and width
     * @returns - nil if requirements are satisfied
     */
    UiController.prototype.resizePlayerStyle = function () {
        var playerElement = this.videoPlayerProvider.getVideoParentElement();
        if (!playerElement) {
            return;
        }
        this.updateVideoStreamSize();
        if (playerElement.classList.contains('fixed-size')) {
            this.setUpMouseAndFreezeFrame(playerElement);
            return;
        }
        // controls for resizing the player 
        var videoWidth = parseInt(playerElement.getAttribute("videoWidth"));
        var videoHeight = parseInt(playerElement.getAttribute("videoHeight"));
        var windowSmallerThanPlayer = window.innerWidth < videoWidth || window.innerHeight < videoHeight;
        if (this.enlargeDisplayToFillWindow !== null) {
            if (this.enlargeDisplayToFillWindow === true || windowSmallerThanPlayer) {
                this.resizePlayerStyleToFillWindow(playerElement);
            }
            else {
                this.resizePlayerStyleToActualSize(playerElement);
            }
        }
        else {
            this.resizePlayerStyleToArbitrarySize(playerElement);
        }
        this.setUpMouseAndFreezeFrame(playerElement);
    };
    /**
     * On the orientation change of a window clear the timeout
     */
    UiController.prototype.onOrientationChange = function () {
        var _this = this;
        clearTimeout(this.orientationChangeTimeout);
        this.orientationChangeTimeout = setTimeout(function () { _this.resizePlayerStyle(); }, 500);
    };
    return UiController;
}());

/**
 * Handles the player style attributes so they can be instantiated
 */
var playerStyleAttributes = /** @class */ (function () {
    function playerStyleAttributes() {
        this.styleCursor = 'default';
    }
    return playerStyleAttributes;
}());



/***/ }),

/***/ "./src/VideoPlayer/StreamController.ts":
/*!*********************************************!*\
  !*** ./src/VideoPlayer/StreamController.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StreamController: function() { return /* binding */ StreamController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Video Player Controller handles the creation of the video HTML element and all handlers
 */
var StreamController = /** @class */ (function () {
    function StreamController(videoElementProvider) {
        this.videoElementProvider = videoElementProvider;
        this.audioElement = document.createElement("Audio");
    }
    /**
     * Handles when the Peer connection has a track event
     * @param rtcTrackEvent - RTC Track Event
     */
    StreamController.prototype.handleOnTrack = function (rtcTrackEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "handleOnTrack " + JSON.stringify(rtcTrackEvent.streams), 6);
        var videoElement = this.videoElementProvider.getVideoElement();
        if (rtcTrackEvent.track) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Got track - ' + rtcTrackEvent.track.kind + ' id=' + rtcTrackEvent.track.id + ' readyState=' + rtcTrackEvent.track.readyState, 6);
        }
        if (rtcTrackEvent.track.kind == "audio") {
            this.CreateAudioTrack(rtcTrackEvent.streams[0]);
            return;
        }
        else if (rtcTrackEvent.track.kind == "video" && videoElement.srcObject !== rtcTrackEvent.streams[0]) {
            videoElement.srcObject = rtcTrackEvent.streams[0];
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Set video source from video track ontrack.', 6);
            return;
        }
    };
    /**
    * Creates the audio device when receiving an RTCTrackEvent with the kind of "audio"
    * @param audioMediaStream - Audio Media stream track
    */
    StreamController.prototype.CreateAudioTrack = function (audioMediaStream) {
        var videoElement = this.videoElementProvider.getVideoElement();
        // do nothing the video has the same media stream as the audio track we have here (they are linked)
        if (videoElement.srcObject == audioMediaStream) {
            return;
        }
        // video element has some other media stream that is not associated with this audio track
        else if (videoElement.srcObject && videoElement.srcObject !== audioMediaStream) {
            // create a new audio element
            this.audioElement.srcObject = audioMediaStream;
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'Created new audio element to play separate audio stream.', 6);
        }
    };
    return StreamController;
}());



/***/ }),

/***/ "./src/VideoPlayer/VideoPlayer.ts":
/*!****************************************!*\
  !*** ./src/VideoPlayer/VideoPlayer.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VideoPlayer: function() { return /* binding */ VideoPlayer; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

var VideoPlayer = /** @class */ (function () {
    function VideoPlayer(rootDiv, startVideoMuted) {
        this.videoElement = document.createElement("video");
        this.videoElement.id = "streamingVideo";
        this.videoElement.muted = startVideoMuted;
        this.videoElement.disablePictureInPicture = true;
        this.videoElement.playsInline = true;
        this.videoElement.style.width = "100%";
        this.videoElement.style.height = "100%";
        this.videoElement.style.position = "absolute";
        rootDiv.appendChild(this.videoElement);
    }
    /**
     * Get the current context of the html video element
     * @returns the current context of the video element
     */
    VideoPlayer.prototype.getVideoElement = function () {
        return this.videoElement;
    };
    /**
     * Get the current context of the html video elements parent
     * @returns the current context of the video elements parent
     */
    VideoPlayer.prototype.getVideoParentElement = function () {
        return this.videoElement.parentElement;
    };
    /**
     * Set the click actions for when the Element is mouse clicked
     * @param event - Mouse Event
     */
    VideoPlayer.prototype.setClickActions = function (event) {
        if (this.videoElement.paused) {
            this.videoElement.play();
        }
        // minor hack to alleviate ios not supporting pointerlock
        if (this.videoElement.requestPointerLock) {
            this.videoElement.requestPointerLock();
        }
    };
    /**
    * Set the mouse enter and mouse leave events
    */
    VideoPlayer.prototype.setMouseEnterAndLeaveEvents = function (mouseEnterCallBack, mouseLeaveCallBack) {
        // Handle when the Mouse has entered the element
        this.videoElement.onmouseenter = function (event) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Mouse Entered", 6);
            mouseEnterCallBack();
        };
        // Handles when the mouse has left the element 
        this.videoElement.onmouseleave = function (event) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Mouse Left", 6);
            mouseLeaveCallBack();
        };
    };
    /**
    * Set the Video Elements src object tracks to enable
    * @param enabled - Enable Tracks on the Src Object
    */
    VideoPlayer.prototype.setVideoEnabled = function (enabled) {
        // this is a temporary hack until type scripts video element is updated to reflect the need for tracks on a html video element 
        var videoElement = this.videoElement;
        videoElement.srcObject.getTracks().forEach(function (track) { return track.enabled = enabled; });
    };
    return VideoPlayer;
}());



/***/ }),

/***/ "./src/VideoPlayer/VideoPlayerMouseHoverEvents.ts":
/*!********************************************************!*\
  !*** ./src/VideoPlayer/VideoPlayerMouseHoverEvents.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VideoPlayerMouseHoverEvents: function() { return /* binding */ VideoPlayerMouseHoverEvents; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Video Player mouse Hover handler
 */
var VideoPlayerMouseHoverEvents = /** @class */ (function () {
    /**
     * @param mouseController - Mouse Controller
     */
    function VideoPlayerMouseHoverEvents(mouseController) {
        this.mouseController = mouseController;
    }
    /**
     * Satisfies the interfaces handleLockStateChange requirement
     */
    VideoPlayerMouseHoverEvents.prototype.handleLockStateChange = function () { };
    /**
     * Handle the mouse move event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseMove = function (mouseEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "MouseMove", 6);
        this.mouseController.sendMouseMove(mouseEvent.offsetX, mouseEvent.offsetY, mouseEvent.movementX, mouseEvent.movementY);
        mouseEvent.preventDefault();
    };
    /**
     * Handle the mouse Down event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseDown = function (mouseEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "onMouse Down", 6);
        this.mouseController.sendMouseDown(mouseEvent.button, mouseEvent.offsetX, mouseEvent.offsetY);
        mouseEvent.preventDefault();
    };
    /**
     * Handle the mouse Up event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseUp = function (mouseEvent) {
        this.mouseController.sendMouseUp(mouseEvent.button, mouseEvent.offsetX, mouseEvent.offsetY);
        mouseEvent.preventDefault();
    };
    /**
     * Handle the mouse wheel event, sends the mouse wheel data to the UE Instance
     * @param wheelEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleMouseWheel = function (wheelEvent) {
        //wheelEvent.detail * -120
        this.mouseController.sendMouseWheel(wheelEvent.deltaY, wheelEvent.offsetX, wheelEvent.offsetY);
        wheelEvent.preventDefault();
    };
    /**
     * Handle the mouse context menu event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseHoverEvents.prototype.handleContextMenu = function (mouseEvent) {
        this.mouseController.sendMouseUp(mouseEvent.button, mouseEvent.offsetX, mouseEvent.offsetY);
        mouseEvent.preventDefault();
    };
    return VideoPlayerMouseHoverEvents;
}());



/***/ }),

/***/ "./src/VideoPlayer/VideoPlayerMouseLockedEvents.ts":
/*!*********************************************************!*\
  !*** ./src/VideoPlayer/VideoPlayerMouseLockedEvents.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VideoPlayerMouseLockedEvents: function() { return /* binding */ VideoPlayerMouseLockedEvents; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");

/**
 * Handle the mouse locked events
 */
var VideoPlayerMouseLockedEvents = /** @class */ (function () {
    /**
     * @param videoElementProvider - The HTML Video Element provider
     * @param mouseController  - Mouse Controller
     */
    function VideoPlayerMouseLockedEvents(videoElementProvider, mouseController) {
        this.videoElementProvider = videoElementProvider;
        this.mouseController = mouseController;
        var videoElement = this.videoElementProvider.getVideoElement();
        this.x = videoElement.width / 2;
        this.y = videoElement.height / 2;
    }
    /**
     * Handle when the locked state Changed
     */
    VideoPlayerMouseLockedEvents.prototype.handleLockStateChange = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Lock state has changed", 6);
        var videoElement = this.videoElementProvider.getVideoElement();
        if (document.pointerLockElement === videoElement) {
            document.onmousemove = function (mouseEvent) { return _this.handleMouseMove(mouseEvent); };
            document.onwheel = function (wheelEvent) { return _this.handleMouseWheel(wheelEvent); };
            videoElement.onmousedown = function (wheelEvent) { return _this.handleMouseDown(wheelEvent); };
            videoElement.onmouseup = function (mouseEvent) { return _this.handleMouseUp(mouseEvent); };
        }
        else {
            document.onmousemove = null;
            videoElement.onmousedown = null;
            videoElement.onmouseup = null;
            videoElement.onwheel = null;
        }
    };
    /**
     * Handle the mouse move event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseMove = function (mouseEvent) {
        var videoElement = this.videoElementProvider.getVideoElement();
        this.x += mouseEvent.movementX;
        this.y += mouseEvent.movementY;
        if (this.x > videoElement.clientWidth) {
            this.x -= videoElement.clientWidth;
        }
        if (this.y > videoElement.clientHeight) {
            this.y -= videoElement.clientHeight;
        }
        if (this.x < 0) {
            this.x = videoElement.clientWidth + this.x;
        }
        if (this.y < 0) {
            this.y = videoElement.clientHeight - this.y;
        }
        this.mouseController.sendMouseMove(this.x, this.y, mouseEvent.movementX, mouseEvent.movementY);
    };
    /**
     * Handle the mouse Down event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseDown = function (mouseEvent) {
        this.mouseController.sendMouseDown(mouseEvent.button, mouseEvent.x, mouseEvent.y);
    };
    /**
     * Handle the mouse Up event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseUp = function (mouseEvent) {
        this.mouseController.sendMouseUp(mouseEvent.button, mouseEvent.x, mouseEvent.y);
    };
    /**
     * Handle the mouse wheel event, sends the mouse wheel data to the UE Instance
     * @param wheelEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleMouseWheel = function (wheelEvent) {
        this.mouseController.sendMouseWheel(wheelEvent.deltaY, wheelEvent.x, wheelEvent.y);
    };
    /**
     * Handle the mouse context menu event, sends the mouse data to the UE Instance
     * @param mouseEvent - Mouse Event
     */
    VideoPlayerMouseLockedEvents.prototype.handleContextMenu = function (mouseEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "onContextMenu");
    };
    return VideoPlayerMouseLockedEvents;
}());



/***/ }),

/***/ "./src/WebRtcPlayer/WebRtcPlayerController.ts":
/*!****************************************************!*\
  !*** ./src/WebRtcPlayer/WebRtcPlayerController.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   webRtcPlayerController: function() { return /* binding */ webRtcPlayerController; }
/* harmony export */ });
/* harmony import */ var _WebSockets_WebSocketController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../WebSockets/WebSocketController */ "./src/WebSockets/WebSocketController.ts");
/* harmony import */ var _VideoPlayer_StreamController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../VideoPlayer/StreamController */ "./src/VideoPlayer/StreamController.ts");
/* harmony import */ var _Ui_UiController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Ui/UiController */ "./src/Ui/UiController.ts");
/* harmony import */ var _FreezeFrame_FreezeFrameController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../FreezeFrame/FreezeFrameController */ "./src/FreezeFrame/FreezeFrameController.ts");
/* harmony import */ var _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Afk/AfkLogic */ "./src/Afk/AfkLogic.ts");
/* harmony import */ var _DataChannel_DataChannelController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../DataChannel/DataChannelController */ "./src/DataChannel/DataChannelController.ts");
/* harmony import */ var _PeerConnectionController_PeerConnectionController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../PeerConnectionController/PeerConnectionController */ "./src/PeerConnectionController/PeerConnectionController.ts");
/* harmony import */ var _UeInstanceMessage_UeDescriptorUi__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../UeInstanceMessage/UeDescriptorUi */ "./src/UeInstanceMessage/UeDescriptorUi.ts");
/* harmony import */ var _UeInstanceMessage_UeControlMessage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../UeInstanceMessage/UeControlMessage */ "./src/UeInstanceMessage/UeControlMessage.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _Inputs_InputController__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Inputs/InputController */ "./src/Inputs/InputController.ts");
/* harmony import */ var _MicPlayer_MicController__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../MicPlayer/MicController */ "./src/MicPlayer/MicController.ts");
/* harmony import */ var _VideoPlayer_VideoPlayer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../VideoPlayer/VideoPlayer */ "./src/VideoPlayer/VideoPlayer.ts");













/**
 * Entry point for the Web RTC Player
 */
var webRtcPlayerController = /** @class */ (function () {
    /**
     *
     * @param config - the frontend config object
     * @param delegate - the delegate interface object
     */
    function webRtcPlayerController(config, delegate) {
        var _this = this;
        this.shouldShowPlayOverlay = true;
        this.lastTimeResized = new Date().getTime();
        this.config = config;
        this.delegate = delegate;
        this.sdpConstraints = {
            offerToReceiveAudio: true,
            offerToReceiveVideo: true
        };
        // set up the afk logic class and connect up its method for closing the signaling server 
        this.afkLogic = new _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_4__.AfkLogic(this.config.controlScheme, this.config.afkTimeout);
        this.afkLogic.setDisconnectMessageOverride = function (message) { return _this.setDisconnectMessageOverride(message); };
        this.afkLogic.closeWebSocket = function () { return _this.closeSignalingServer(); };
        this.freezeFrameController = new _FreezeFrame_FreezeFrameController__WEBPACK_IMPORTED_MODULE_3__.FreezeFrameController(this.config.playerElement);
        this.videoPlayer = new _VideoPlayer_VideoPlayer__WEBPACK_IMPORTED_MODULE_12__.VideoPlayer(this.config.playerElement, this.config.startVideoMuted);
        this.streamController = new _VideoPlayer_StreamController__WEBPACK_IMPORTED_MODULE_1__.StreamController(this.videoPlayer);
        this.uiController = new _Ui_UiController__WEBPACK_IMPORTED_MODULE_2__.UiController(this.videoPlayer);
        this.uiController.setUpMouseAndFreezeFrame = function (element) { return _this.setUpMouseAndFreezeFrame(element); };
        this.dataChannelController = new _DataChannel_DataChannelController__WEBPACK_IMPORTED_MODULE_5__.DataChannelController(this.videoPlayer, this.config);
        this.dataChannelController.handleOnOpen = function () { return _this.handleDataChannelConnected(); };
        this.dataChannelController.onLatencyTestResult = function (latencyTestResults) { return _this.handleLatencyTestResult(latencyTestResults); };
        this.dataChannelController.onVideoEncoderAvgQP = function (AvgQP) { return _this.handleVideoEncoderAvgQP(AvgQP); };
        this.dataChannelController.OnInitialSettings = function (InitialSettings) { return _this.handleInitialSettings(InitialSettings); };
        this.dataChannelController.onQualityControlOwnership = function (hasQualityOwnership) { return _this.handleQualityControlOwnership(hasQualityOwnership); };
        this.dataChannelController.resetAfkWarningTimerOnDataSend = function () { return _this.afkLogic.resetAfkWarningTimer(); };
        // set up websocket methods
        this.webSocketController = new _WebSockets_WebSocketController__WEBPACK_IMPORTED_MODULE_0__.WebSocketController(this.config.signallingServerAddress);
        this.webSocketController.onConfig = function (messageConfig) { return _this.handleOnConfigMessage(messageConfig); };
        this.webSocketController.onInstanceStateChange = function (instanceState) { return _this.handleInstanceStateChange(instanceState); };
        this.webSocketController.onAuthenticationResponse = function (authResponse) { return _this.handleAuthenticationResponse(authResponse); };
        this.webSocketController.onWebSocketOncloseOverlayMessage = function (event) { return _this.delegate.onDisconnect(event.code + " - " + event.reason); };
        // set up the final webRtc player controller methods from within our delegate so a connection can be activated
        this.delegate.setIWebRtcPlayerController(this);
        // now that the delegate has finished instantiating connect the rest of the afk methods to the afk logic class
        this.afkLogic.showAfkOverlay = function () { return _this.delegate.showAfkOverlay(_this.afkLogic.countDown); };
        this.afkLogic.updateAfkCountdown = function () { return _this.delegate.updateAfkOverlay(_this.afkLogic.countDown); };
        this.afkLogic.hideCurrentOverlay = function () { return _this.delegate.hideCurrentOverlay(); };
        this.webSocketController.stopAfkWarningTimer = function () { return _this.afkLogic.stopAfkWarningTimer(); };
    }
    /**
     * connect up the onAfkClick action with a method so it can be exposed to the delegate
     */
    webRtcPlayerController.prototype.onAfkClick = function () {
        this.afkLogic.onAfkClick();
        // if the stream is paused play it
        if (this.videoPlayer.videoElement.paused === true) {
            this.playStream();
        }
    };
    /**
     * Restart the stream automaticity without refreshing the page
     */
    webRtcPlayerController.prototype.restartStreamAutomaticity = function () {
        var _this = this;
        // if there is no webSocketController return immediately or this will not work
        if (!this.webSocketController) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "The Web Socket Controller does not exist so this will not work right now.");
            return;
        }
        // if a websocket object has not been created connect normally without closing 
        if (!this.webSocketController.webSocket) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "A websocket connection has not been made yet so we will start the stream");
            this.delegate.onWebRtcAutoConnect();
            this.connectToSignallingSever();
        }
        else {
            // set the replay status so we get a text overlay over an action overlay
            this.delegate.showActionOrErrorOnDisconnect = false;
            // set the disconnect message
            this.setDisconnectMessageOverride("Restarting stream manually");
            // close the connection 
            this.closeSignalingServer();
            // wait for the connection to close and restart the connection
            var autoConnectTimeout_1 = setTimeout(function () {
                _this.delegate.onWebRtcAutoConnect();
                _this.connectToSignallingSever();
                clearTimeout(autoConnectTimeout_1);
            }, 3000);
        }
    };
    /**
     * Sets if we are enlarging the display to fill the window for freeze frames and ui controller
     * @param isFilling is the display filling or not
     */
    webRtcPlayerController.prototype.setEnlargeToFillDisplay = function (isFilling) {
        this.freezeFrameController.freezeFrame.enlargeDisplayToFillWindow = isFilling;
        this.uiController.enlargeDisplayToFillWindow = isFilling;
    };
    /**
     * Loads a freeze frame if it is required otherwise shows the play overlay
     */
    webRtcPlayerController.prototype.loadFreezeFrameOrShowPlayOverlay = function () {
        if (this.shouldShowPlayOverlay === true) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "showing play overlay");
            this.delegate.showPlayOverlay();
            this.resizePlayerStyle();
        }
        else {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "showing freeze frame");
            this.freezeFrameController.showFreezeFrame();
        }
        this.videoPlayer.setVideoEnabled(false);
    };
    /**
     * Enable the video after hiding a freeze frame
     */
    webRtcPlayerController.prototype.InvalidateFreezeFrameAndEnableVideo = function () {
        this.freezeFrameController.hideFreezeFrame();
        if (this.videoPlayer.videoElement) {
            this.videoPlayer.setVideoEnabled(true);
        }
    };
    webRtcPlayerController.prototype.getWebSocketController = function () {
        return this.webSocketController;
    };
    /**
     * Plays the stream audio and video source and sets up other pieces while the stream starts
     */
    webRtcPlayerController.prototype.playStream = function () {
        var _this = this;
        if (!this.videoPlayer.videoElement) {
            this.delegate.showErrorOverlay("Could not player video stream because the video player was not initialised correctly.");
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Could not player video stream because the video player was not initialised correctly.");
            // set the disconnect message
            this.setDisconnectMessageOverride("Stream not initialised correctly");
            // close the connection 
            this.closeSignalingServer();
        }
        else {
            this.inputController.registerTouch(this.config.fakeMouseWithTouches, this.videoPlayer.videoElement);
            if (this.streamController.audioElement) {
                this.streamController.audioElement.play().then(function () {
                    _this.playVideo();
                }).catch(function (onRejectedReason) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), onRejectedReason);
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay.");
                    _this.delegate.showPlayOverlay();
                });
            }
            else {
                this.playVideo();
            }
            this.shouldShowPlayOverlay = false;
            this.freezeFrameController.showFreezeFrame();
            this.delegate.hideCurrentOverlay();
        }
    };
    /**
     * Plays the video stream
     */
    webRtcPlayerController.prototype.playVideo = function () {
        var _this = this;
        // // handle play() with .then as it is an asynchronous call  
        this.videoPlayer.videoElement.play().catch(function (onRejectedReason) {
            if (_this.streamController.audioElement.srcObject) {
                _this.streamController.audioElement.pause();
            }
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), onRejectedReason);
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay.");
            _this.delegate.showPlayOverlay();
        });
    };
    /**
     * Enable the video to play automaticity if enableSpsAutoplay is true
     */
    webRtcPlayerController.prototype.autoPlayVideoOrSetUpPlayOverlay = function () {
        if (this.config.enableSpsAutoplay === true) {
            // set up the auto play on the video element  
            this.videoPlayer.videoElement.autoplay = true;
            // attempt to play the video
            this.playStream();
        }
        else {
            this.delegate.showPlayOverlay();
        }
        // send and request initial stats
        this.ueControlMessage.SendRequestInitialSettings();
        this.ueControlMessage.SendRequestQualityControl();
    };
    /**
     * Connect to the Signaling server
     */
    webRtcPlayerController.prototype.connectToSignallingSever = function () {
        this.webSocketController.connect();
    };
    /**
     * This will start the handshake to the signalling server
     * @param peerConfig  - RTC Configuration Options from the Signaling server
     * @remark RTC Peer Connection on Ice Candidate event have it handled by handle Send Ice Candidate
     */
    webRtcPlayerController.prototype.startSession = function (peerConfig) {
        var _this = this;
        // set up url params for STUN, Mic and SFU
        this.urlParams = new URLSearchParams(window.location.search);
        // check for forcing turn
        if (this.urlParams.has('ForceTURN')) {
            // check for a turn server
            var hasTurnServer = this.checkTurnServerAvailability(peerConfig);
            // close and error if turn is forced and there is no turn server
            if (!hasTurnServer) {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "No turn server was found in the Peer Connection Options. TURN cannot be forced, closing connection. Please use STUN instead");
                this.setDisconnectMessageOverride("TURN cannot be forced, closing connection. Please use STUN instead.");
                this.closeSignalingServer();
                return;
            }
        }
        // set up the peer connection controller
        this.peerConnectionController = new _PeerConnectionController_PeerConnectionController__WEBPACK_IMPORTED_MODULE_6__.PeerConnectionController(peerConfig, this.urlParams.has('ForceTURN'));
        //set up mic controller
        this.micController = new _MicPlayer_MicController__WEBPACK_IMPORTED_MODULE_11__.MicController(this.urlParams);
        // set up peer connection controller video stats
        this.peerConnectionController.onVideoStats = function (event) { return _this.handleVideoStats(event); };
        /* When the Peer Connection Wants to send an offer have it handled */
        this.peerConnectionController.onSendWebRTCOffer = function (offer) { return _this.handleSendWebRTCOffer(offer); };
        /* When the Peer connection ice candidate is added have it handled */
        this.peerConnectionController.onPeerIceCandidate = function (peerConnectionIceEvent) { return _this.handleSendIceCandidate(peerConnectionIceEvent); };
        // handel mic connections with promise
        this.dataChannelController.createDataChannel(this.peerConnectionController.peerConnection, "cirrus", this.datachannelOptions);
        // set up webRtc text overlays 
        this.peerConnectionController.showTextOverlayConnecting = function () { return _this.delegate.onWebRtcConnecting(); };
        this.peerConnectionController.showTextOverlaySetupFailure = function () { return _this.delegate.onWebRtcFailed(); };
        /* RTC Peer Connection on Track event -> handle on track */
        this.peerConnectionController.onTrack = function (trackEvent) { return _this.streamController.handleOnTrack(trackEvent); };
        /* Start the Hand shake process by creating an Offer */
        this.peerConnectionController.createOffer(this.sdpConstraints, this.micController.useMic);
    };
    /**
     * Checks the peer connection options for a turn server and returns true or false
     */
    webRtcPlayerController.prototype.checkTurnServerAvailability = function (options) {
        // if iceServers is empty return false this should not be the general use case but is here incase
        if (!options.iceServers) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'A turn sever was not found');
            return false;
        }
        // loop through the ice servers to check for a turn url
        for (var _i = 0, _a = options.iceServers; _i < _a.length; _i++) {
            var iceServer = _a[_i];
            for (var _b = 0, _c = iceServer.urls; _b < _c.length; _b++) {
                var url = _c[_b];
                if (url.includes('turn')) {
                    _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "A turn sever was found at " + url);
                    return true;
                }
            }
        }
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'A turn sever was not found');
        return false;
    };
    /**
     * Handles when a Config Message is received contains the Peer Connection Options required (STUN and TURN Server Info)
     * @param messageConfig - Config Message received from the signaling server
     */
    webRtcPlayerController.prototype.handleOnConfigMessage = function (messageConfig) {
        var _this = this;
        // Tell the WebRtcController to start a session with the peer options sent from the signaling server
        this.startSession(messageConfig.peerConnectionOptions);
        // When the signaling server sends a WebRTC Answer over the websocket connection have the WebRtcController handle the message
        this.webSocketController.onWebRtcAnswer = function (messageAnswer) { return _this.handleWebRtcAnswer(messageAnswer); };
        // When the signaling server sends a IceCandidate over the websocket connection have the WebRtcController handle the message
        this.webSocketController.onIceCandidate = function (iceCandidate) { return _this.handleIceCandidate(iceCandidate); };
    };
    /**
     * Handle the RTC Answer from the signaling server
     * @param Answer - Answer Message from the Signaling server
     */
    webRtcPlayerController.prototype.handleWebRtcAnswer = function (Answer) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "There is an answer", 6);
        var sdpAnswer = {
            sdp: Answer.sdp,
            type: "answer"
        };
        this.peerConnectionController.handleAnswer(sdpAnswer);
        // start the afk warning timer as the container is now running
        this.afkLogic.startAfkWarningTimer();
        // show the overlay that we have an answer
        this.delegate.onWebRtcAnswer();
    };
    /**
     * When an ice Candidate is received from the Signaling server add it to the Peer Connection Client
     * @param iceCandidate - Ice Candidate from Server
     */
    webRtcPlayerController.prototype.handleIceCandidate = function (iceCandidate) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Web RTC Controller: onWebRtcIce", 6);
        var candidate = new RTCIceCandidate(iceCandidate);
        this.peerConnectionController.handleOnIce(candidate);
    };
    /**
     * Send the ice Candidate to the signaling server via websocket
       * @param iceEvent - RTC Peer ConnectionIceEvent) {
     */
    webRtcPlayerController.prototype.handleSendIceCandidate = function (iceEvent) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "OnIceCandidate", 6);
        if (iceEvent.candidate && iceEvent.candidate.candidate) {
            this.webSocketController.sendIceCandidate(iceEvent.candidate);
        }
    };
    /**
     * Send the RTC Offer Session to the Signaling server via websocket
     * @param offer - RTC Session Description
     */
    webRtcPlayerController.prototype.handleSendWebRTCOffer = function (offer) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Sending the offer to the Server", 6);
        this.webSocketController.sendWebRtcOffer(offer);
    };
    /**
     * registers the mouse for use in IWebRtcPlayerController
     */
    webRtcPlayerController.prototype.activateRegisterMouse = function () {
        this.inputController.registerMouse(this.config.controlScheme);
    };
    /**
     * Sets up the Data channel Keyboard, Mouse, UE Control Message, UE Descriptor
     */
    webRtcPlayerController.prototype.handleDataChannelConnected = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "Data Channel is open", 6);
        // show the connected overlay 
        this.delegate.onWebRtcConnected();
        this.inputController = new _Inputs_InputController__WEBPACK_IMPORTED_MODULE_10__.InputController(this.dataChannelController, null, this.videoPlayer);
        this.ueControlMessage = new _UeInstanceMessage_UeControlMessage__WEBPACK_IMPORTED_MODULE_8__.UeControlMessage(this.dataChannelController);
        this.ueDescriptorUi = new _UeInstanceMessage_UeDescriptorUi__WEBPACK_IMPORTED_MODULE_7__.UeDescriptorUi(this.dataChannelController, this.config);
        this.dataChannelController.ueDescriptorUi = this.ueDescriptorUi;
        this.inputController.ueDescriptorUi = this.ueDescriptorUi;
        console.log("connected");
        this.activateRegisterMouse();
        this.inputController.registerKeyBoard(this.config.suppressBrowserKeys);
        this.inputController.registerGamePad();
        this.videoPlayer.setMouseEnterAndLeaveEvents(function () { return _this.inputController.mouseController.sendMouseEnter(); }, function () { return _this.inputController.mouseController.sendMouseLeave(); });
        this.resizePlayerStyle();
        this.dataChannelController.processFreezeFrameMessage = function (view) { return _this.freezeFrameController.processFreezeFrameMessage(view, function () { return _this.loadFreezeFrameOrShowPlayOverlay(); }); };
        this.dataChannelController.onUnFreezeFrame = function () { return _this.InvalidateFreezeFrameAndEnableVideo(); };
        setInterval(function () { return _this.getStats(); }, 1000);
        // either autoplay the video or set up the play overlay
        this.autoPlayVideoOrSetUpPlayOverlay();
        this.resizePlayerStyle();
        this.ueDescriptorUi.sendUpdateVideoStreamSize(this.videoPlayer.videoElement.clientWidth, this.videoPlayer.videoElement.clientHeight);
        this.delegate.onVideoInitialised();
        this.uiController.updateVideoStreamSize = function () { return _this.updateVideoStreamSize(); };
    };
    /**
     * Handles when the web socket receives an authentication response
     * @param authResponse - Authentication Response
     */
    webRtcPlayerController.prototype.handleAuthenticationResponse = function (authResponse) {
        this.delegate.onAuthenticationResponse(authResponse);
    };
    /**
     * Handles when the stream size changes
     */
    webRtcPlayerController.prototype.updateVideoStreamSize = function () {
        // Call the setter before calling this function
        if (!this.matchViewportResolution) {
            return;
        }
        //?
        var now = new Date().getTime();
        if (now - this.lastTimeResized > 1000) {
            // get the root div from config 
            if (!this.config.playerElement) {
                return;
            }
            this.ueDescriptorUi.sendUpdateVideoStreamSize(this.videoPlayer.videoElement.clientWidth, this.videoPlayer.videoElement.clientHeight);
            this.lastTimeResized = new Date().getTime();
        }
        else {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), 'Resizing too often - skipping', 6);
            clearTimeout(this.resizeTimeout);
            this.resizeTimeout = setTimeout(this.updateVideoStreamSize, 1000);
        }
    };
    /**
     * Handles when the Instance State Changes
     * @param instanceState  - Instance State
     */
    webRtcPlayerController.prototype.handleInstanceStateChange = function (instanceState) {
        this.delegate.onInstanceStateChange(instanceState);
    };
    /**
     * Set the freeze frame overlay to the player div
     * @param playerElement - The div element of the Player
     */
    webRtcPlayerController.prototype.setUpMouseAndFreezeFrame = function (playerElement) {
        // Calculating and normalizing positions depends on the width and height of the player.
        this.playerElementClientRect = playerElement.getBoundingClientRect();
        this.freezeFrameController.freezeFrame.resize();
    };
    /**
     * Close the Connection to the signaling server
     */
    webRtcPlayerController.prototype.closeSignalingServer = function () {
        this.webSocketController.close();
    };
    /**
     * Fires a Video Stats Event in the RTC Peer Connection
     */
    webRtcPlayerController.prototype.getStats = function () {
        this.peerConnectionController.generateStats();
    };
    /**
     * Send a Latency Test Request to the UE Instance
     */
    webRtcPlayerController.prototype.sendLatencyTest = function () {
        this.latencyStartTime = Date.now();
        this.ueControlMessage.sendLatencyTest(this.latencyStartTime);
    };
    /**
     * Send the Encoder Settings to the UE Instance as a UE UI Descriptor.
     * @param encoder - Encoder Settings
     */
    webRtcPlayerController.prototype.sendEncoderSettings = function (encoder) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Encoder Settings    ----\n" + JSON.stringify(encoder, undefined, 4) + "\n-------------------------------", 6);
        if (encoder.RateControl != null) {
            this.ueDescriptorUi.sendEncoderRateControl(encoder.RateControl);
        }
        if (encoder.TargetBitrate != null) {
            this.ueDescriptorUi.sendEncoderTargetBitRate(encoder.TargetBitrate);
        }
        if (encoder.MaxBitrate != null) {
            this.ueDescriptorUi.sendEncoderMaxBitrateVbr(encoder.MaxBitrate);
        }
        if (encoder.MinQP != null) {
            this.ueDescriptorUi.sendEncoderMinQP(encoder.MinQP);
        }
        if (encoder.MaxQP != null) {
            this.ueDescriptorUi.sendEncoderMaxQP(encoder.MaxQP);
        }
        if (encoder.FillerData != null) {
            this.ueDescriptorUi.sendEncoderEnableFillerData(encoder.FillerData);
        }
        if (encoder.MultiPass != null) {
            this.ueDescriptorUi.sendEncoderMultiPass(encoder.MultiPass);
        }
    };
    /**
     * Send the WebRTC Settings to the UE Instance as a UE UI Descriptor.
     * @param webRTC - Web RTC Settings
     */
    webRtcPlayerController.prototype.sendWebRtcSettings = function (webRTC) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   WebRTC Settings    ----\n" + JSON.stringify(webRTC, undefined, 4) + "\n-------------------------------", 6);
        if (webRTC.DegradationPref != null) {
            this.ueDescriptorUi.sendWebRtcDegradationPreference(webRTC.DegradationPref);
        }
        if (webRTC.FPS != null) {
            this.ueDescriptorUi.sendWebRtcFps(webRTC.FPS);
            this.ueDescriptorUi.sendWebRtcMaxFps(webRTC.FPS);
        }
        if (webRTC.MinBitrate != null) {
            this.ueDescriptorUi.sendWebRtcMinBitrate(webRTC.MinBitrate);
        }
        if (webRTC.MaxBitrate != null) {
            this.ueDescriptorUi.sendWebRtcMaxBitrate(webRTC.MaxBitrate);
        }
        if (webRTC.LowQP != null) {
            this.ueDescriptorUi.sendWebRtcLowQpThreshold(webRTC.LowQP);
        }
        if (webRTC.HighQP != null) {
            this.ueDescriptorUi.sendWebRtcHighQpThreshold(webRTC.HighQP);
        }
    };
    /**
     * Send Aggregated Stats to the Signaling Server
     * @param stats - Aggregated Stats
     */
    webRtcPlayerController.prototype.sendStatsToSignallingServer = function (stats) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Sending Aggregated Stats to Signaling Server   ----\n" + JSON.stringify(stats, undefined, 4) + "\n-----------------------------------------------------------", 6);
        this.webSocketController.sendStats(stats);
    };
    /**
     * Sends a UI Interaction Descriptor to the UE Instance
     * @param message - String to send to the UE Instance
     */
    webRtcPlayerController.prototype.sendUeUiDescriptor = function (message) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   UE UI Interaction String   ----\n" + JSON.stringify(message, undefined, 4) + "\n---------------------------------------", 6);
        this.ueDescriptorUi.sendUiInteraction(message);
    };
    /**
     * Sends the UI Descriptor `stat fps` to the UE Instance
     */
    webRtcPlayerController.prototype.sendShowFps = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Sending show stat to UE   ----", 6);
        this.ueDescriptorUi.sendShowFps();
    };
    /**
     * Sends a request to the UE Instance to have ownership of Quality
     */
    webRtcPlayerController.prototype.sendRequestQualityControlOwnership = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_9__.Logger.GetStackTrace(), "----   Sending Request to Control Quality  ----", 6);
        this.ueControlMessage.SendRequestQualityControl();
    };
    /**
     * Handles when a Latency Test Result are received from the UE Instance
     * @param latencyTimings - Latency Test Timings
     */
    webRtcPlayerController.prototype.handleLatencyTestResult = function (latencyTimings) {
        latencyTimings.testStartTimeMs = this.latencyStartTime;
        latencyTimings.browserReceiptTimeMs = Date.now();
        latencyTimings.latencyExcludingDecode = ~~(latencyTimings.browserReceiptTimeMs - latencyTimings.testStartTimeMs);
        latencyTimings.testDuration = ~~(latencyTimings.TransmissionTimeMs - latencyTimings.ReceiptTimeMs);
        latencyTimings.networkLatency = ~~(latencyTimings.latencyExcludingDecode - latencyTimings.testDuration);
        if (latencyTimings.frameDisplayDeltaTimeMs && latencyTimings.browserReceiptTimeMs) {
            latencyTimings.endToEndLatency = ~~(latencyTimings.frameDisplayDeltaTimeMs + latencyTimings.networkLatency, +latencyTimings.CaptureToSendMs);
        }
        this.delegate.onLatencyTestResult(latencyTimings);
    };
    /**
     * Handles when the Encoder and Web RTC Settings are received from the UE Instance
     * @param settings - Initial Encoder and Web RTC Settings
     */
    webRtcPlayerController.prototype.handleInitialSettings = function (settings) {
        this.delegate.onInitialSettings(settings);
    };
    /**
     * Handles when the Quantization Parameter are received from the UE Instance
     * @param AvgQP - Encoders Quantization Parameter
     */
    webRtcPlayerController.prototype.handleVideoEncoderAvgQP = function (AvgQP) {
        this.delegate.onVideoEncoderAvgQP(AvgQP);
    };
    /**
     * Flag set if the user has Quality Ownership
     * @param hasQualityOwnership - Does the current client have Quality Ownership
     */
    webRtcPlayerController.prototype.handleQualityControlOwnership = function (hasQualityOwnership) {
        this.delegate.onQualityControlOwnership(hasQualityOwnership);
    };
    /**
     * Handles when the Aggregated stats are Collected
     * @param stats - Aggregated Stats
     */
    webRtcPlayerController.prototype.handleVideoStats = function (stats) {
        this.delegate.onVideoStats(stats);
    };
    /**
    * To Resize the Video Player element
    */
    webRtcPlayerController.prototype.resizePlayerStyle = function () {
        this.uiController.resizePlayerStyle();
    };
    /**
     * Get the overridden disconnect message
     */
    webRtcPlayerController.prototype.getDisconnectMessageOverride = function () {
        return this.disconnectMessageOverride;
    };
    /**
     * Set the override for the disconnect message
     */
    webRtcPlayerController.prototype.setDisconnectMessageOverride = function (message) {
        this.disconnectMessageOverride = message;
    };
    return webRtcPlayerController;
}());



/***/ }),

/***/ "./src/WebSockets/MessageReceive.ts":
/*!******************************************!*\
  !*** ./src/WebSockets/MessageReceive.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InstanceState: function() { return /* binding */ InstanceState; },
/* harmony export */   MessageAnswer: function() { return /* binding */ MessageAnswer; },
/* harmony export */   MessageAuthRequired: function() { return /* binding */ MessageAuthRequired; },
/* harmony export */   MessageAuthResponse: function() { return /* binding */ MessageAuthResponse; },
/* harmony export */   MessageAuthResponseOutcomeType: function() { return /* binding */ MessageAuthResponseOutcomeType; },
/* harmony export */   MessageConfig: function() { return /* binding */ MessageConfig; },
/* harmony export */   MessageIceCandidate: function() { return /* binding */ MessageIceCandidate; },
/* harmony export */   MessageInstanceState: function() { return /* binding */ MessageInstanceState; },
/* harmony export */   MessagePlayerCount: function() { return /* binding */ MessagePlayerCount; },
/* harmony export */   MessageRecv: function() { return /* binding */ MessageRecv; },
/* harmony export */   MessageRecvTypes: function() { return /* binding */ MessageRecvTypes; }
/* harmony export */ });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
/**
 * The Types of Messages that will be received
 */
var MessageRecvTypes;
(function (MessageRecvTypes) {
    MessageRecvTypes["AUTHENTICATION_REQUIRED"] = "authenticationRequired";
    MessageRecvTypes["AUTHENTICATION_RESPONSE"] = "authenticationResponse";
    MessageRecvTypes["INSTANCE_STATE"] = "instanceState";
    MessageRecvTypes["CONFIG"] = "config";
    MessageRecvTypes["PLAYER_COUNT"] = "playerCount";
    MessageRecvTypes["ANSWER"] = "answer";
    MessageRecvTypes["ICE_CANDIDATE"] = "iceCandidate";
    MessageRecvTypes["PING"] = "ping";
})(MessageRecvTypes || (MessageRecvTypes = {}));
/**
 * Types of Authentication reposes
 */
var MessageAuthResponseOutcomeType;
(function (MessageAuthResponseOutcomeType) {
    MessageAuthResponseOutcomeType["REDIRECT"] = "REDIRECT";
    MessageAuthResponseOutcomeType["INVALID_TOKEN"] = "INVALID_TOKEN";
    MessageAuthResponseOutcomeType["AUTHENTICATED"] = "AUTHENTICATED";
    MessageAuthResponseOutcomeType["ERROR"] = "ERROR";
})(MessageAuthResponseOutcomeType || (MessageAuthResponseOutcomeType = {}));
/**
 * States of the UE Instance
 */
var InstanceState;
(function (InstanceState) {
    InstanceState["UNALLOCATED"] = "UNALLOCATED";
    InstanceState["PENDING"] = "PENDING";
    InstanceState["FAILED"] = "FAILED";
    InstanceState["READY"] = "READY";
})(InstanceState || (InstanceState = {}));
/**
 * Concrete Received Message wrapper
 */
var MessageRecv = /** @class */ (function () {
    function MessageRecv() {
    }
    return MessageRecv;
}());

/**
 * Authentication Required Message wrapper
 */
var MessageAuthRequired = /** @class */ (function (_super) {
    __extends(MessageAuthRequired, _super);
    function MessageAuthRequired() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageAuthRequired;
}(MessageRecv));

/**
 * Authentication Response Message wrapper
 */
var MessageAuthResponse = /** @class */ (function (_super) {
    __extends(MessageAuthResponse, _super);
    function MessageAuthResponse() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageAuthResponse;
}(MessageRecv));

/**
 * Instance State Message wrapper
 */
var MessageInstanceState = /** @class */ (function (_super) {
    __extends(MessageInstanceState, _super);
    function MessageInstanceState() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageInstanceState;
}(MessageRecv));

/**
 * Config Message Wrapper
 */
var MessageConfig = /** @class */ (function (_super) {
    __extends(MessageConfig, _super);
    function MessageConfig() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageConfig;
}(MessageRecv));

/**
 * Player Count Message wrapper
 */
var MessagePlayerCount = /** @class */ (function (_super) {
    __extends(MessagePlayerCount, _super);
    function MessagePlayerCount() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessagePlayerCount;
}(MessageRecv));

/**
 * Web RTC offer Answer Message wrapper
 */
var MessageAnswer = /** @class */ (function (_super) {
    __extends(MessageAnswer, _super);
    function MessageAnswer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageAnswer;
}(MessageRecv));

/**
 * Ice Candidate Message wrapper
 */
var MessageIceCandidate = /** @class */ (function (_super) {
    __extends(MessageIceCandidate, _super);
    function MessageIceCandidate() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MessageIceCandidate;
}(MessageRecv));



/***/ }),

/***/ "./src/WebSockets/MessageSend.ts":
/*!***************************************!*\
  !*** ./src/WebSockets/MessageSend.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageAuthRequest: function() { return /* binding */ MessageAuthRequest; },
/* harmony export */   MessageIceCandidate: function() { return /* binding */ MessageIceCandidate; },
/* harmony export */   MessagePong: function() { return /* binding */ MessagePong; },
/* harmony export */   MessageRequestInstance: function() { return /* binding */ MessageRequestInstance; },
/* harmony export */   MessageSend: function() { return /* binding */ MessageSend; },
/* harmony export */   MessageSendTypes: function() { return /* binding */ MessageSendTypes; },
/* harmony export */   MessageStats: function() { return /* binding */ MessageStats; },
/* harmony export */   MessageWebRTCOffer: function() { return /* binding */ MessageWebRTCOffer; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

/**
 * The Send Types that are pushed from the signaling server
 */
var MessageSendTypes;
(function (MessageSendTypes) {
    MessageSendTypes["ICE_CANDIDATE"] = "iceCandidate";
    MessageSendTypes["STATS"] = "stats";
    MessageSendTypes["AUTHENTICATION_REQUEST"] = "authenticationRequest";
    MessageSendTypes["REQUEST_INSTANCE"] = "requestInstance";
    MessageSendTypes["OFFER"] = "offer";
    MessageSendTypes["PONG"] = "pong";
})(MessageSendTypes || (MessageSendTypes = {}));
/**
 * A Wrapper for the message to send to the signaling server
 */
var MessageSend = /** @class */ (function () {
    function MessageSend() {
    }
    /**
     * Turns the wrapper into a JSON String
     * @returns - JSON String of the Message to send
     */
    MessageSend.prototype.payload = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending => \n" + JSON.stringify(this, undefined, 4), 6);
        return JSON.stringify(this);
    };
    return MessageSend;
}());

/**
 * Auth Request Message Wrapper
 */
var MessageAuthRequest = /** @class */ (function (_super) {
    __extends(MessageAuthRequest, _super);
    /**
     * @param token - Token Provided by the Auth Provider
     * @param provider - Name of the provider that is registered in the auth plugin
     */
    function MessageAuthRequest(token, provider) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.AUTHENTICATION_REQUEST;
        _this.token = token;
        _this.provider = provider;
        return _this;
    }
    return MessageAuthRequest;
}(MessageSend));

/**
 * Instance Request Message Wrapper
 */
var MessagePong = /** @class */ (function (_super) {
    __extends(MessagePong, _super);
    function MessagePong(time) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.PONG;
        _this.time = time;
        return _this;
    }
    return MessagePong;
}(MessageSend));

/**
 * Instance Request Message Wrapper
 */
var MessageRequestInstance = /** @class */ (function (_super) {
    __extends(MessageRequestInstance, _super);
    function MessageRequestInstance() {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.REQUEST_INSTANCE;
        return _this;
    }
    return MessageRequestInstance;
}(MessageSend));

/**
 * Aggregated Stats Message Wrapper
 */
var MessageStats = /** @class */ (function (_super) {
    __extends(MessageStats, _super);
    /**
     * @param aggregatedStats - Aggregated Stats
     */
    function MessageStats(aggregatedStats) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.STATS;
        _this.inboundVideoStats = aggregatedStats.inboundVideoStats;
        _this.inboundAudioStats = aggregatedStats.inboundAudioStats;
        _this.candidatePair = aggregatedStats.candidatePair;
        _this.dataChannelStats = aggregatedStats.dataChannelStats;
        _this.localCandidates = aggregatedStats.localCandidates;
        _this.remoteCandidates = aggregatedStats.remoteCandidates;
        _this.outboundVideoStats = aggregatedStats.outBoundVideoStats;
        return _this;
    }
    return MessageStats;
}(MessageSend));

/**
 *  Web RTC Offer message wrapper
 */
var MessageWebRTCOffer = /** @class */ (function (_super) {
    __extends(MessageWebRTCOffer, _super);
    /**
     * @param offer - Generated Web RTC Offer
     */
    function MessageWebRTCOffer(offer) {
        var _this = _super.call(this) || this;
        _this.type = MessageSendTypes.OFFER;
        if (offer) {
            _this.type = offer.type;
            _this.sdp = offer.sdp;
        }
        return _this;
    }
    return MessageWebRTCOffer;
}(MessageSend));

/**
 * RTC Ice Candidate Wrapper
 */
var MessageIceCandidate = /** @class */ (function () {
    /**
     * @param candidate - RTC Ice Candidate
     */
    function MessageIceCandidate(candidate) {
        this.type = MessageSendTypes.ICE_CANDIDATE;
        this.candidate = candidate;
    }
    /**
     * Turns the wrapper into a JSON String
     * @returns - JSON String of the Message to send
     */
    MessageIceCandidate.prototype.payload = function () {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending => \n" + JSON.stringify(this, undefined, 4), 6);
        return JSON.stringify(this);
    };
    return MessageIceCandidate;
}());



/***/ }),

/***/ "./src/WebSockets/WebSocketController.ts":
/*!***********************************************!*\
  !*** ./src/WebSockets/WebSocketController.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebSocketController: function() { return /* binding */ WebSocketController; }
/* harmony export */ });
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _MessageReceive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MessageReceive */ "./src/WebSockets/MessageReceive.ts");
/* harmony import */ var _MessageSend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MessageSend */ "./src/WebSockets/MessageSend.ts");



/**
 * The controller for the WebSocket and all associated methods
 */
var WebSocketController = /** @class */ (function () {
    /**
     * @param Address - The Address of the signaling server
     */
    function WebSocketController(Address) {
        this.WS_OPEN_STATE = 1;
        this.address = Address;
    }
    /**
     * Connect to the signaling server
     * @returns - If there is a connection
     */
    WebSocketController.prototype.connect = function () {
        var _this = this;
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), this.address, 6);
        try {
            this.webSocket = new WebSocket(this.address);
            this.webSocket.onopen = function (event) { return _this.handleOnOpen(event); };
            this.webSocket.onerror = function (event) { return _this.handleOnError(event); };
            this.webSocket.onclose = function (event) { return _this.handleOnClose(event); };
            this.webSocket.onmessage = function (event) { return _this.handleOnMessage(event); };
            this.webSocket.onmessagebinary = function (event) { return _this.handelOnMessageBinary(event); };
            return true;
        }
        catch (error) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(error, error);
            return false;
        }
    };
    /**
     * Handles what happens when a message is received in binary form
     * @param event - Message Received
     */
    WebSocketController.prototype.handelOnMessageBinary = function (event) {
        var _this = this;
        // if the event is empty return
        if (!event || !event.data) {
            return;
        }
        // handel the binary and then handel the message
        event.data.text().then(function (messageString) {
            // build a new message
            var constructedMessage = new MessageEvent('messageFromBinary', {
                data: messageString
            });
            // send the new stringified event back into `onmessage`
            _this.handelOnMessageBinary(constructedMessage);
        }).catch(function (error) {
            _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Failed to parse binary blob from websocket, reason: " + error);
        });
    };
    /**
     * Handles what happens when a message is received
     * @param event - Message Received
     */
    WebSocketController.prototype.handleOnMessage = function (event) {
        // Check if websocket message is binary, if so, stringify it.
        if (event.data && event.data instanceof Blob) {
            this.handelOnMessageBinary(event);
            return;
        }
        var message = JSON.parse(event.data);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "received => \n" + JSON.stringify(JSON.parse(event.data), undefined, 1), 6);
        switch (message.type) {
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.PING: {
                // send our pong payload back to the signalling server
                var payload = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessagePong(new Date().getTime()).payload();
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.PING + ": " + payload, 6);
                this.webSocket.send(payload);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.AUTHENTICATION_REQUIRED: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "AUTHENTICATION_REQUIRED", 6);
                var authenticationRequired = JSON.parse(event.data);
                var url_string = window.location.href;
                var url = new URL(url_string);
                var authRequest = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageAuthRequest(url.searchParams.get("code"), url.searchParams.get("provider"));
                this.webSocket.send(authRequest.payload());
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.AUTHENTICATION_RESPONSE: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "AUTHENTICATION_RESPONSE", 6);
                var authenticationResponse = JSON.parse(event.data);
                this.onAuthenticationResponse(authenticationResponse);
                switch (authenticationResponse.outcome) {
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.REDIRECT: {
                        window.location.href = authenticationResponse.redirect;
                        break;
                    }
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.AUTHENTICATED: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "User is authenticated and now requesting an instance", 6);
                        this.webSocket.send(new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageRequestInstance().payload());
                        break;
                    }
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.INVALID_TOKEN: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Authentication error : Invalid Token");
                        break;
                    }
                    case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageAuthResponseOutcomeType.ERROR: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Authentication Error from server Check what you are sending");
                        break;
                    }
                    default: {
                        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "The Outcome Message has not been handled : this is really bad");
                        break;
                    }
                }
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.INSTANCE_STATE: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "INSTANCE_STATE", 6);
                var instanceState = JSON.parse(event.data);
                this.onInstanceStateChange(instanceState);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.CONFIG: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "CONFIG", 6);
                var config = JSON.parse(event.data);
                this.onConfig(config);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.PLAYER_COUNT: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "PLAYER_COUNT", 6);
                var playerCount = JSON.parse(event.data);
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Player Count: " + (playerCount.count - 1), 6);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.ANSWER: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "ANSWER", 6);
                var answer = JSON.parse(event.data);
                this.onWebRtcAnswer(answer);
                break;
            }
            case _MessageReceive__WEBPACK_IMPORTED_MODULE_1__.MessageRecvTypes.ICE_CANDIDATE: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "ICE_CANDIDATE", 6);
                var iceCandidate = JSON.parse(event.data);
                this.onIceCandidate(iceCandidate.candidate);
                break;
            }
            default: {
                _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Error Message type not Defined");
                break;
            }
        }
    };
    /**
     * Handles when the Websocket is opened
     * @param event - Not Used
     */
    WebSocketController.prototype.handleOnOpen = function (event) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Connected to the signalling server via WebSocket", 6);
    };
    /**
     * Handles when there is an error on the websocket
     * @param event - Error Payload
     */
    WebSocketController.prototype.handleOnError = function (event) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), 'WebSocket error: ');
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), event.toString());
    };
    /**
     * Handles when the Websocket is closed
     * @param event - Close Event
     */
    WebSocketController.prototype.handleOnClose = function (event) {
        this.onWebSocketOncloseOverlayMessage(event);
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Disconnected to the signalling server via WebSocket: " + JSON.stringify(event.code) + " - " + event.reason, 6);
        this.stopAfkWarningTimer();
    };
    /**
     * An override for stopping the afk warning timer
     */
    WebSocketController.prototype.stopAfkWarningTimer = function () { };
    WebSocketController.prototype.sendWebRtcOffer = function (offer) {
        var payload = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageWebRTCOffer(offer);
        this.webSocket.send(payload.payload());
    };
    /**
     * Sends an RTC Ice Candidate to the Server
     * @param candidate - RTC Ice Candidate
     */
    WebSocketController.prototype.sendIceCandidate = function (candidate) {
        _Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(_Logger_Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(), "Sending Ice Candidate", 6);
        if (this.webSocket && this.webSocket.readyState === this.WS_OPEN_STATE) {
            //ws.send(JSON.stringify({ type: 'iceCandidate', candidate: candidate }));
            var IceCandidate = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageIceCandidate(candidate);
            this.webSocket.send(IceCandidate.payload());
        }
    };
    /**
     * Closes the Websocket connection
     */
    WebSocketController.prototype.close = function () {
        this.webSocket.close();
    };
    /**
     * Sends the Aggregated Stats to the signaling server
     * @param stats - Stats Payload
     */
    WebSocketController.prototype.sendStats = function (stats) {
        var data = new _MessageSend__WEBPACK_IMPORTED_MODULE_2__.MessageStats(stats);
        this.webSocket.send(data.payload());
    };
    /** Event used for Displaying websocket closed messages */
    WebSocketController.prototype.onWebSocketOncloseOverlayMessage = function (event) { };
    /**
     * The Message Contains the payload of the peer connection options used for the RTC Peer hand shake
     * @param messageConfig - Config Message received from he signaling server
     */
    WebSocketController.prototype.onConfig = function (messageConfig) { };
    /**
     * @param iceCandidate - Ice Candidate sent from the Signaling server server's RTC hand shake
     */
    WebSocketController.prototype.onIceCandidate = function (iceCandidate) { };
    /**
     * Event is fired when the websocket receives the answer for the RTC peer Connection
     * @param messageAnswer - The RTC Answer payload from the signaling server
     */
    WebSocketController.prototype.onWebRtcAnswer = function (messageAnswer) { };
    /**
     * Event fired with the websocket receives a instance state
     * @param instanceState - UE Instance State
     */
    WebSocketController.prototype.onInstanceStateChange = function (instanceState) { };
    /**
     * Event fired with the websocket receives a Authentication Response
     * @param authResponse - Authentication Response
     */
    WebSocketController.prototype.onAuthenticationResponse = function (authResponse) { };
    return WebSocketController;
}());

/* 524f4d4d */


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
!function() {
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AfkLogic: function() { return /* reexport safe */ _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_3__.AfkLogic; },
/* harmony export */   AggregatedStats: function() { return /* reexport safe */ _PeerConnectionController_AggregatedStats__WEBPACK_IMPORTED_MODULE_6__.AggregatedStats; },
/* harmony export */   Config: function() { return /* reexport safe */ _Config_Config__WEBPACK_IMPORTED_MODULE_1__.Config; },
/* harmony export */   ControlSchemeType: function() { return /* reexport safe */ _Config_Config__WEBPACK_IMPORTED_MODULE_1__.ControlSchemeType; },
/* harmony export */   DataChannelController: function() { return /* reexport safe */ _DataChannel_DataChannelController__WEBPACK_IMPORTED_MODULE_9__.DataChannelController; },
/* harmony export */   DelegateBase: function() { return /* reexport safe */ _Delegate_DelegateBase__WEBPACK_IMPORTED_MODULE_2__.DelegateBase; },
/* harmony export */   Encoder: function() { return /* reexport safe */ _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__.Encoder; },
/* harmony export */   InitialSettings: function() { return /* reexport safe */ _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__.InitialSettings; },
/* harmony export */   InstanceState: function() { return /* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.InstanceState; },
/* harmony export */   LatencyTestResults: function() { return /* reexport safe */ _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_4__.LatencyTestResults; },
/* harmony export */   Logger: function() { return /* reexport safe */ _Logger_Logger__WEBPACK_IMPORTED_MODULE_8__.Logger; },
/* harmony export */   MessageAuthResponse: function() { return /* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.MessageAuthResponse; },
/* harmony export */   MessageAuthResponseOutcomeType: function() { return /* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.MessageAuthResponseOutcomeType; },
/* harmony export */   MessageInstanceState: function() { return /* reexport safe */ _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__.MessageInstanceState; },
/* harmony export */   WebRTC: function() { return /* reexport safe */ _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__.WebRTC; },
/* harmony export */   version: function() { return /* binding */ version; },
/* harmony export */   webRtcPlayerController: function() { return /* reexport safe */ _WebRtcPlayer_WebRtcPlayerController__WEBPACK_IMPORTED_MODULE_0__.webRtcPlayerController; }
/* harmony export */ });
/* harmony import */ var _WebRtcPlayer_WebRtcPlayerController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebRtcPlayer/WebRtcPlayerController */ "./src/WebRtcPlayer/WebRtcPlayerController.ts");
/* harmony import */ var _Config_Config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Config/Config */ "./src/Config/Config.ts");
/* harmony import */ var _Delegate_DelegateBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Delegate/DelegateBase */ "./src/Delegate/DelegateBase.ts");
/* harmony import */ var _Afk_AfkLogic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Afk/AfkLogic */ "./src/Afk/AfkLogic.ts");
/* harmony import */ var _DataChannel_LatencyTestResults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DataChannel/LatencyTestResults */ "./src/DataChannel/LatencyTestResults.ts");
/* harmony import */ var _DataChannel_InitialSettings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DataChannel/InitialSettings */ "./src/DataChannel/InitialSettings.ts");
/* harmony import */ var _PeerConnectionController_AggregatedStats__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PeerConnectionController/AggregatedStats */ "./src/PeerConnectionController/AggregatedStats.ts");
/* harmony import */ var _WebSockets_MessageReceive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WebSockets/MessageReceive */ "./src/WebSockets/MessageReceive.ts");
/* harmony import */ var _Logger_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Logger/Logger */ "./src/Logger/Logger.ts");
/* harmony import */ var _DataChannel_DataChannelController__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./DataChannel/DataChannelController */ "./src/DataChannel/DataChannelController.ts");










var version = "1.5.1";

}();
/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNILDRDQUFjLEdBQWQsVUFBZSxZQUFpQyxJQUFJLENBQUM7SUFFckQ7OztPQUdHO0lBQ0gsNENBQWMsR0FBZCxVQUFlLGFBQTJDLElBQUksQ0FBQztJQUUvRDs7O09BR0c7SUFDSCxtREFBcUIsR0FBckIsVUFBc0IsYUFBa0QsSUFBSSxDQUFDO0lBRTdFOzs7T0FHRztJQUNILHNEQUF3QixHQUF4QixVQUF5QixZQUFnRCxJQUFJLENBQUM7SUFDbEYsMEJBQUM7QUFBRCxDQUFDOztBQUdELGNBQWM7Ozs7Ozs7VUMxUmQ7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQSw4Q0FBOEM7Ozs7O1dDQTlDO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ044RTtBQUNuQjtBQUVMO0FBT1o7QUFFNEI7QUFDVztBQUNKO0FBQzBEO0FBQzlGO0FBQ21DO0FBRXJFLElBQU0sT0FBTyxHQUFHLE9BQWUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpYnNwc2Zyb250ZW5kL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9BZmsvQWZrTG9naWMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvQ29uZmlnL0NvbmZpZy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRGF0YUNoYW5uZWwvSW5pdGlhbFNldHRpbmdzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0RhdGFDaGFubmVsL0xhdGVuY3lUZXN0UmVzdWx0cy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9EZWxlZ2F0ZS9EZWxlZ2F0ZUJhc2UudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRnJlZXplRnJhbWUvRnJlZXplRnJhbWUudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvRnJlZXplRnJhbWUvRnJlZXplRnJhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9GYWtlVG91Y2hDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9HYW1lcGFkQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9JbnB1dHMvR3lyb0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvSW5wdXRzL0lucHV0Q29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9JbnB1dHMvS2V5Ym9hcmRDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9Nb3VzZUJ1dHRvbnMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvSW5wdXRzL01vdXNlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9JbnB1dHMvU3BlY2lhbEtleUNvZGVzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL0lucHV0cy9Ub3VjaENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvTG9nZ2VyL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9NaWNQbGF5ZXIvTWljQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9DYW5kaWRhdGVQYWlyU3RhdHMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0NhbmRpZGF0ZVN0YXQudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0RhdGFDaGFubmVsU3RhdHMudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0luYm91bmRBdWRpb1N0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9JbmJvdW5kVmlkZW9TdGF0cy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvT3V0Qm91bmRWaWRlb1N0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlci9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL1N0cmVhbVN0YXRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VlSW5zdGFuY2VNZXNzYWdlL1VlQ29udHJvbE1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVEYXRhTWVzc2FnZS50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9VZUluc3RhbmNlTWVzc2FnZS9VZURlc2NyaXB0b3IudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVEZXNjcmlwdG9yVWkudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dEdhbWVQYWRNZXNzYWdlLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VlSW5zdGFuY2VNZXNzYWdlL1VlSW5wdXRLZXlib2FyZE1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dE1vdXNlTWVzc2FnZS50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9VZUluc3RhbmNlTWVzc2FnZS9VZUlucHV0VG91Y2hNZXNzYWdlLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VlSW5zdGFuY2VNZXNzYWdlL1VlTWVzc2FnZVR5cGVzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1VpL1VpQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9WaWRlb1BsYXllci9TdHJlYW1Db250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyTW91c2VIb3ZlckV2ZW50cy50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9WaWRlb1BsYXllci9WaWRlb1BsYXllck1vdXNlTG9ja2VkRXZlbnRzLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1dlYlJ0Y1BsYXllci9XZWJSdGNQbGF5ZXJDb250cm9sbGVyLnRzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kLy4vc3JjL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmUudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvLi9zcmMvV2ViU29ja2V0cy9NZXNzYWdlU2VuZC50cyIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9XZWJTb2NrZXRzL1dlYlNvY2tldENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2xpYnNwc2Zyb250ZW5kL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbGlic3BzZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9saWJzcHNmcm9udGVuZC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJsaWJzcHNmcm9udGVuZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsaWJzcHNmcm9udGVuZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsImltcG9ydCB7IENvbnRyb2xTY2hlbWVUeXBlIH0gZnJvbSBcIi4uL0NvbmZpZy9Db25maWdcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuZXhwb3J0IGNsYXNzIEFma0xvZ2ljIHtcclxuICAgIC8vIHRpbWUgb3V0IGxvZ2ljIGRldGFpbHMgXHJcbiAgICBjb250cm9sU2NoZW1lOiBudW1iZXI7XHJcbiAgICB3YXJuVGltZW91dCA9IDA7XHJcbiAgICBjbG9zZVRpbWVvdXQgPSAxMDtcclxuICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgd2FyblRpbWVyOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiA9IHVuZGVmaW5lZDtcclxuICAgIGNvdW50RG93biA9IDA7XHJcbiAgICBjb3VudERvd25UaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRyb2xTY2hlbWU6IG51bWJlciwgYWZrVGltZW91dDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy53YXJuVGltZW91dCA9IGFma1RpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5jb250cm9sU2NoZW1lID0gY29udHJvbFNjaGVtZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtZXRob2RzIHRoYXQgb2NjdXIgd2hlbiBhbiBhZmsgZXZlbnQgbGlzdGVuZXIgaXMgY2xpY2tlZFxyXG4gICAgICovXHJcbiAgICBvbkFma0NsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50RG93blRpbWVyKTtcclxuICAgICAgICB0aGlzLnN0YXJ0QWZrV2FybmluZ1RpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCB0aGUgd2FybmluZyB0aW1lciBpZiBhIHRpbWVvdXQgaXMgc2V0IGdyZWF0ZXIgdGhhdCAwIHNlY29uZHMgICBcclxuICAgICAqL1xyXG4gICAgc3RhcnRBZmtXYXJuaW5nVGltZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2FyblRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0QWZrV2FybmluZ1RpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIHRoZSBhZmsgd2FybmluZyB0aW1lclxyXG4gICAgICovXHJcbiAgICBzdG9wQWZrV2FybmluZ1RpbWVyKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLndhcm5UaW1lcik7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50RG93blRpbWVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhdXNlIHRoZSB0aW1lciB3aGljaCB3aGVuIGVsYXBzZWQgd2lsbCB3YXJuIHRoZSB1c2VyIHRoZXkgYXJlIGluYWN0aXZlLiAgXHJcbiAgICAgKi9cclxuICAgIHBhdXNlQWZrV2FybmluZ1RpbWVyKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgdXNlciBpbnRlcmFjdHMgdGhlbiByZXNldCB0aGUgd2FybmluZyB0aW1lci4gIFxyXG4gICAgICovXHJcbiAgICByZXNldEFma1dhcm5pbmdUaW1lcigpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud2FyblRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy53YXJuVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYWN0aXZhdGVBZmtFdmVudCgpLCB0aGlzLndhcm5UaW1lb3V0ICogMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyB0aGUgQUZLIG92ZXJsYXkgYW5kIGJlZ2luIHRoZSBjb3VudERvd24gICBcclxuICAgICAqL1xyXG4gICAgYWN0aXZhdGVBZmtFdmVudCgpIHtcclxuICAgICAgICAvLyBQYXVzZSB0aGUgdGltZXIgd2hpbGUgdGhlIHVzZXIgaXMgbG9va2luZyBhdCB0aGUgaW5hY3Rpdml0eSB3YXJuaW5nIG92ZXJsYXlcclxuICAgICAgICB0aGlzLnBhdXNlQWZrV2FybmluZ1RpbWVyKCk7XHJcblxyXG4gICAgICAgIC8vIGluc3RhbnRpYXRlIGEgbmV3IG92ZXJsYXkgXHJcbiAgICAgICAgdGhpcy5zaG93QWZrT3ZlcmxheSgpO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgb3VyIGNvdW50RG93biB0aW1lciBhbmQgb3ZlcmxheSBjb250ZW50c1xyXG4gICAgICAgIHRoaXMuY291bnREb3duID0gdGhpcy5jbG9zZVRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBZmtDb3VudGRvd24oKTtcclxuXHJcbiAgICAgICAgLy8gaWYgd2UgYXJlIGluIGxvY2tlZCBtb3VzZSBleGl0IHBvaW50ZXJsb2NrIFxyXG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xTY2hlbWUgPT0gQ29udHJvbFNjaGVtZVR5cGUuTG9ja2VkTW91c2UpIHtcclxuICAgICAgICAgICAgLy8gbWlub3IgaGFjayB0byBhbGxldmlhdGUgaW9zIG5vdCBzdXBwb3J0aW5nIHBvaW50ZXJsb2NrXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0UG9pbnRlckxvY2spIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZXNldCBvdXIgY291bnREb3duIGludGVydmFsIGFjY29yZGluZ2x5IFxyXG4gICAgICAgIHRoaXMuY291bnREb3duVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnREb3duLS07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50RG93biA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBmYWlsZWQgdG8gY2xpY2sgc28gaGlkZSB0aGUgb3ZlcmxheSBhbmQgZGlzY29ubmVjdCB0aGVtLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIllvdSBoYXZlIGJlZW4gZGlzY29ubmVjdGVkIGR1ZSB0byBpbmFjdGl2aXR5XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVdlYlNvY2tldCgpO1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIllvdSBoYXZlIGJlZW4gZGlzY29ubmVjdGVkIGR1ZSB0byBpbmFjdGl2aXR5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHN3aXRjaCBvZmYgdGhlIGFmayBmZWF0dXJlIGFzIHN0cmVhbSBoYXMgY2xvc2VkIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQWZrV2FybmluZ1RpbWVyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvdW50RG93biBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBZmtDb3VudGRvd24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgbWV0aG9kIGZvciB1cGRhdGluZyB0aGUgYWZrIGNvdW50ZG93biBudW1iZXIgaW4gdGhlIG92ZXJsYXkgXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUFma0NvdW50ZG93bigpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgbWV0aG9kIGZvciBzaG93aW5nIHRoZSBhZmsgb3ZlcmxheSBcclxuICAgICAqL1xyXG4gICAgc2hvd0Fma092ZXJsYXkoKSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIG92ZXJyaWRlIG1ldGhvZCBmb3IgaGlkaW5nIHRoZSBhZmsgb3ZlcmxheSBcclxuICAgICAqL1xyXG4gICAgaGlkZUN1cnJlbnRPdmVybGF5KCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiAgb3ZlcnJpZGUgbWV0aG9kIGZvciBzZXR0aW5nIHRoZSBvdmVycmlkZSBmb3IgdGhlIGRpc2Nvbm5lY3QgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBzZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKG1lc3NhZ2U6IHN0cmluZykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBtZXRob2QgZm9yIGNsb3NpbmcgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGZyb20gdGhlIGNsaWVudHMgc2lkZVxyXG4gICAgICovXHJcbiAgICBjbG9zZVdlYlNvY2tldCgpIHsgfVxyXG59IiwiZXhwb3J0IGNsYXNzIENvbmZpZyB7XHJcblxyXG5cdC8vIFBSRVNFVCBPUFRJT05TXHJcblx0Ly8gZW5hYmxlIHRoZSBhdXRvIGNvbm5lY3Qgb2YgdGhlIHdlYnNvY2tldCBcclxuXHRlbmFibGVTcHNBdXRvQ29ubmVjdCA9IGZhbHNlO1xyXG5cclxuXHQvLyBlbmFibGUgdGhlIGF1dG9wbGF5IG9mIHRoZSB2aWRlbyBpZiBlbmFibGVkIGJ5IGJyb3dzZXJcclxuXHRlbmFibGVTcHNBdXRvcGxheSA9IGZhbHNlO1xyXG5cclxuXHQvLyBzdGFydCB0aGUgdmlkZW8gbXV0ZWRcclxuXHRzdGFydFZpZGVvTXV0ZWQgPSBmYWxzZTtcclxuXHJcblx0aXNJT1MgPSBmYWxzZTtcclxuXHJcblx0Ly8gbW9iaWxlIHVzZXJcclxuXHRpc01vYmlsZSA9IGZhbHNlXHJcblxyXG5cdC8vIHNldCB0aGUgYW1vdW50IG9mIHdhaXQgdGltZSBpbiBzZWNvbmRzIHdoaWxlIHRoZXJlIGlzIGluYWN0aXZpdHkgZm9yIGFmayB0byBvY2N1ciBcclxuXHRhZmtUaW1lb3V0OiBudW1iZXIgPSAxMjA7XHJcblxyXG5cdC8vIFRoZSBjb250cm9sIHNjaGVtZSBjb250cm9scyB0aGUgYmVoYXZpb3VyIG9mIHRoZSBtb3VzZSB3aGVuIGl0IGludGVyYWN0cyB3aXRoIHRoZSBXZWJSVEMgcGxheWVyLlxyXG5cdGNvbnRyb2xTY2hlbWUgPSBDb250cm9sU2NoZW1lVHlwZS5Mb2NrZWRNb3VzZTtcclxuXHJcblx0Ly8gQnJvd3NlciBrZXlzIGFyZSB0aG9zZSB3aGljaCBhcmUgdHlwaWNhbGx5IHVzZWQgYnkgdGhlIGJyb3dzZXIgVUkuIFdlIHVzdWFsbHkgd2FudCB0byBzdXBwcmVzcyB0aGVzZSB0byBhbGxvdywgZm9yIGV4YW1wbGUsIFVFNCB0byBzaG93IHNoYWRlciBjb21wbGV4aXR5IHdpdGggdGhlIEY1IGtleSB3aXRob3V0IHRoZSB3ZWIgcGFnZSByZWZyZXNoaW5nLlxyXG5cdHN1cHByZXNzQnJvd3NlcktleXMgPSB0cnVlO1xyXG5cclxuXHQvLyBVRTQgaGFzIGEgZmFrZSB0b3VjaGVzIG9wdGlvbiB3aGljaCBmYWtlcyBhIHNpbmdsZSBmaW5nZXIgdG91Y2ggd2hlbiB0aGUgdXNlciBkcmFncyB3aXRoIHRoZWlyIG1vdXNlLiBcclxuXHQvLyBXZSBtYXkgcGVyZm9ybSB0aGUgcmV2ZXJzZTsgYSBzaW5nbGUgZmluZ2VyIHRvdWNoIG1heSBiZSBjb252ZXJ0ZWQgaW50byBhIG1vdXNlIGRyYWcgVUU0IHNpZGUuIFRoaXMgYWxsb3dzIGEgbm9uLXRvdWNoIGFwcGxpY2F0aW9uIHRvIGJlIGNvbnRyb2xsZWQgcGFydGlhbGx5IHZpYSBhIHRvdWNoIGRldmljZS5cclxuXHRmYWtlTW91c2VXaXRoVG91Y2hlcyA9IGZhbHNlO1xyXG5cclxuXHQvL2NvbXB1bHNvcnkgb3B0aW9ucyBhbmQgRE9NcyBcclxuXHRzaWduYWxsaW5nU2VydmVyQWRkcmVzczogc3RyaW5nO1xyXG5cdHBsYXllckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuXHQvL3RoaXMgaXMgYSB2aWRlbyBlbGVtZW50IHZhcmlhYmxlIHRvIGJlIGFzc2lnbmVkIHdoZW4gdGhlIHZpZGVvIGVsZW1lbnQgaXMgY3JlYXRlZFxyXG5cdHZpZGVvUGxheWVyRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudDtcclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHNpZ25hbGxpbmdTZXJ2ZXJBZGRyZXNzIC0gdGhlIGFkZHJlc3Mgb2YgdGhlIHNpZ25hbGluZyBzZXJ2ZXIgXHJcblx0ICogQHBhcmFtIHBsYXllckVsZW1lbnQgLSB0aGUgcGxheWVyIGVsZW1lbnQgSUQgXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3Ioc2lnbmFsbGluZ1NlcnZlckFkZHJlc3M6IHN0cmluZywgcGxheWVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQsIGlzTW9iaWxlOiBib29sZWFuID0gZmFsc2UpIHtcclxuXHRcdHRoaXMuc2lnbmFsbGluZ1NlcnZlckFkZHJlc3MgPSBzaWduYWxsaW5nU2VydmVyQWRkcmVzcztcclxuXHRcdHRoaXMucGxheWVyRWxlbWVudCA9IHBsYXllckVsZW1lbnQ7XHJcblx0XHR0aGlzLmlzTW9iaWxlID0gaXNNb2JpbGU7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGVudW0gYXNzb2NpYXRlZCB3aXRoIHRoZSBtb3VzZSBiZWluZyBsb2NrZWQgb3IgaG92ZXJpbmcgXHJcbiAqL1xyXG5leHBvcnQgZW51bSBDb250cm9sU2NoZW1lVHlwZSB7XHJcblx0TG9ja2VkTW91c2UgPSAwLFxyXG5cdEhvdmVyaW5nTW91c2UgPSAxLFxyXG59XHJcbiIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlIGFzIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGVcIjtcclxuaW1wb3J0IHsgSUluaXRpYWxTZXR0aW5ncywgfSBmcm9tIFwiLi9JSW5pdGlhbFNldHRpbmdzXCI7XHJcbmltcG9ydCB7IEluaXRpYWxTZXR0aW5ncywgfSBmcm9tIFwiLi9Jbml0aWFsU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgSUxhdGVuY3lUZXN0UmVzdWx0cyB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9JTGF0ZW5jeVRlc3RSZXN1bHRzXCJcclxuaW1wb3J0IHsgTGF0ZW5jeVRlc3RSZXN1bHRzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0xhdGVuY3lUZXN0UmVzdWx0c1wiXHJcbmltcG9ydCB7IFZpZGVvUGxheWVyIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyXCJcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4uL0NvbmZpZy9Db25maWdcIjtcclxuaW1wb3J0IHsgVWVEZXNjcmlwdG9yVWkgfSBmcm9tIFwiLi4vVWVJbnN0YW5jZU1lc3NhZ2UvVWVEZXNjcmlwdG9yVWlcIjtcclxuXHJcbmNsYXNzIGF0IHtcclxuICAgIHB1YmxpYyBpblJhbmdlOiBhbnk7XHJcbiAgICBwdWJsaWMgeDogYW55O1xyXG4gICAgcHVibGljIHk6IGFueTtcclxuICAgIGNvbnN0cnVjdG9yKGU6IGFueSwgdDogYW55LCBzOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmluUmFuZ2UgPSBlLCB0aGlzLnggPSB0LCB0aGlzLnkgPSBzXHJcbiAgICB9XHJcbn1cclxuY2xhc3MgbHQge1xyXG4gICAgcHVibGljIHg6IGFueTtcclxuICAgIHB1YmxpYyB5OiBhbnk7XHJcbiAgICBjb25zdHJ1Y3RvcihlOiBhbnksIHQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMueCA9IGUsIHRoaXMueSA9IHRcclxuICAgIH1cclxufVxyXG5jbGFzcyBkdCB7XHJcbiAgICBwdWJsaWMgeDogYW55O1xyXG4gICAgcHVibGljIHk6IGFueTtcclxuICAgIGNvbnN0cnVjdG9yKGU6IGFueSwgdDogYW55KSB7XHJcbiAgICAgICAgdGhpcy54ID0gZSwgdGhpcy55ID0gdFxyXG4gICAgfVxyXG59XHJcbmNsYXNzIG90IHtcclxuICAgIHByaXZhdGUgdmlkZW9FbGVtZW50UHJvdmlkZXI6IGFueTtcclxuICAgIHByaXZhdGUgdmlkZW9FbGVtZW50UGFyZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSB2aWRlb0VsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgcmF0aW8gPSAwO1xyXG4gICAgcHJpdmF0ZSBub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkRnVuYzogKGU6IG51bWJlciwgdDogbnVtYmVyKSA9PiBhbnk7XHJcbiAgICBwcml2YXRlIG5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkRnVuYzogKGU6IG51bWJlciwgdDogbnVtYmVyKSA9PiBhbnk7XHJcbiAgICBwcml2YXRlIGRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkRnVuYzogKGU6IG51bWJlciwgdDogbnVtYmVyKSA9PiBhbnk7XHJcbiAgICBjb25zdHJ1Y3RvcihlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyID0gZTtcclxuICAgICAgICB0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRGdW5jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3JtYWxpemUgYW5kIHF1YW50aXplIHVuc2lnbmVkLCBtZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3JtYWxpemUgYW5kIHVucXVhbnRpemUgc2lnbmVkLCBtZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZW5vcm1hbGl6ZSBhbmQgdW5xdWFudGl6ZSB1bnNpZ25lZCwgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGU6IG51bWJlciwgdDogbnVtYmVyKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkRnVuYyhlLCB0KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB1bnF1YW50aXplQW5kRGVub3JtYWxpemVVbnNpZ25lZChlOiBudW1iZXIsIHQ6IG51bWJlcik6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jKGUsIHQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkKGU6IG51bWJlciwgdDogbnVtYmVyKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZEZ1bmMoZSwgdCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0dXBOb3JtYWxpemVBbmRRdWFudGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoKHRoaXMudmlkZW9FbGVtZW50UGFyZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSwgdGhpcy52aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpLCB0aGlzLnZpZGVvRWxlbWVudFBhcmVudCAmJiB0aGlzLnZpZGVvRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudEhlaWdodCAvIHRoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQgLyB0aGlzLnZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xyXG4gICAgICAgICAgICBpZiAoZSA+IHQpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW9cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhdGlvID0gZSAvIHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRGdW5jID0gKGU6IG51bWJlciwgdDogbnVtYmVyKSA9PiB0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRQbGF5ZXJCaWdnZXIoZSwgdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkRnVuYyA9IChlOiBudW1iZXIsIHQ6IG51bWJlcikgPT4gdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZFBsYXllckJpZ2dlcihlLCB0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jID0gKGU6IG51bWJlciwgdDogbnVtYmVyKSA9PiB0aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkUGxheWVyQmlnZ2VyKGUsIHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlNldHVwIE5vcm1hbGl6ZSBhbmQgUXVhbnRpemUgZm9yIHBsYXllckFzcGVjdFJhdGlvIDw9IHZpZGVvQXNwZWN0UmF0aW9cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhdGlvID0gdCAvIGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRGdW5jID0gKGU6IG51bWJlciwgdDogbnVtYmVyKSA9PiB0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRQbGF5ZXJTbWFsbGVyKGUsIHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZEZ1bmMgPSAoZTogbnVtYmVyLCB0OiBudW1iZXIpID0+IHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRQbGF5ZXJTbWFsbGVyKGUsIHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZW5vcm1hbGl6ZUFuZFVucXVhbnRpemVVbnNpZ25lZEZ1bmMgPSAoZTogbnVtYmVyLCB0OiBudW1iZXIpID0+IHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRQbGF5ZXJTbWFsbGVyKGUsIHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkUGxheWVyQmlnZ2VyKGU6IG51bWJlciwgdDogbnVtYmVyKTogYW55IHtcclxuICAgICAgICBjb25zdCBzID0gZSAvIHRoaXMudmlkZW9FbGVtZW50UGFyZW50IS5jbGllbnRXaWR0aDtcclxuICAgICAgICBjb25zdCBuID0gdGhpcy5yYXRpbyAqICh0IC8gdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQhLmNsaWVudEhlaWdodCAtIDAuNSkgKyAwLjU7XHJcbiAgICAgICAgcmV0dXJuIChzIDwgMCB8fCBzID4gMSB8fCBuIDwgMCB8fCBuID4gMSA/IG5ldyBhdCghMSwgNjU1MzUsIDY1NTM1KSA6IG5ldyBhdCghMCwgNjU1MzYgKiBzLCA2NTUzNiAqIG4pKTtcclxuICAgIH1cclxuICAgIGRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkUGxheWVyQmlnZ2VyKGU6IG51bWJlciwgdDogbnVtYmVyKTogbHQge1xyXG4gICAgICAgIGNvbnN0IHM6IG51bWJlciA9IGUgLyA2NTUzNjtcclxuICAgICAgICBjb25zdCBuOiBudW1iZXIgPSAodCAvIDY1NTM2IC0gMC41KSAvIHRoaXMucmF0aW8gKyAwLjU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBsdChzICogdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50V2lkdGgsIG4gKiB0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRQbGF5ZXJCaWdnZXIoZTogbnVtYmVyLCB0OiBudW1iZXIpOiBkdCB7XHJcbiAgICAgICAgY29uc3QgczogbnVtYmVyID0gZSAvICgwLjUgKiB0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCk7XHJcbiAgICAgICAgY29uc3QgbjogbnVtYmVyID0gdGhpcy5yYXRpbyAqIHQgLyAoMC41ICogdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0KTtcclxuICAgICAgICByZXR1cm4gbmV3IGR0KDMyNzY3ICogcywgMzI3NjcgKiBuKTtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRQbGF5ZXJTbWFsbGVyKGU6IG51bWJlciwgdDogbnVtYmVyKTogYXQge1xyXG4gICAgICAgIGNvbnN0IHM6IG51bWJlciA9IHRoaXMucmF0aW8gKiAoZSAvIHRoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudFdpZHRoIC0gMC41KSArIDAuNTtcclxuICAgICAgICBjb25zdCBuOiBudW1iZXIgPSB0IC8gdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiBzIDwgMCB8fCBzID4gMSB8fCBuIDwgMCB8fCBuID4gMSA/IG5ldyBhdChmYWxzZSwgNjU1MzUsIDY1NTM1KSA6IG5ldyBhdCh0cnVlLCA2NTUzNiAqIHMsIDY1NTM2ICogbik7XHJcbiAgICB9XHJcbiAgICBkZW5vcm1hbGl6ZUFuZFVucXVhbnRpemVVbnNpZ25lZFBsYXllclNtYWxsZXIoZTogbnVtYmVyLCB0OiBudW1iZXIpOiBsdCB7XHJcbiAgICAgICAgY29uc3QgczogbnVtYmVyID0gKGUgLyA2NTUzNiAtIDAuNSkgLyB0aGlzLnJhdGlvICsgMC41O1xyXG4gICAgICAgIGNvbnN0IG46IG51bWJlciA9IHQgLyA2NTUzNjtcclxuICAgICAgICByZXR1cm4gbmV3IGx0KHMgKiB0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCwgbiAqIHRoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudEhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZFBsYXllclNtYWxsZXIoZTogbnVtYmVyLCB0OiBudW1iZXIpOiBkdCB7XHJcbiAgICAgICAgY29uc3QgczogbnVtYmVyID0gdGhpcy5yYXRpbyAqIGUgLyAoMC41ICogdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50V2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IG46IG51bWJlciA9IHQgLyAoMC41ICogdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0KTtcclxuICAgICAgICByZXR1cm4gbmV3IGR0KDMyNzY3ICogcywgMzI3NjcgKiBuKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIFNlbmRpbmcgYW5kIFJlY2VpdmluZyBvZiBtZXNzYWdlcyB0byB0aGUgVUUgSW5zdGFuY2UgdmlhIHRoZSBEYXRhIENoYW5uZWxcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIge1xyXG4gICAgZGF0YUNoYW5uZWw6IFJUQ0RhdGFDaGFubmVsO1xyXG4gICAgcGVlckNvbm5lY3Rpb246IFJUQ1BlZXJDb25uZWN0aW9uO1xyXG4gICAgZGF0YWNoYW5uZWxPcHRpb25zOiBSVENEYXRhQ2hhbm5lbEluaXQ7XHJcbiAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgaXNSZWNlaXZpbmdGcmVlemVGcmFtZSA9IGZhbHNlO1xyXG4gICAgdWVEZXNjcmlwdG9yVWk6IFVlRGVzY3JpcHRvclVpO1xyXG5cclxuICAgIC8vIElmIHRoZSB1c2VyIGZvY3VzZXMgb24gYSBVRSBpbnB1dCB3aWRnZXQgdGhlbiB3ZSBzaG93IHRoZW0gYSBidXR0b24gdG8gb3BlblxyXG4gICAgLy8gdGhlIG9uLXNjcmVlbiBrZXlib2FyZC4gSmF2YVNjcmlwdCBzZWN1cml0eSBtZWFucyB3ZSBjYW4gb25seSBzaG93IHRoZVxyXG4gICAgLy8gb24tc2NyZWVuIGtleWJvYXJkIGluIHJlc3BvbnNlIHRvIGEgdXNlciBpbnRlcmFjdGlvbi5cclxuICAgIHN0YXRpYyBlZGl0VGV4dEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgLy8gQSBoaWRkZW4gaW5wdXQgdGV4dCBib3ggd2hpY2ggaXMgdXNlZCBvbmx5IGZvciBmb2N1c2luZyBhbmQgb3BlbmluZyB0aGVcclxuICAgIC8vIG9uLXNjcmVlbiBrZXlib2FyZC5cclxuICAgIHN0YXRpYyBoaWRkZW5JbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBzdGF0aWMgY29vcmRpbmF0ZUNvbnZlcnRlcjogb3Q7XHJcbiAgICBpc0lPUzogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2aWRlb0VsZW1lbnQ6IFZpZGVvUGxheWVyLCBjb25maWc6IENvbmZpZykge1xyXG4gICAgICBEYXRhQ2hhbm5lbENvbnRyb2xsZXIuY29vcmRpbmF0ZUNvbnZlcnRlciA9IG5ldyBvdCh2aWRlb0VsZW1lbnQpO1xyXG4gICAgICB0aGlzLmlzSU9TID0gY29uZmlnLmlzSU9TO1xyXG4gICAgfVxyXG5cclxuICAgIGZvY3VzQW5kT3BlbktleWJvYXJkKGVsOiBIVE1MRWxlbWVudCwgdGltZW91dD86ICBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRpbWVvdXQpIHtcclxuICAgICAgICAgICAgdGltZW91dCA9IDEwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICAgIC8vIEFsaWduIHRlbXAgaW5wdXQgZWxlbWVudCBhcHByb3hpbWF0ZWx5IHdoZXJlIHRoZSBpbnB1dCBlbGVtZW50IGlzXHJcbiAgICAgICAgICAgIC8vIHNvIHRoZSBjdXJzb3IgZG9lc24ndCBqdW1wIGFyb3VuZFxyXG4gICAgICAgICAgICBjb25zdCBfX3RlbXBFbF9fOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgX190ZW1wRWxfXy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgIF9fdGVtcEVsX18uc3R5bGUudG9wID0gYCR7ZWwub2Zmc2V0VG9wICsgN31weGA7XHJcbiAgICAgICAgICAgIF9fdGVtcEVsX18uc3R5bGUubGVmdCA9IGAke2VsLm9mZnNldExlZnR9cHhgO1xyXG4gICAgICAgICAgICBfX3RlbXBFbF9fLnN0eWxlLmhlaWdodCA9ICcwJztcclxuICAgICAgICAgICAgX190ZW1wRWxfXy5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gICAgICAgICAgICAvLyBQdXQgdGhpcyB0ZW1wIGVsZW1lbnQgYXMgYSBjaGlsZCBvZiB0aGUgcGFnZSA8Ym9keT4gYW5kIGZvY3VzIG9uIGl0XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX190ZW1wRWxfXyk7XHJcbiAgICAgICAgICAgIF9fdGVtcEVsX18uZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBrZXlib2FyZCBpcyBvcGVuLiBOb3cgZG8gYSBkZWxheWVkIGZvY3VzIG9uIHRoZSB0YXJnZXQgZWxlbWVudFxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWwuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIGVsLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRlbXAgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChfX3RlbXBFbF9fKTtcclxuICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVG8gQ3JlYXRlIGFuZCBTZXQgdXAgYSBEYXRhIENoYW5uZWxcclxuICAgICAqIEBwYXJhbSBwZWVyQ29ubmVjdGlvbiAtIFRoZSBSVEMgUGVlciBDb25uZWN0aW9uXHJcbiAgICAgKiBAcGFyYW0gbGFiZWwgLSBMYWJlbCBvZiB0aGUgRGF0YSBDaGFubmVsXHJcbiAgICAgKiBAcGFyYW0gZGF0YWNoYW5uZWxPcHRpb25zIC0gT3B0aW9uYWwgUlRDIERhdGFDaGFubmVsIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY3JlYXRlRGF0YUNoYW5uZWwocGVlckNvbm5lY3Rpb246IFJUQ1BlZXJDb25uZWN0aW9uLCBsYWJlbDogc3RyaW5nLCBkYXRhY2hhbm5lbE9wdGlvbnM/OiBSVENEYXRhQ2hhbm5lbEluaXQpIHtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uID0gcGVlckNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgIHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zID0gZGF0YWNoYW5uZWxPcHRpb25zO1xyXG4gICAgICAgIGlmIChkYXRhY2hhbm5lbE9wdGlvbnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFjaGFubmVsT3B0aW9ucyA9IHt9IGFzIFJUQ0RhdGFDaGFubmVsSW5pdFxyXG4gICAgICAgICAgICB0aGlzLmRhdGFjaGFubmVsT3B0aW9ucy5vcmRlcmVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwgPSB0aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMubGFiZWwsIHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zKTtcclxuICAgICAgICAvL1dlIFdhbnQgYW4gQXJyYXkgQnVmZmVyIG5vdCBhIGJsb2JcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsLmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbm9wZW4gPSAoKSA9PiB0aGlzLmhhbmRsZU9uT3BlbigpO1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwub25jbG9zZSA9ICgpID0+IHRoaXMuaGFuZGxlT25DbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwub25tZXNzYWdlID0gKGV2OiBNZXNzYWdlRXZlbnQ8YW55PikgPT4geyB0aGlzLmhhbmRsZU9uTWVzc2FnZShldik7IH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gdGhlIERhdGEgQ2hhbm5lbCBpcyBvcGVuZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25PcGVuKCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhIENoYW5uZWw6IFwiICsgdGhpcy5sYWJlbCArIFwiIGlzIG9wZW5lZC5cIiwgNyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gdGhlIERhdGEgQ2hhbm5lbCBpcyBjbG9zZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25DbG9zZSgpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YSBDaGFubmVsOiBcIiArIHRoaXMubGFiZWwgKyBcIiBpcyBjbG9zZWQuXCIsIDcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZCBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1lc3NhZ2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25NZXNzYWdlKGV2ZW50OiBNZXNzYWdlRXZlbnQpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KGV2ZW50LmRhdGEpO1xyXG5cclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWVzc2FnZSBpbmNvbWluZ1wiLCA2KTtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWVzc2FnZTpcIiArIG1lc3NhZ2UsIDYpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2VbMF0pIHtcclxuICAgICAgICAgICAgY2FzZSBEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5RdWFsaXR5Q29udHJvbE93bmVyc2hpcDoge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlF1YWxpdHlDb250cm9sT3duZXJzaGlwXCIsIDYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IFF1YWxpdHlPd25lcnNoaXAgPSBuZXcgQm9vbGVhbihtZXNzYWdlWzFdKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoUXVhbGl0eU93bmVyc2hpcCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlJlc3BvbnNlOiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuUmVzcG9uc2VcIiwgNik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVzcG9uc2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkNvbW1hbmQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5Db21tYW5kXCIsIDYpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbW1hbmQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkZyZWV6ZUZyYW1lOiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuRnJlZXplRnJhbWVcIiwgNik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGcmVlemVGcmFtZU1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlVuZnJlZXplRnJhbWU6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5GcmVlemVGcmFtZVwiLCA2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNSZWNlaXZpbmdGcmVlemVGcmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVuRnJlZXplRnJhbWUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuVmlkZW9FbmNvZGVyQXZnUVA6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5WaWRlb0VuY29kZXJBdmdRUFwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBBdmdRUCA9IE51bWJlcihuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25WaWRlb0VuY29kZXJBdmdRUChBdmdRUCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLmxhdGVuY3lUZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUubGF0ZW5jeVRlc3RcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGF0ZW5jeUFzU3RyaW5nID0gbmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShtZXNzYWdlLnNsaWNlKDEpKTtcclxuICAgICAgICAgICAgICAgIGxldCBpTGF0ZW5jeVRlc3RSZXN1bHRzOiBJTGF0ZW5jeVRlc3RSZXN1bHRzID0gSlNPTi5wYXJzZShsYXRlbmN5QXNTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhdGVuY3lUZXN0UmVzdWx0czogTGF0ZW5jeVRlc3RSZXN1bHRzID0gbmV3IExhdGVuY3lUZXN0UmVzdWx0cygpO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihsYXRlbmN5VGVzdFJlc3VsdHMsIGlMYXRlbmN5VGVzdFJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgbGF0ZW5jeVRlc3RSZXN1bHRzLnByb2Nlc3NGaWVsZHMoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkxhdGVuY3lUZXN0UmVzdWx0KGxhdGVuY3lUZXN0UmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkluaXRpYWxTZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkluaXRpYWxTZXR0aW5nc1wiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkQXNTdHJpbmcgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlJbml0aWFsU2V0dGluZ3M6IElJbml0aWFsU2V0dGluZ3MgPSBKU09OLnBhcnNlKHBheWxvYWRBc1N0cmluZyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbFNldHRpbmdzOiBJbml0aWFsU2V0dGluZ3MgPSBuZXcgSW5pdGlhbFNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGluaXRpYWxTZXR0aW5ncywgaUluaXRpYWxTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsU2V0dGluZ3MudWVDb21wYXRpYmxlKClcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgcGF5bG9hZEFzU3RyaW5nLCA2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuT25Jbml0aWFsU2V0dGluZ3MoaW5pdGlhbFNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIC8vTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBtZXNzYWdlWzBdLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgLy9Mb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJ1bmtub3duIG1lc3NhZ2Ugc2VudCBvbiB0aGUgRGF0YSBjaGFubmVsXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlZCB3aGVuIGEgUmVzcG9uc2UgbWVzc2FnZSBpcyBzZW50IGZyb20gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIE1lc3NhZ2UgRGF0YSBVaW50OEFycmF5XHJcbiAgICAgKi9cclxuICAgIG9uUmVzcG9uc2UobWVzc2FnZTogVWludDhBcnJheSkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5SZXNwb25zZVwiLCA2KTtcclxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKG1lc3NhZ2Uuc2xpY2UoMSkpO1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgcmVzcG9uc2UsIDYpO1xyXG4gICAgICAgIC8vIGFkZCB0byByZXNwb25zZSBoYW5kbGVycyBcclxuXHQvKmZvciAobGV0IGxpc3RlbmVyIG9mIHJlc3BvbnNlRXZlbnRMaXN0ZW5lcnMudmFsdWVzKCkpIHtcclxuXHRcdGxpc3RlbmVyKHJlc3BvbnNlKTtcclxuXHR9Ki9cclxuXHJcblx0Y29uc3QgdCA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG5cdGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHRpZiAodC5uYW1lID09ICdzZWxlY3RlZFRleHQnKSB7XHJcblx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0LmRhdGEpO1xyXG5cdH1cclxuXHRpZiAodC5jb21tYW5kID09ICdKb2luIFNlc3Npb24nKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIkpvaW4gU2Vzc2lvblwiKTtcclxuXHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFVpSW50ZXJhY3Rpb24oSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcIlBhc3N3b3JkXCI6IFwiUGFsYXRpYWxcIixcclxuXHRcdFx0XCJJUFwiOiBcInBhbGF0aWFsLnRlbmFudC1wYWxhdGlhbC1wbGF0Zm9ybS5jb3Jld2VhdmUuY2xvdWQ6MjIyMlwiXHJcblx0XHR9KSk7XHJcblx0fVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZWQgd2hlbiBhIENvbW1hbmQgbWVzc2FnZSBpcyBzZW50IGZyb20gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIE1lc3NhZ2UgRGF0YSBVaW50OEFycmF5XHJcbiAgICAgKi9cclxuICAgIG9uQ29tbWFuZChtZXNzYWdlOiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkNvbW1hbmRcIiwgNik7XHJcbiAgICAgICAgbGV0IGNvbW1hbmRBc1N0cmluZyA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNlwiKS5kZWNvZGUobWVzc2FnZS5zbGljZSgxKSk7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGEgQ2hhbm5lbCBDb21tYW5kOiBcIiArIGNvbW1hbmRBc1N0cmluZywgNik7XHJcbiAgICAgICAgbGV0IGNvbW1hbmQ6IGFueSA9IEpTT04ucGFyc2UoY29tbWFuZEFzU3RyaW5nKTtcclxuICAgICAgICBpZiAoY29tbWFuZC5jb21tYW5kID09PSBcIm9uU2NyZWVuS2V5Ym9hcmRcIikge1xyXG4gICAgICAgICAgICAvL3Nob3cgb24gc2NyZWVuIEtleWJvYXJkXHJcblx0ICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJTaG93IG9uIHNjcmVlbiBrZXlib2FyZDogXCIgKyBjb21tYW5kQXNTdHJpbmcsIDYpO1xyXG5cdCAgICB0aGlzLnNob3dPblNjcmVlbktleWJvYXJkKGNvbW1hbmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93T25TY3JlZW5LZXlib2FyZChjb21tYW5kOiBhbnkpIHtcclxuXHRsZXQgaGlkZGVuSW5wdXQgPSBEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGlkZGVuSW5wdXQ7XHJcbiAgICAgICAgaWYgKGNvbW1hbmQuc2hvd09uU2NyZWVuS2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgaWYgKHRydWUpIHsgLy8gdGhpcy5pc0lPU1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgJ2VkaXQgdGV4dCcgYnV0dG9uLlxyXG4gICAgICAgICAgICAgICAgRGF0YUNoYW5uZWxDb250cm9sbGVyLmVkaXRUZXh0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlblN0YXRlJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBQbGFjZSB0aGUgJ2VkaXQgdGV4dCcgYnV0dG9uIG5lYXIgdGhlIFVFIGlucHV0IHdpZGdldC5cclxuICAgICAgICAgICAgICAgIGxldCBwb3MgPSBEYXRhQ2hhbm5lbENvbnRyb2xsZXIuY29vcmRpbmF0ZUNvbnZlcnRlci51bnF1YW50aXplQW5kRGVub3JtYWxpemVVbnNpZ25lZChjb21tYW5kLngsIGNvbW1hbmQueSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zLnggIT0gMCAmJiBwb3MueSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YUNoYW5uZWxDb250cm9sbGVyLmVkaXRUZXh0QnV0dG9uLnN0eWxlLnRvcCA9IHBvcy55LnRvU3RyaW5nKCkgKyAncHgnO1xyXG5cdFx0ICAgIERhdGFDaGFubmVsQ29udHJvbGxlci5lZGl0VGV4dEJ1dHRvbi5zdHlsZS5sZWZ0ID0gKHBvcy54IC0gNDApLnRvU3RyaW5nKCkgKyAncHgnO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgLy90aGlzLmZvY3VzQW5kT3BlbktleWJvYXJkKERhdGFDaGFubmVsQ29udHJvbGxlci5oaWRkZW5JbnB1dCk7XHJcblx0ICAgICAgICBEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGlkZGVuSW5wdXQuZm9jdXMoKTtcclxuXHQgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEhpZGUgdGhlICdlZGl0IHRleHQnIGJ1dHRvbi5cclxuICAgICAgICAgICAgRGF0YUNoYW5uZWxDb250cm9sbGVyLmVkaXRUZXh0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlblN0YXRlJyk7XHJcbiAgICAgICAgICAgIC8vIEhpZGUgdGhlIG9uLXNjcmVlbiBrZXlib2FyZC5cclxuICAgICAgICAgICAgRGF0YUNoYW5uZWxDb250cm9sbGVyLmhpZGRlbklucHV0LmJsdXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIERhdGEgb3ZlciB0aGUgRGF0YSBjaGFubmVsIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIGRhdGEgLSBNZXNzYWdlIERhdGEgQXJyYXkgQnVmZmVyXHJcbiAgICAgKi9cclxuICAgIHNlbmREYXRhKGRhdGE6IEFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgLy8gcmVzZXQgdGhlIGFmayBpbmFjdGl2aXR5XHJcbiAgICAgICAgdGhpcy5yZXNldEFma1dhcm5pbmdUaW1lck9uRGF0YVNlbmQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YUNoYW5uZWwgJiYgdGhpcy5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09IFwib3BlblwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuc2VuZChkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJNZXNzYWdlIEZhaWxlZDogXCIgKyBuZXcgVWludDhBcnJheShkYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZWQgd2hlbiB0aGUgVUUgSW5zdGFuY2UgdXBkYXRlcyB3aG8gaGFzIFF1YWxpdHkgT3duZXJzaGlwXHJcbiAgICAgKiBAcGFyYW0gaGFzUXVhbGl0eU93bmVyc2hpcCAtIERvZXMgdGhlIGNsaWVudCBoYXZlIFF1YWxpdHkgT3duZXJzaGlwXHJcbiAgICAgKi9cclxuICAgIG9uUXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoaGFzUXVhbGl0eU93bmVyc2hpcDogYm9vbGVhbikgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBVRSBJbnN0YW5jZSBzZW5kcyBmcmVlemUgZnJhbWUgZGF0YVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBGcmVlemUgRnJhbWUgRGF0YVxyXG4gICAgICovXHJcbiAgICBwcm9jZXNzRnJlZXplRnJhbWVNZXNzYWdlKG1lc3NhZ2U6IFVpbnQ4QXJyYXkpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZWQgd2hlbiB0aGUgVUUgSW5zdGFuY2Ugc2VuZHMgYSB1biBGcmVlemUgRnJhbWVcclxuICAgICAqL1xyXG4gICAgb25VbkZyZWV6ZUZyYW1lKCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBVRSBJbnN0YW5jZSBzZW5kcyB0aGUgVmlkZW8gRW5jb2RlciBBdmcgUVBcclxuICAgICAqIEBwYXJhbSBBdmdRUCAtIEF2ZyBRUFxyXG4gICAgICovXHJcbiAgICBvblZpZGVvRW5jb2RlckF2Z1FQKEF2Z1FQOiBudW1iZXIpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZWQgd2hlbiB0aGUgVUUgSW5zdGFuY2Ugc2VuZHMgTGF0ZW5jeSB0ZXN0IFJlc3VsdHNcclxuICAgICAqIEBwYXJhbSBsYXRlbmN5VGVzdFJlc3VsdHMgLSBMYXRlbmN5IFRlc3QgUmVzdWx0c1xyXG4gICAgICovXHJcbiAgICBvbkxhdGVuY3lUZXN0UmVzdWx0KGxhdGVuY3lUZXN0UmVzdWx0czogTGF0ZW5jeVRlc3RSZXN1bHRzKSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gdGhlIFVFIEluc3RhbmNlIHNlbmRzIEluaXRpYWwgU2V0dGluZ3NcclxuICAgICAqIEBwYXJhbSBJbml0aWFsU2V0dGluZ3MgLSBJbml0aWFsIFNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIE9uSW5pdGlhbFNldHRpbmdzKEluaXRpYWxTZXR0aW5nczogSW5pdGlhbFNldHRpbmdzKSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIG92ZXJyaWRlIG1ldGhvZCBmb3IgcmVzZXR0aW5nIHRoZSBBZmsgd2FybmluZyB0aW1lciB3aGVuIGRhdGEgaXMgc2VudCBvdmVyIHRoZSBkYXRhIGNoYW5uZWwgXHJcbiAgICAgKi9cclxuICAgIHJlc2V0QWZrV2FybmluZ1RpbWVyT25EYXRhU2VuZCgpIHsgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbmNlQ29tbWFuZCB7XHJcbiAgICBjb21tYW5kOiBzdHJpbmc7XHJcbn1cclxuIiwiLyoqXHJcbiAqIERhdGEgQ2hhbm5lbCBSZWNlaXZlcyBNZXNzYWdlIFR5cGVcclxuICovXHJcbmV4cG9ydCBlbnVtIERhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlIHtcclxuXHRRdWFsaXR5Q29udHJvbE93bmVyc2hpcCA9IDAsXHJcblx0UmVzcG9uc2UgPSAxLFxyXG5cdENvbW1hbmQgPSAyLFxyXG5cdEZyZWV6ZUZyYW1lID0gMyxcclxuXHRVbmZyZWV6ZUZyYW1lID0gNCxcclxuXHRWaWRlb0VuY29kZXJBdmdRUCA9IDUsXHJcblx0bGF0ZW5jeVRlc3QgPSA2LFxyXG5cdEluaXRpYWxTZXR0aW5ncyA9IDdcclxufSIsImltcG9ydCB7IElFbmNvZGVyLCBJSW5pdGlhbFNldHRpbmdzLCBJUGl4ZWxTdHJlYW1pbmcsIElXZWJSVEMgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvSUluaXRpYWxTZXR0aW5nc1wiXHJcblxyXG4vKipcclxuICogTGF0ZW5jeSBUZXN0IFJlc3VsdHMgRGF0YVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluaXRpYWxTZXR0aW5ncyBpbXBsZW1lbnRzIElJbml0aWFsU2V0dGluZ3Mge1xyXG5cclxuICAgIFBpeGVsU3RyZWFtaW5nPzogSVBpeGVsU3RyZWFtaW5nO1xyXG4gICAgRW5jb2Rlcj86IElFbmNvZGVyO1xyXG4gICAgV2ViUlRDPzogSVdlYlJUQztcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLlBpeGVsU3RyZWFtaW5nID0gbmV3IFBpeGVsU3RyZWFtaW5nKClcclxuICAgICAgICB0aGlzLkVuY29kZXIgPSBuZXcgRW5jb2RlcigpXHJcbiAgICAgICAgdGhpcy5XZWJSVEMgPSBuZXcgV2ViUlRDKClcclxuICAgIH1cclxuXHJcbiAgICB1ZUNvbXBhdGlibGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuV2ViUlRDLk1heEZQUyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuV2ViUlRDLkZQUyA9IHRoaXMuV2ViUlRDLk1heEZQU1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFBpeGVsU3RyZWFtaW5nIGltcGxlbWVudHMgSVBpeGVsU3RyZWFtaW5nIHtcclxuICAgIEFsbG93UGl4ZWxTdHJlYW1pbmdDb21tYW5kcz86IGJvb2xlYW47XHJcbiAgICBEaXNhYmxlTGF0ZW5jeVRlc3Q/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW5jb2RlciBpbXBsZW1lbnRzIElFbmNvZGVyIHtcclxuICAgIFRhcmdldEJpdHJhdGU/OiBudW1iZXI7XHJcbiAgICBNYXhCaXRyYXRlPzogbnVtYmVyO1xyXG4gICAgTWluUVA/OiBudW1iZXI7XHJcbiAgICBNYXhRUD86IG51bWJlcjtcclxuICAgIFJhdGVDb250cm9sPzogXCJDQlJcIiB8IFwiVkJSXCIgfCBcIkNvbnN0UVBcIjtcclxuICAgIEZpbGxlckRhdGE/OiBib29sZWFuO1xyXG4gICAgTXVsdGlQYXNzPzogXCJESVNBQkxFRFwiIHwgXCJRVUFSVEVSXCIgfCBcIkZVTExcIjtcclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2ViUlRDIGltcGxlbWVudHMgSVdlYlJUQyB7XHJcbiAgICBEZWdyYWRhdGlvblByZWY/OiBcIkJBTEFOQ0VEXCIgfCBcIk1BSU5UQUlOX0ZSQU1FUkFURVwiIHwgXCJNQUlOVEFJTl9SRVNPTFVUSU9OXCI7XHJcbiAgICBNaW5CaXRyYXRlPzogbnVtYmVyO1xyXG4gICAgTWF4Qml0cmF0ZT86IG51bWJlcjtcclxuICAgIExvd1FQPzogbnVtYmVyO1xyXG4gICAgSGlnaFFQPzogbnVtYmVyO1xyXG4gICAgLy8gVUU0LjI3IGNvbXBhdGlibGVcclxuICAgIE1heEZQUz86IG51bWJlcjtcclxuICAgIC8vIFVFNSBjb21wYXRpYmxlXHJcbiAgICBGUFM/OiBudW1iZXI7XHJcblxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBJTGF0ZW5jeVRlc3RSZXN1bHRzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0lMYXRlbmN5VGVzdFJlc3VsdHNcIlxyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG4vKipcclxuICogTGF0ZW5jeSBUZXN0IFJlc3VsdHMgRGF0YVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIExhdGVuY3lUZXN0UmVzdWx0cyBpbXBsZW1lbnRzIElMYXRlbmN5VGVzdFJlc3VsdHMge1xyXG4gICAgLy9GaWVsZHMgU2V0IGZyb20gdGhlIGxhdGVuY3kgcGF5bG9hZCByZWdhcmRsZXNzIG9mIHZlcnNpb25cclxuICAgIFJlY2VpcHRUaW1lTXM6IG51bWJlciA9IG51bGw7XHJcbiAgICBUcmFuc21pc3Npb25UaW1lTXM6IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgLy9GaWVsZHMgU2V0IGZyb20gdGhlIGxhdGVuY3kgcGF5bG9hZCBmcm9tIDQuMjcuMlxyXG4gICAgUHJlQ2FwdHVyZVRpbWVNczogbnVtYmVyID0gbnVsbDtcclxuICAgIFBvc3RDYXB0dXJlVGltZU1zOiBudW1iZXIgPSBudWxsO1xyXG4gICAgUHJlRW5jb2RlVGltZU1zOiBudW1iZXIgPSBudWxsO1xyXG4gICAgUG9zdEVuY29kZVRpbWVNczogbnVtYmVyID0gbnVsbDtcclxuXHJcbiAgICAvL0ZpZWxkcyBTZXQgZnJvbSB0aGUgbGF0ZW5jeSBwYXlsb2FkIGZyb20gNS4wXHJcbiAgICBFbmNvZGVNczogbnVtYmVyID0gbnVsbDtcclxuICAgIENhcHR1cmVUb1NlbmRNczogbnVtYmVyID0gbnVsbDtcclxuXHJcblxyXG4gICAgLy9GaWVsZHMgU2V0IHdoZW4gcHJvY2Vzc2VkXHJcbiAgICB0ZXN0U3RhcnRUaW1lTXM6IG51bWJlciA9IDA7XHJcbiAgICBicm93c2VyUmVjZWlwdFRpbWVNczogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvL0ZpZWxkcyBzZXQgZnJvbSBjYWxjdWxhdGlvbnNcclxuICAgIGxhdGVuY3lFeGNsdWRpbmdEZWNvZGU6IG51bWJlciA9IDA7XHJcbiAgICB0ZXN0RHVyYXRpb246IG51bWJlciA9IDA7XHJcbiAgICAvL3VlTGF0ZW5jeTogbnVtYmVyID0gMDtcclxuICAgIG5ldHdvcmtMYXRlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgYnJvd3NlclNlbmRMYXRlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXM6IG51bWJlciA9IDA7XHJcbiAgICBlbmRUb0VuZExhdGVuY3k6IG51bWJlciA9IDA7XHJcbiAgICAvL3VlUGl4ZWxTdHJlYW1MYXRlbmN5OiBudW1iZXIgPSAwO1xyXG4gICAgZW5jb2RlTGF0ZW5jeTogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIERlbHRhIFRpbWUgTWlsbGlzZWNvbmRzXHJcbiAgICAgKiBAcGFyYW0gRGVsdGFUaW1lTXMgLSBEZWx0YSBUaW1lIE1pbGxpc2Vjb25kc1xyXG4gICAgICovXHJcbiAgICBzZXRGcmFtZURpc3BsYXlEZWx0YVRpbWUoRGVsdGFUaW1lTXM6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcyA9IE1hdGgucm91bmQoRGVsdGFUaW1lTXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzRmllbGRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLkVuY29kZU1zID09IG51bGwgJiYgKHRoaXMuUHJlRW5jb2RlVGltZU1zICE9IG51bGwgfHwgdGhpcy5Qb3N0RW5jb2RlVGltZU1zICE9IG51bGwpKSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYFNldHRpbmcgRW5jb2RlIE1zIFxcbiAke3RoaXMuUG9zdEVuY29kZVRpbWVNc30gXFxuICR7dGhpcy5QcmVFbmNvZGVUaW1lTXN9YCwgNik7XHJcbiAgICAgICAgICAgIHRoaXMuRW5jb2RlTXMgPSB0aGlzLlBvc3RFbmNvZGVUaW1lTXMgLSB0aGlzLlByZUVuY29kZVRpbWVNc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuQ2FwdHVyZVRvU2VuZE1zID09IG51bGwgJiYgKHRoaXMuUHJlQ2FwdHVyZVRpbWVNcyAhPSBudWxsIHx8IHRoaXMuUG9zdENhcHR1cmVUaW1lTXMgIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgU2V0dGluZyBDYXB0dXJlVG9TZW5kTXMgTXMgXFxuICR7dGhpcy5Qb3N0Q2FwdHVyZVRpbWVNc30gXFxuICR7dGhpcy5QcmVDYXB0dXJlVGltZU1zfWAsIDYpO1xyXG4gICAgICAgICAgICB0aGlzLkNhcHR1cmVUb1NlbmRNcyA9IHRoaXMuUG9zdENhcHR1cmVUaW1lTXMgLSB0aGlzLlByZUNhcHR1cmVUaW1lTXNcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBJRGVsZWdhdGUgfSBmcm9tIFwiLi9JRGVsZWdhdGVcIjtcclxuaW1wb3J0IHsgSW5pdGlhbFNldHRpbmdzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0luaXRpYWxTZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBMYXRlbmN5VGVzdFJlc3VsdHMgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvTGF0ZW5jeVRlc3RSZXN1bHRzXCJcclxuaW1wb3J0IHsgSUFjdGlvbk92ZXJsYXkgfSBmcm9tIFwiLi4vT3ZlcmxheS9JQWN0aW9uT3ZlcmxheVwiO1xyXG5pbXBvcnQgeyBJQWZrT3ZlcmxheSB9IGZyb20gXCIuLi9PdmVybGF5L0lBZmtPdmVybGF5XCI7XHJcbmltcG9ydCB7IElPdmVybGF5IH0gZnJvbSBcIi4uL092ZXJsYXkvSU92ZXJsYXlcIjtcclxuaW1wb3J0IHsgSVRleHRPdmVybGF5IH0gZnJvbSBcIi4uL092ZXJsYXkvSVRleHRPdmVybGF5XCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCB7IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSBcIi4uL1dlYlJ0Y1BsYXllci9JV2ViUnRjUGxheWVyQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlSW5zdGFuY2VTdGF0ZSwgTWVzc2FnZUF1dGhSZXNwb25zZSB9IGZyb20gJy4uL1dlYlNvY2tldHMvTWVzc2FnZVJlY2VpdmUnO1xyXG5cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGNvbW1vbiBiYXNlIGZ1bmN0aW9uYWxpdHkgZm9yIGRlbGVnYXRlcyB0aGF0IGltcGxlbWVudCB0aGUgSURlbGVnYXRlIGludGVyZmFjZVxyXG4qL1xyXG5leHBvcnQgY2xhc3MgRGVsZWdhdGVCYXNlIGltcGxlbWVudHMgSURlbGVnYXRlIHtcclxuXHRwdWJsaWMgaVdlYlJ0Y0NvbnRyb2xsZXI6IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyO1xyXG5cdHB1YmxpYyBjb25maWc6IENvbmZpZztcclxuXHRzaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdC8vIHNldCB0aGUgb3ZlcmxheSBwbGFjZWhvbGRlcnMgXHJcblx0Y3VycmVudE92ZXJsYXk6IElPdmVybGF5O1xyXG5cdGRpc2Nvbm5lY3RPdmVybGF5OiBJQWN0aW9uT3ZlcmxheTtcclxuXHRjb25uZWN0T3ZlcmxheTogSUFjdGlvbk92ZXJsYXk7XHJcblx0cGxheU92ZXJsYXk6IElBY3Rpb25PdmVybGF5O1xyXG5cdGFma092ZXJsYXk6IElBZmtPdmVybGF5O1xyXG5cdGluZm9PdmVybGF5OiBJVGV4dE92ZXJsYXk7XHJcblx0ZXJyb3JPdmVybGF5OiBJVGV4dE92ZXJsYXk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSBjb25maWcgLSBBIG5ld2x5IGluc3RhbnRpYXRlZCBjb25maWcgb2JqZWN0ICBcclxuXHQgKiByZXR1cm5zIHRoZSBiYXNlIGRlbGVnYXRlIG9iamVjdCB3aXRoIHRoZSBjb25maWcgaW5zaWRlIGl0IGFsb25nIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIE92ZXJsYXkgY29udHJvbGxlciBjbGFzcyBcclxuXHQgKi9cclxuXHRjb25zdHJ1Y3Rvcihjb25maWc6IENvbmZpZykge1xyXG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcblx0fVxyXG5cclxuXHRzZXRDb25maWdUaW1lb3V0KHRpbWU6IG51bWJlcikge1xyXG5cdCAgdGhpcy5jb25maWcuYWZrVGltZW91dCA9IHRpbWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93cyB0aGUgZGlzY29ubmVjdCBvdmVybGF5IFxyXG5cdCAqL1xyXG5cdHNob3dEaXNjb25uZWN0T3ZlcmxheSh1cGRhdGVUZXh0OiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR0aGlzLnVwZGF0ZURpc2Nvbm5lY3RPdmVybGF5KHVwZGF0ZVRleHQpO1xyXG5cdFx0dGhpcy5kaXNjb25uZWN0T3ZlcmxheS5zaG93KCk7XHJcblx0XHR0aGlzLmN1cnJlbnRPdmVybGF5ID0gdGhpcy5kaXNjb25uZWN0T3ZlcmxheTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgZGlzY29ubmVjdCBvdmVybGF5cyBzcGFuIHRleHQgXHJcblx0ICogQHBhcmFtIHVwZGF0ZVRleHQgdGhlIG5ldyBjb3VudGRvd24gbnVtYmVyIFxyXG5cdCAqL1xyXG5cdHVwZGF0ZURpc2Nvbm5lY3RPdmVybGF5KHVwZGF0ZVRleHQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5kaXNjb25uZWN0T3ZlcmxheS51cGRhdGUodXBkYXRlVGV4dCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBY3RpdmF0ZXMgdGhlIGRpc2Nvbm5lY3Qgb3ZlcmxheXMgYWN0aW9uIFxyXG5cdCAqL1xyXG5cdG9uRGlzY29ubmVjdGlvbkFjdGlvbigpIHtcclxuXHRcdHRoaXMuZGlzY29ubmVjdE92ZXJsYXkuYWN0aXZhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhpZGVzIHRoZSBjdXJyZW50IG92ZXJsYXkgXHJcblx0ICovXHJcblx0aGlkZUN1cnJlbnRPdmVybGF5KCkge1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudE92ZXJsYXkgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRPdmVybGF5LmhpZGUoKTtcclxuXHRcdFx0dGhpcy5jdXJyZW50T3ZlcmxheSA9IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93cyB0aGUgY29ubmVjdCBvdmVybGF5IFxyXG5cdCAqL1xyXG5cdHNob3dDb25uZWN0T3ZlcmxheSgpIHtcclxuXHRcdHRoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR0aGlzLmNvbm5lY3RPdmVybGF5LnNob3coKTtcclxuXHRcdHRoaXMuY3VycmVudE92ZXJsYXkgPSB0aGlzLmNvbm5lY3RPdmVybGF5O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2hvd3MgdGhlIHBsYXkgb3ZlcmxheSBcclxuXHQgKi9cclxuXHRzaG93UGxheU92ZXJsYXkoKSB7XHJcblx0XHR0aGlzLmhpZGVDdXJyZW50T3ZlcmxheSgpO1xyXG5cdFx0dGhpcy5wbGF5T3ZlcmxheS5zaG93KCk7XHJcblx0XHR0aGlzLmN1cnJlbnRPdmVybGF5ID0gdGhpcy5wbGF5T3ZlcmxheTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3dzIHRoZSB0ZXh0IG92ZXJsYXkgXHJcblx0ICovXHJcblx0c2hvd1RleHRPdmVybGF5KHRleHQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcclxuXHRcdHRoaXMuaW5mb092ZXJsYXkudXBkYXRlKHRleHQpO1xyXG5cdFx0dGhpcy5pbmZvT3ZlcmxheS5zaG93KCk7XHJcblx0XHR0aGlzLmN1cnJlbnRPdmVybGF5ID0gdGhpcy5pbmZvT3ZlcmxheTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3dzIHRoZSBlcnJvciBvdmVybGF5IFxyXG5cdCAqL1xyXG5cdHNob3dFcnJvck92ZXJsYXkodGV4dDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmhpZGVDdXJyZW50T3ZlcmxheSgpO1xyXG5cdFx0dGhpcy5lcnJvck92ZXJsYXkudXBkYXRlKHRleHQpO1xyXG5cdFx0dGhpcy5lcnJvck92ZXJsYXkuc2hvdygpO1xyXG5cdFx0dGhpcy5jdXJyZW50T3ZlcmxheSA9IHRoaXMuZXJyb3JPdmVybGF5O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQWN0aXZhdGVzIHRoZSBjb25uZWN0IG92ZXJsYXlzIGFjdGlvbiBcclxuXHQgKi9cclxuXHRvbkNvbm5lY3RBY3Rpb24oKSB7XHJcblx0XHR0aGlzLmNvbm5lY3RPdmVybGF5LmFjdGl2YXRlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBY3RpdmF0ZXMgdGhlIHBsYXkgb3ZlcmxheXMgYWN0aW9uIFxyXG5cdCAqL1xyXG5cdG9uUGxheUFjdGlvbigpIHtcclxuXHRcdHRoaXMucGxheU92ZXJsYXkuYWN0aXZhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3dzIHRoZSBhZmsgb3ZlcmxheSBcclxuXHQgKiBAcGFyYW0gY291bnREb3duIHRoZSBjb3VudGRvd24gbnVtYmVyIGZvciB0aGUgYWZrIGNvdW50ZG93biBcclxuXHQgKi9cclxuXHRzaG93QWZrT3ZlcmxheShjb3VudERvd246IG51bWJlcikge1xyXG5cdFx0dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcclxuXHRcdHRoaXMudXBkYXRlQWZrT3ZlcmxheShjb3VudERvd24pO1xyXG5cdFx0dGhpcy5hZmtPdmVybGF5LnNob3coKTtcclxuXHRcdHRoaXMuY3VycmVudE92ZXJsYXkgPSB0aGlzLmFma092ZXJsYXk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGhlIGFmayBvdmVybGF5cyBjb3VudGRvd24gbnVtYmVyIFxyXG5cdCAqIEBwYXJhbSBjb3VudERvd24gdGhlIG5ldyBjb3VudGRvd24gbnVtYmVyIFxyXG5cdCAqL1xyXG5cdHVwZGF0ZUFma092ZXJsYXkoY291bnREb3duOiBudW1iZXIpIHtcclxuXHRcdHRoaXMuYWZrT3ZlcmxheS51cGRhdGVDb3VudGRvd24oY291bnREb3duKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFjdGl2YXRlcyB0aGUgYWZrIG92ZXJsYXlzIGFjdGlvbiBcclxuXHQgKi9cclxuXHRvbkFma0FjdGlvbigpIHtcclxuXHRcdHRoaXMuYWZrT3ZlcmxheS5hY3RpdmF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5zdGFudGlhdGUgdGhlIFdlYlJUQ1BsYXllckNvbnRyb2xsZXIgaW50ZXJmYWNlIHRvIHByb3ZpZGUgV2ViUlRDUGxheWVyQ29udHJvbGxlciBmdW5jdGlvbmFsaXR5IHdpdGhpbiB0aGlzIGNsYXNzIGFuZCBzZXQgdXAgYW55dGhpbmcgdGhhdCByZXF1aXJlcyBpdCBcclxuXHQgKiBAcGFyYW0gaVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIgXHJcblx0ICovXHJcblx0c2V0SVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIoaVdlYlJ0Y1BsYXllckNvbnRyb2xsZXI6IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyKSB7XHJcblx0XHR0aGlzLmlXZWJSdGNDb250cm9sbGVyID0gaVdlYlJ0Y1BsYXllckNvbnRyb2xsZXI7XHJcblxyXG5cdFx0dGhpcy5pV2ViUnRjQ29udHJvbGxlci5yZXNpemVQbGF5ZXJTdHlsZSgpO1xyXG5cclxuXHRcdHRoaXMuZGlzY29ubmVjdE92ZXJsYXkub25BY3Rpb24oKCkgPT4ge1xyXG5cdFx0XHR0aGlzLm9uV2ViUnRjQXV0b0Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5pV2ViUnRjQ29udHJvbGxlci5jb25uZWN0VG9TaWduYWxsaW5nU2V2ZXIoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEJ1aWxkIHRoZSB3ZWJSdGMgY29ubmVjdCBvdmVybGF5IEV2ZW50IExpc3RlbmVyIGFuZCBzaG93IHRoZSBjb25uZWN0IG92ZXJsYXlcclxuXHRcdHRoaXMuY29ubmVjdE92ZXJsYXkub25BY3Rpb24oKCkgPT4gdGhpcy5pV2ViUnRjQ29udHJvbGxlci5jb25uZWN0VG9TaWduYWxsaW5nU2V2ZXIoKSk7XHJcblxyXG5cdFx0Ly8gc2V0IHVwIHRoZSBhZmsgb3ZlcmxheXMgYWN0aW9uIFxyXG5cdFx0dGhpcy5hZmtPdmVybGF5Lm9uQWN0aW9uKCgpID0+IHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIub25BZmtDbGljaygpKTtcclxuXHJcblx0XHQvLyBzZXQgdXAgdGhlIHBsYXkgb3ZlcmxheXMgYWN0aW9uIFxyXG5cdFx0dGhpcy5wbGF5T3ZlcmxheS5vbkFjdGlvbigoKSA9PiB7XHJcblx0XHRcdHRoaXMub25TdHJlYW1Mb2FkaW5nKCk7XHJcblx0XHRcdHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIucGxheVN0cmVhbSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gc2V0IHVwIHRoZSBjb25uZWN0IG92ZXJsYXlzIGFjdGlvblxyXG5cdFx0dGhpcy5zaG93Q29ubmVjdE9yQXV0b0Nvbm5lY3RPdmVybGF5cygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2hvdyB0aGUgQ29ubmVjdCBPdmVybGF5IG9yIGF1dG8gY29ubmVjdCBcclxuXHQgKi9cclxuXHRzaG93Q29ubmVjdE9yQXV0b0Nvbm5lY3RPdmVybGF5cygpIHtcclxuXHRcdC8vIHNldCB1cCBpZiB0aGUgYXV0byBwbGF5IHdpbGwgYmUgdXNlZCBvciByZWd1bGFyIGNsaWNrIHRvIHN0YXJ0XHJcblx0XHRpZiAoIXRoaXMuY29uZmlnLmVuYWJsZVNwc0F1dG9Db25uZWN0KSB7XHJcblx0XHRcdHRoaXMuc2hvd0Nvbm5lY3RPdmVybGF5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBpZiBhdXRvcGxheWluZyBzaG93IGFuIGluZm8gb3ZlcmxheSB3aGlsZSB3aGlsZSB3YWl0aW5nIGZvciB0aGUgY29ubmVjdGlvbiB0byBiZWdpbiBcclxuXHRcdFx0dGhpcy5vbldlYlJ0Y0F1dG9Db25uZWN0KCk7XHJcblx0XHRcdHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIuY29ubmVjdFRvU2lnbmFsbGluZ1NldmVyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTaG93IHRoZSB3ZWJSdGNBdXRvQ29ubmVjdCBPdmVybGF5IGFuZCBjb25uZWN0XHJcblx0ICovXHJcblx0b25XZWJSdGNBdXRvQ29ubmVjdCgpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiQXV0byBDb25uZWN0aW5nIE5vd1wiKTtcclxuXHRcdHRoaXMuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gYW4gaW5zdGFuY2Ugc3RhdGUgY2hhbmdlIG9jY3Vyc1xyXG5cdCAqIEBwYXJhbSBpbnN0YW5jZVN0YXRlIC0gdGhlIG1lc3NhZ2UgaW5zdGFuY2Ugc3RhdGUgXHJcblx0ICovXHJcblx0b25JbnN0YW5jZVN0YXRlQ2hhbmdlKGluc3RhbmNlU3RhdGU6IE1lc3NhZ2VJbnN0YW5jZVN0YXRlKSB7IH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gcmVjZWl2aW5nIGFuIGF1dGggcmVzcG9uc2UgXHJcblx0ICogQHBhcmFtIGF1dGhSZXNwb25zZSAtIHRoZSBhdXRoIHJlc3BvbnNlIG1lc3NhZ2UgdHlwZVxyXG5cdCAqL1xyXG5cdG9uQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoUmVzcG9uc2U6IE1lc3NhZ2VBdXRoUmVzcG9uc2UpIHsgfVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgdXAgZnVuY3Rpb25hbGl0eSB0byBoYXBwZW4gd2hlbiByZWNlaXZpbmcgYSB3ZWJSVEMgYW5zd2VyIFxyXG5cdCAqL1xyXG5cdG9uV2ViUnRjQW5zd2VyKCkge1xyXG5cdFx0dGhpcy5zaG93VGV4dE92ZXJsYXkoXCJSVEMgQW5zd2VyXCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2hvd3MgYSB0ZXh0IG92ZXJsYXkgdG8gYWxlcnQgdGhlIHVzZXIgdGhlIHN0cmVhbSBpcyBjdXJyZW50bHkgbG9hZGluZ1xyXG5cdCAqL1xyXG5cdG9uU3RyZWFtTG9hZGluZygpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiTG9hZGluZyBTdHJlYW1cIik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSB2aWRlbyBpcyBkaXNjb25uZWN0ZWRcclxuXHQgKi9cclxuXHRvbkRpc2Nvbm5lY3QoZXZlbnRTdHJpbmc6IHN0cmluZykge1xyXG5cdFx0XHJcblx0XHQvLyBpZiB3ZSBoYXZlIG92ZXJyaWRkZW4gdGhlIGRlZmF1bHQgZGlzY29ubmVjdGlvbiBtZXNzc2FnZSwgYXNzaWduIHRoZSBuZXcgdmFsdWUgaGVyZVxyXG5cdFx0aWYgKHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIuZ2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgpICE9IFwiXCIgJiYgdGhpcy5pV2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCkgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlXZWJSdGNDb250cm9sbGVyLmdldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoKSAhPSBudWxsKSB7XHJcblx0XHRcdGV2ZW50U3RyaW5nID0gdGhpcy5pV2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCk7XHJcblx0XHRcdHRoaXMuaVdlYlJ0Y0NvbnRyb2xsZXIuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgnJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPT0gZmFsc2UpIHtcclxuXHRcdFx0dGhpcy5zaG93RXJyb3JPdmVybGF5KGBEaXNjb25uZWN0ZWQ6ICR7ZXZlbnRTdHJpbmd9YCk7XHJcblx0XHRcdHRoaXMuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPSB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5zaG93RGlzY29ubmVjdE92ZXJsYXkoYERpc2Nvbm5lY3RlZDogJHtldmVudFN0cmluZ30gIFxcbiBDbGljayBUbyBSZXN0YXJ0YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gV2ViIFJ0YyBpcyBjb25uZWN0aW5nIFxyXG5cdCAqL1xyXG5cdG9uV2ViUnRjQ29ubmVjdGluZygpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiU3RhcnRpbmcgY29ubmVjdGlvbiB0byBzZXJ2ZXIsIHBsZWFzZSB3YWl0XCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIFdlYiBSdGMgaGFzIGNvbm5lY3RlZCBcclxuXHQgKi9cclxuXHRvbldlYlJ0Y0Nvbm5lY3RlZCgpIHtcclxuXHRcdHRoaXMuc2hvd1RleHRPdmVybGF5KFwiV2ViUlRDIGNvbm5lY3RlZCwgd2FpdGluZyBmb3IgdmlkZW9cIik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gV2ViIFJ0YyBmYWlscyB0byBjb25uZWN0IFxyXG5cdCAqL1xyXG5cdG9uV2ViUnRjRmFpbGVkKCkge1xyXG5cdFx0dGhpcy5zaG93RXJyb3JPdmVybGF5KFwiVW5hYmxlIHRvIHNldHVwIHZpZGVvXCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIG1ldGhvZHMgYW5kIGZ1bmN0aW9ucyB0byBydW4gd2hlbiB0aGUgdmlkZW8gaXMgaW5pdGlhbGlzZWQgXHJcblx0ICovXHJcblx0b25WaWRlb0luaXRpYWxpc2VkKCkgeyB9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBmdW5jdGlvbmFsaXR5IHRvIGhhcHBlbiB3aGVuIHJlY2VpdmluZyBsYXRlbmN5IHRlc3QgcmVzdWx0cyBcclxuXHQgKiBAcGFyYW0gbGF0ZW5jeSAtIGxhdGVuY3kgdGVzdCByZXN1bHRzIG9iamVjdFxyXG5cdCAqL1xyXG5cdG9uTGF0ZW5jeVRlc3RSZXN1bHQobGF0ZW5jeTogTGF0ZW5jeVRlc3RSZXN1bHRzKSB7IH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gcmVjZWl2aW5nIHZpZGVvIHN0YXRpc3RpY3MgXHJcblx0ICogQHBhcmFtIHZpZGVvU3RhdHMgLSB2aWRlbyBzdGF0aXN0aWNzIGFzIGEgYWdncmVnYXRlIHN0YXRzIG9iamVjdCBcclxuXHQgKi9cclxuXHRvblZpZGVvU3RhdHModmlkZW9TdGF0czogQWdncmVnYXRlZFN0YXRzKSB7IH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gY2FsY3VsYXRpbmcgdGhlIGF2ZXJhZ2UgdmlkZW8gZW5jb2RlciBxcCBcclxuXHQgKiBAcGFyYW0gUVAgLSB0aGUgcXVhbGl0eSBudW1iZXIgb2YgdGhlIHN0cmVhbVxyXG5cdCAqL1xyXG5cdG9uVmlkZW9FbmNvZGVyQXZnUVAoUVA6IG51bWJlcikgeyB9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBmdW5jdGlvbmFsaXR5IHRvIGhhcHBlbiB3aGVuIHJlY2VpdmluZyBhbmQgaGFuZGxpbmcgaW5pdGlhbCBzZXR0aW5ncyBmb3IgdGhlIFVFIGFwcCBcclxuXHQgKiBAcGFyYW0gc2V0dGluZ3MgLSBpbml0aWFsIFVFIGFwcCBzZXR0aW5ncyAgXHJcblx0ICovXHJcblx0b25Jbml0aWFsU2V0dGluZ3Moc2V0dGluZ3M6IEluaXRpYWxTZXR0aW5ncykgeyB9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBmdW5jdGlvbmFsaXR5IHRvIGhhcHBlbiB3aGVuIHNldHRpbmcgcXVhbGl0eSBjb250cm9sIG93bmVyc2hpcCBvZiBhIHN0cmVhbSBcclxuXHQgKiBAcGFyYW0gaGFzUXVhbGl0eU93bmVyc2hpcCAtIGRvZXMgdGhpcyB1c2VyIGhhdmUgcXVhbGl0eSBvd25lcnNoaXAgb2YgdGhlIHN0cmVhbSB0cnVlIC8gZmFsc2VcclxuXHQgKi9cclxuXHRvblF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXA6IGJvb2xlYW4pIHsgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBBIGNsYXNzIGZvciBtYW5hZ2luZyB0aGUgZnJlZXplIGZyYW1lIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZyZWV6ZUZyYW1lIHtcclxuICAgIHByb3RlY3RlZCByb290RGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByb3RlY3RlZCByb290RWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBpbWFnZUVsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBmcmVlemVGcmFtZUhlaWdodCA9IDA7XHJcbiAgICBmcmVlemVGcmFtZVdpZHRoID0gMDtcclxuICAgIGVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93OiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IGEgZnJlZXplIGZyYW1lXHJcbiAgICAgKiBAcGFyYW0gcm9vdERpdiB0aGUgZGl2IHRoYXQgYSBmcmVlemUgZnJhbWUgZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW50b1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihyb290RGl2OiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucm9vdERpdiA9IHJvb3REaXY7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgb3ZlcmxheVxyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LmlkID0gJ2ZyZWV6ZUZyYW1lJztcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzIwJztcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIHRoZSBpbWFnZSBwbGFjZSBob2xkZXJcclxuICAgICAgICB0aGlzLmltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHJcbiAgICAgICAgLy8gYXBwZW5kIHRoZSBpbWFnZSBpbnRvIHRoZSByb290IGVsZW1lbnQgYW5kIGFwcGVuZCB0aGUgZWxlbWVudCB0byB0aGUgcm9vdCBkaXZcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnJvb3REaXYuYXBwZW5kQ2hpbGQodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGZyZWV6ZSBmcmFtZSBlbGVtZW50IGZvciBzaG93aW5nIFxyXG4gICAgICovXHJcbiAgICBzZXRFbGVtZW50Rm9yU2hvdygpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBmcmVlemUgZnJhbWUgZWxlbWVudCBmb3IgaGlkaW5nIFxyXG4gICAgICovXHJcbiAgICBzZXRFbGVtZW50Rm9ySGlkZSgpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGZyZWV6ZSBmcmFtZXMgaW1hZ2Ugc291cmNlXHJcbiAgICAgKiBAcGFyYW0ganBlZyB0aGUgZnJlZXplIGZyYW1lIGltYWdlIGFzIGEgYnl0ZSBhcnJheSBkYXRhICBcclxuICAgICAqL1xyXG4gICAgdXBkYXRlSW1hZ2VFbGVtZW50U291cmNlKGpwZWc6IFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICBsZXQgYmFzZTY0ID0gYnRvYShqcGVnLnJlZHVjZSgoZGF0YSwgYnl0ZSkgPT4gZGF0YSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSksICcnKSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3JjID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGJhc2U2NDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgZGltZW5zaW9ucyBmb3IgdGhlIGZyZWV6ZSBmcmFtZSBmcm9tIHRoZSBlbGVtZW50IGFuZCByZXNpemUgaXRcclxuICAgICAqL1xyXG4gICAgc2V0RGltZW5zaW9uc0Zyb21FbGVtZW50QW5kUmVzaXplKCkge1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWVIZWlnaHQgPSB0aGlzLmltYWdlRWxlbWVudC5uYXR1cmFsSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWVXaWR0aCA9IHRoaXMuaW1hZ2VFbGVtZW50Lm5hdHVyYWxXaWR0aDtcclxuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzaXplIGEgZnJlZXplIGZyYW1lIGVsZW1lbnQgXHJcbiAgICAgKi9cclxuICAgIHJlc2l6ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5mcmVlemVGcmFtZVdpZHRoICE9PSAwICYmIHRoaXMuZnJlZXplRnJhbWVIZWlnaHQgIT09IDApIHtcclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBkaXNwbGF5SGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlUb3AgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZGlzcGxheUxlZnQgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmxhcmdlRGlzcGxheVRvRmlsbFdpbmRvdyA9PT0gbnVsbCB8fCB0aGlzLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2luZG93QXNwZWN0UmF0aW8gPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgICAgIGxldCB2aWRlb0FzcGVjdFJhdGlvID0gdGhpcy5mcmVlemVGcmFtZVdpZHRoIC8gdGhpcy5mcmVlemVGcmFtZUhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3dBc3BlY3RSYXRpbyA8IHZpZGVvQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5SGVpZ2h0ID0gTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJXaWR0aCAvIHZpZGVvQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUb3AgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSBkaXNwbGF5SGVpZ2h0KSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5V2lkdGggPSBNYXRoLmZsb29yKHdpbmRvdy5pbm5lckhlaWdodCAqIHZpZGVvQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUxlZnQgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJXaWR0aCAtIGRpc3BsYXlXaWR0aCkgKiAwLjUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVmlkZW8gaXMgY29taW5nIGluIGF0IG5hdGl2ZSByZXNvbHV0aW9uLCB3ZSBjYXJlIG1vcmUgYWJvdXQgdGhlIHBsYXllciBzaXplXHJcbiAgICAgICAgICAgICAgICBsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSB0aGlzLnJvb3REaXYub2Zmc2V0V2lkdGggLyB0aGlzLnJvb3REaXYub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHZpZGVvQXNwZWN0UmF0aW8gPSB0aGlzLmZyZWV6ZUZyYW1lV2lkdGggLyB0aGlzLmZyZWV6ZUZyYW1lSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllckFzcGVjdFJhdGlvIDwgdmlkZW9Bc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlXaWR0aCA9IHRoaXMucm9vdERpdi5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5SGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLnJvb3REaXYub2Zmc2V0V2lkdGggLyB2aWRlb0FzcGVjdFJhdGlvKTtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VG9wID0gTWF0aC5mbG9vcigodGhpcy5yb290RGl2Lm9mZnNldEhlaWdodCAtIGRpc3BsYXlIZWlnaHQpICogMC41KTtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5yb290RGl2Lm9mZnNldEhlaWdodCAqIHZpZGVvQXNwZWN0UmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlIZWlnaHQgPSB0aGlzLnJvb3REaXYub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlMZWZ0ID0gTWF0aC5mbG9vcigodGhpcy5yb290RGl2Lm9mZnNldFdpZHRoIC0gZGlzcGxheVdpZHRoKSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMucm9vdERpdi5vZmZzZXRXaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5yb290RGl2Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUubGVmdCA9IDAgKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLnRvcCA9IDAgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUud2lkdGggPSBkaXNwbGF5V2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBkaXNwbGF5SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUubGVmdCA9IGRpc3BsYXlMZWZ0ICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUudG9wID0gZGlzcGxheVRvcCArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgRnJlZXplRnJhbWUgfSBmcm9tIFwiLi9GcmVlemVGcmFtZVwiO1xyXG5cclxuLyoqXHJcbiAqIEEgY2xhc3MgZm9yIGNvbnRyb2xsaW5nIGZyZWV6ZSBmcmFtZSBmdW5jdGlvbmFsaXR5IFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZyZWV6ZUZyYW1lQ29udHJvbGxlciB7XHJcbiAgICBmcmVlemVGcmFtZTogRnJlZXplRnJhbWU7XHJcbiAgICByZWNlaXZpbmcgPSBmYWxzZTtcclxuICAgIHNpemUgPSAwO1xyXG4gICAganBlZzogVWludDhBcnJheSA9IHVuZGVmaW5lZDtcclxuICAgIHZhbGlkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3QgYSBmcmVlemUgZnJhbWUgY29udHJvbGxlciBcclxuICAgICAqIEBwYXJhbSByb290RGl2IHRoZSBkaXYgdGhhdCBhIGZyZWV6ZSBmcmFtZSBlbGVtZW50IHdpbGwgYmUgY3JlYXRlZCBpbnRvXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJvb3REaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5mcmVlemVGcmFtZSA9IG5ldyBGcmVlemVGcmFtZShyb290RGl2KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgdGhlIGZyZWV6ZSBmcmFtZSBpZiBpdCBpcyB2YWxpZCBcclxuICAgICAqL1xyXG4gICAgc2hvd0ZyZWV6ZUZyYW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJlZXplRnJhbWUuc2V0RWxlbWVudEZvclNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWRlIHRoZSBmcmVlemUgZnJhbWUgYW5kIHNldCB0aGUgdmFsaWRpdHkgdG8gZmFsc2VcclxuICAgICAqL1xyXG4gICAgaGlkZUZyZWV6ZUZyYW1lKCkge1xyXG4gICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZyZWV6ZUZyYW1lLnNldEVsZW1lbnRGb3JIaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGZyZWV6ZSBmcmFtZXMgaW1hZ2Ugc291cmNlIGFuZCBsb2FkIGl0ICBcclxuICAgICAqIEBwYXJhbSBqcGVnIHRoZSBmcmVlemUgZnJhbWUgaW1hZ2UgYXMgYSBieXRlIGFycmF5IGRhdGFcclxuICAgICAqIEBwYXJhbSBvbkxvYWRDYWxsQmFjayBhIGNhbGwgYmFjayBmb3IgbWFuYWdpbmcgaWYgdGhlIHBsYXkgb3ZlcmxheSBuZWVkcyB0byBiZSBzaG93biBvciBub3RcclxuICAgICAqL1xyXG4gICAgdXBkYXRlRnJlZXplRnJhbWVBbmRTaG93KGpwZWc6IFVpbnQ4QXJyYXksIG9uTG9hZENhbGxCYWNrOiBGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWUudXBkYXRlSW1hZ2VFbGVtZW50U291cmNlKGpwZWcpO1xyXG4gICAgICAgIHRoaXMuZnJlZXplRnJhbWUuaW1hZ2VFbGVtZW50Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mcmVlemVGcmFtZS5zZXREaW1lbnNpb25zRnJvbUVsZW1lbnRBbmRSZXNpemUoKTtcclxuICAgICAgICAgICAgb25Mb2FkQ2FsbEJhY2soKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIHRoZSBuZXcgZnJlZXplIGZyYW1lIGltYWdlIGFuZCB1cGRhdGUgaXRcclxuICAgICAqIEBwYXJhbSB2aWV3IHRoZSBmcmVlemUgZnJhbWUgaW1hZ2UgYXMgYSBieXRlIGFycmF5IGRhdGFcclxuICAgICAqIEBwYXJhbSBvbkxvYWRDYWxsQmFjayBhIGNhbGwgYmFjayBmb3IgbWFuYWdpbmcgaWYgdGhlIHBsYXkgb3ZlcmxheSBuZWVkcyB0byBiZSBzaG93biBvciBub3RcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZSh2aWV3OiBVaW50OEFycmF5LCBvbkxvYWRDYWxsQmFjazogRnVuY3Rpb24pIHtcclxuICAgICAgICAvLyBSZXNldCBmcmVlemUgZnJhbWUgaWYgd2UgZ290IGEgZnJlZXplIGZyYW1lIG1lc3NhZ2UgYW5kIHdlIGFyZSBub3QgXCJyZWNlaXZpbmdcIiB5ZXQuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zaXplID0gMDtcclxuICAgICAgICAgICAgdGhpcy5qcGVnID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCB0b3RhbCBzaXplIG9mIGZyZWV6ZSBmcmFtZSAoYWNyb3NzIGFsbCBjaHVua3MpXHJcbiAgICAgICAgdGhpcy5zaXplID0gKG5ldyBEYXRhVmlldyh2aWV3LnNsaWNlKDEsIDUpLmJ1ZmZlcikpLmdldEludDMyKDAsIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGpwZWcgcGFydCBvZiB0aGUgcGF5bG9hZFxyXG4gICAgICAgIGxldCBqcGVnQnl0ZXMgPSB2aWV3LnNsaWNlKDEgKyA0KTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRvIGV4aXN0aW5nIGpwZWcgdGhhdCBob2xkcyB0aGUgZnJlZXplIGZyYW1lXHJcbiAgICAgICAgaWYgKHRoaXMuanBlZykge1xyXG4gICAgICAgICAgICBsZXQganBlZyA9IG5ldyBVaW50OEFycmF5KHRoaXMuanBlZy5sZW5ndGggKyBqcGVnQnl0ZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAganBlZy5zZXQodGhpcy5qcGVnLCAwKTtcclxuICAgICAgICAgICAganBlZy5zZXQoanBlZ0J5dGVzLCB0aGlzLmpwZWcubGVuZ3RoKTtcclxuICAgICAgICAgICAgdGhpcy5qcGVnID0ganBlZztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm8gZXhpc3RpbmcgZnJlZXplIGZyYW1lIGpwZWcsIG1ha2Ugb25lXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuanBlZyA9IGpwZWdCeXRlcztcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIGByZWNlaXZlZCBmaXJzdCBjaHVuayBvZiBmcmVlemUgZnJhbWU6ICR7dGhpcy5qcGVnLmxlbmd0aH0vJHt0aGlzLnNpemV9YCwgNik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaW5pc2hlZCByZWNlaXZpbmcgZnJlZXplIGZyYW1lLCB3ZSBjYW4gc2hvdyBpdCBub3dcclxuICAgICAgICBpZiAodGhpcy5qcGVnLmxlbmd0aCA9PT0gdGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjZWl2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIGByZWNlaXZlZCBjb21wbGV0ZSBmcmVlemUgZnJhbWUgJHt0aGlzLnNpemV9YCwgNik7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRnJlZXplRnJhbWVBbmRTaG93KHRoaXMuanBlZywgb25Mb2FkQ2FsbEJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSByZWNlaXZlZCBtb3JlIGRhdGEgdGhhbiB0aGUgZnJlZXplIGZyYW1lIHBheWxvYWQgbWVzc2FnZSBpbmRpY2F0ZSAodGhpcyBpcyBhbiBlcnJvcilcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmpwZWcubGVuZ3RoID4gdGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5FcnJvcihMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgcmVjZWl2ZWQgYmlnZ2VyIGZyZWV6ZSBmcmFtZSB0aGFuIGFkdmVydGlzZWQ6ICR7dGhpcy5qcGVnLmxlbmd0aH0vJHt0aGlzLnNpemV9YCk7XHJcbiAgICAgICAgICAgIHRoaXMuanBlZyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBVZUlucHV0TW91c2VNZXNzYWdlIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlSW5wdXRNb3VzZU1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVG91Y2hDb250cm9sbGVyIH0gZnJvbSBcIi4vSVRvdWNoQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNb3VzZUJ1dHRvbiB9IGZyb20gXCIuL01vdXNlQnV0dG9uc1wiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5cclxuLyoqXHJcbiAqIEFsbG93cyBmb3IgdGhlIHVzYWdlIG9mIGZha2UgdG91Y2ggZXZlbnRzIGFuZCBpbXBsZW1lbnRzIElUb3VjaENvbnRyb2xsZXJcclxuICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIFRoZSBjb250cm9sbGVyIGZvciB0aGUgRGF0YSBjaGFubmVsIFxyXG4gKiBAcGFyYW0gdmlkZW9QbGF5ZXJFbGVtZW50IC0gVGhlIHZpZGVvIHBsYXllciBET00gZWxlbWVudCBcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGYWtlVG91Y2hDb250cm9sbGVyIGltcGxlbWVudHMgSVRvdWNoQ29udHJvbGxlciB7XHJcbiAgICBmaW5nZXJzOiBGaW5nZXJbXTtcclxuICAgIHVlSW5wdXRNb3VzZU1lc3NhZ2U6IFVlSW5wdXRNb3VzZU1lc3NhZ2U7XHJcbiAgICB2aWRlb1BsYXllckVsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIsIHZpZGVvUGxheWVyRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZSA9IG5ldyBVZUlucHV0TW91c2VNZXNzYWdlKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICAgICAgdGhpcy52aWRlb1BsYXllckVsZW1lbnQgPSB2aWRlb1BsYXllckVsZW1lbnQ7XHJcblx0dGhpcy5maW5nZXJzID0gW107XHJcbiAgICAgICAgZG9jdW1lbnQub250b3VjaHN0YXJ0ID0gKGV2OiBUb3VjaEV2ZW50KSA9PiB0aGlzLm9uVG91Y2hTdGFydChldik7XHJcbiAgICAgICAgZG9jdW1lbnQub250b3VjaGVuZCA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoRW5kKGV2KTtcclxuICAgICAgICBkb2N1bWVudC5vbnRvdWNobW92ZSA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoTW92ZShldik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIGEgdG91Y2ggZXZlbnQgYmVnaW5zIFxyXG4gICAgICogQHBhcmFtIHRvdWNoIC0gdGhlIGFjdGl2YXRpbmcgdG91Y2ggZXZlbnQgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hTdGFydCh0b3VjaDogVG91Y2hFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGxldCB0b3VjaEluZm8gPSB0b3VjaC5jaGFuZ2VkVG91Y2hlc1swXTtcclxuICAgICAgICBsZXQgZmluZ2VySW5mbyA9IHtcclxuICAgICAgICAgICAgSUQ6IHRvdWNoSW5mby5pZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBYOiB0b3VjaEluZm8uY2xpZW50WCAtIHRoaXMudmlkZW9QbGF5ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQsXHJcbiAgICAgICAgICAgIFk6IHRvdWNoSW5mby5jbGllbnRZIC0gLSB0aGlzLnZpZGVvUGxheWVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3BcclxuICAgICAgICB9XHJcblx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlRvdWNoIHN0YXJ0XCIsIDYpO1xyXG5cclxuICAgICAgICB0aGlzLmZpbmdlcnMucHVzaChmaW5nZXJJbmZvKTtcclxuXHJcbiAgICAgICAgbGV0IG1vdXNlRXZlbnQgPSBuZXcgTW91c2VFdmVudCh0b3VjaC50eXBlLCB0b3VjaEluZm8pXHJcbiAgICAgICAgdGhpcy52aWRlb1BsYXllckVsZW1lbnQub25tb3VzZWVudGVyKG1vdXNlRXZlbnQpO1xyXG4gICAgICAgIHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VEb3duKE1vdXNlQnV0dG9uLm1haW5CdXR0b24sIGZpbmdlckluZm8uWCwgZmluZ2VySW5mby5ZKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gYSB0b3VjaCBldmVudCBlbmRzIFxyXG4gICAgICogQHBhcmFtIHRvdWNoRXZlbnQgLSB0aGUgYWN0aXZhdGluZyB0b3VjaCBldmVudCBcclxuICAgICAqL1xyXG4gICAgb25Ub3VjaEVuZCh0b3VjaDogVG91Y2hFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGxldCB0b3VjaEluZm8gPSB0b3VjaC5jaGFuZ2VkVG91Y2hlc1swXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZpbmdlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRvdWNoSW5mby5pZGVudGlmaWVyID09PSB0aGlzLmZpbmdlcnNbaV0uSUQpIHtcclxuICAgICAgICAgICAgICAgIGxldCB4ID0gdG91Y2hJbmZvLmNsaWVudFggLSB0aGlzLnZpZGVvUGxheWVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSB0b3VjaEluZm8uY2xpZW50WSAtIHRoaXMudmlkZW9QbGF5ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VVcChNb3VzZUJ1dHRvbi5tYWluQnV0dG9uLCB4LCB5KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbW91c2VFdmVudCA9IG5ldyBNb3VzZUV2ZW50KHRvdWNoLnR5cGUsIHRvdWNoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1BsYXllckVsZW1lbnQub25tb3VzZWxlYXZlKG1vdXNlRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5nZXJzW2ldID0gdGhpcy5maW5nZXJzW3RoaXMuZmluZ2Vycy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZ2Vycy5wb3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uIGEgTW92ZSB0b3VjaCBldmVudCBcclxuICAgICAqIEBwYXJhbSB0b3VjaEV2ZW50IC0gdGhlIGFjdGl2YXRpbmcgdG91Y2ggZXZlbnQgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hNb3ZlKHRvdWNoRXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBsZXQgdG91Y2hJbmZvID0gdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlc1swXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmluZ2Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodG91Y2hJbmZvLmlkZW50aWZpZXIgPT09IHRoaXMuZmluZ2Vyc1tpXS5JRCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHggPSB0b3VjaEluZm8uY2xpZW50WCAtIHRoaXMudmlkZW9QbGF5ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgeSA9IHRvdWNoSW5mby5jbGllbnRZIC0gdGhpcy52aWRlb1BsYXllckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0TW91c2VNZXNzYWdlLnNlbmRNb3VzZU1vdmUoeCwgeSwgeCAtIHRoaXMuZmluZ2Vyc1tpXS5YLCB5IC0gdGhpcy5maW5nZXJzW2ldLlkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5nZXJzW2ldLlggPSB4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5nZXJzW2ldLlkgPSB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGludGVyZmFjZSBmb3IgZmluZ2VyIHBvc2l0aW9uIG1hcHBpbmcgXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEZpbmdlciB7XHJcbiAgICBJRDogbnVtYmVyO1xyXG4gICAgWDogbnVtYmVyO1xyXG4gICAgWTogbnVtYmVyO1xyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IFVlSW5wdXRHYW1lUGFkTWVzc2FnZSB9IGZyb20gXCIuLi9VZUluc3RhbmNlTWVzc2FnZS9VZUlucHV0R2FtZVBhZE1lc3NhZ2VcIlxyXG5cclxuLyoqXHJcbiAqIFRoZSBjbGFzcyB0aGF0IGhhbmRsZXMgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgZ2FtZXBhZHMgYW5kIGNvbnRyb2xsZXJzIFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdhbWVQYWRDb250cm9sbGVyIHtcclxuICAgIHVlSW5wdXRHYW1lUGFkTWVzc2FnZTogVWVJbnB1dEdhbWVQYWRNZXNzYWdlO1xyXG4gICAgY29udHJvbGxlcnM6IENvbnRyb2xsZXJbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBkYXRhQ2hhbm5lbENvbnRyb2xsZXIgLSB0aGUgZGF0YSBjaGFuZWwgY29udHJvbGxlciAgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2UgPSBuZXcgVWVJbnB1dEdhbWVQYWRNZXNzYWdlKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICAgICAgaWYgKFwiR2FtZXBhZEV2ZW50XCIgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGNvbm5lY3RlZFwiLCAoZXY6IEdhbWVwYWRFdmVudCkgPT4gdGhpcy5nYW1lUGFkQ29ubmVjdEhhbmRsZXIoZXYpKTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkZGlzY29ubmVjdGVkXCIsIChldjogR2FtZXBhZEV2ZW50KSA9PiB0aGlzLmdhbWVQYWREaXNjb25uZWN0SGFuZGxlcihldikpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXCJXZWJLaXRHYW1lcGFkRXZlbnRcIiBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRnYW1lcGFkY29ubmVjdGVkXCIsIChldjogR2FtZXBhZEV2ZW50KSA9PiB0aGlzLmdhbWVQYWRDb25uZWN0SGFuZGxlcihldikpO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmtpdGdhbWVwYWRkaXNjb25uZWN0ZWRcIiwgKGV2OiBHYW1lcGFkRXZlbnQpID0+IHRoaXMuZ2FtZVBhZERpc2Nvbm5lY3RIYW5kbGVyKGV2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3RzIHRoZSBnYW1lcGFkIGhhbmRsZXIgXHJcbiAgICAgKiBAcGFyYW0gZ2FtZVBhZEV2ZW50IC0gdGhlIGFjdGl2YXRpbmcgZ2FtZXBhZCBldmVudCBcclxuICAgICAqL1xyXG4gICAgZ2FtZVBhZENvbm5lY3RIYW5kbGVyKGdhbWVQYWRFdmVudDogR2FtZXBhZEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkdhbWVwYWQgY29ubmVjdCBoYW5kbGVyXCIsIDYpO1xyXG4gICAgICAgIGxldCBnYW1lcGFkID0gZ2FtZVBhZEV2ZW50LmdhbWVwYWQ7XHJcblxyXG4gICAgICAgIGxldCB0ZW1wOiBDb250cm9sbGVyID0ge1xyXG4gICAgICAgICAgICBjdXJyZW50U3RhdGU6IGdhbWVwYWQsXHJcbiAgICAgICAgICAgIHByZXZTdGF0ZTogZ2FtZXBhZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMucHVzaCh0ZW1wKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzW2dhbWVwYWQuaW5kZXhdLmN1cnJlbnRTdGF0ZSA9IGdhbWVwYWQ7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyc1tnYW1lcGFkLmluZGV4XS5wcmV2U3RhdGUgPSBnYW1lcGFkO1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJnYW1lcGFkOiBcIiArIGdhbWVwYWQuaWQgKyBcIiBjb25uZWN0ZWRcIiwgNik7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnVwZGF0ZVN0YXR1cygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSBnYW1lcGFkIGhhbmRsZXIgXHJcbiAgICAgKiBAcGFyYW0gZ2FtZVBhZEV2ZW50IC0gdGhlIGFjdGl2YXRpbmcgZ2FtZXBhZCBldmVudCBcclxuICAgICAqL1xyXG4gICAgZ2FtZVBhZERpc2Nvbm5lY3RIYW5kbGVyKGdhbWVQYWRFdmVudDogR2FtZXBhZEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkdhbWVwYWQgZGlzY29ubmVjdCBoYW5kbGVyXCIsIDYpO1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJnYW1lcGFkOiBcIiArIGdhbWVQYWRFdmVudC5nYW1lcGFkLmlkICsgXCIgZGlzY29ubmVjdGVkXCIsIDYpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNvbnRyb2xsZXJzW2dhbWVQYWRFdmVudC5nYW1lcGFkLmluZGV4XTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzID0gdGhpcy5jb250cm9sbGVycy5maWx0ZXIoY29udHJvbGxlciA9PiBjb250cm9sbGVyICE9PSB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2NhbiBmb3IgY29ubmVjdGVkIGdhbWVwYWRzIFxyXG4gICAgICovXHJcbiAgICBzY2FuR2FtZVBhZHMoKSB7XHJcbiAgICAgICAgdmFyIGdhbWVwYWRzID0gKChuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMpID8gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCkgOiBbXSk7Ly8gIDogKG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcyA/IG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcygpIDogW10pO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FtZXBhZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGdhbWVwYWRzW2ldICYmIChnYW1lcGFkc1tpXS5pbmRleCBpbiB0aGlzLmNvbnRyb2xsZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyc1tnYW1lcGFkc1tpXS5pbmRleF0uY3VycmVudFN0YXRlID0gZ2FtZXBhZHNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBzdGF0dXMgb2YgdGhlIGdhbWVwYWQgYW5kIHNlbmRzIHRoZSBpbnB1dHMgIFxyXG4gICAgICovXHJcbiAgICB1cGRhdGVTdGF0dXMoKSB7XHJcbiAgICAgICAgdGhpcy5zY2FuR2FtZVBhZHMoKTtcclxuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgbXVsdGlwbGUgY29udHJvbGxlcnMgaW4gdGhlIGNhc2UgdGhlIG11bHRpcGxlIGdhbWVwYWRzIGFyZSBjb25uZWN0ZWRcclxuXHJcbiAgICAgICAgZm9yIChsZXQgY29udHJvbGxlciBvZiB0aGlzLmNvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRTdGF0ZSA9IGNvbnRyb2xsZXIuY3VycmVudFN0YXRlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udHJvbGxlci5jdXJyZW50U3RhdGUuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QnV0dG9uID0gY29udHJvbGxlci5jdXJyZW50U3RhdGUuYnV0dG9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNCdXR0b24gPSBjb250cm9sbGVyLnByZXZTdGF0ZS5idXR0b25zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBCdXR0b24gNiBpcyBhY3R1YWxseSB0aGUgbGVmdCB0cmlnZ2VyLCBzZW5kIGl0IHRvIFVFIGFzIGFuIGFuYWxvZyBheGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIDcgaXMgYWN0dWFsbHkgdGhlIHJpZ2h0IHRyaWdnZXIsIHNlbmQgaXQgdG8gVUUgYXMgYW4gYW5hbG9nIGF4aXNcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVzdCBhcmUgbm9ybWFsIGJ1dHRvbnMuIFRyZWF0IGFzIHN1Y2hcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEJ1dHRvbi5wcmVzc2VkICYmICFwcmV2aW91c0J1dHRvbi5wcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldyBwcmVzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgNSwgY3VycmVudEJ1dHRvbi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSA3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgNiwgY3VycmVudEJ1dHRvbi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckJ1dHRvblByZXNzZWQoY3VycmVudFN0YXRlLmluZGV4LCBpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFjdXJyZW50QnV0dG9uLnByZXNzZWQgJiYgcHJldmlvdXNCdXR0b24ucHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxlYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlLnNlbmRDb250cm9sbGVyQXhpc01vdmUoY3VycmVudFN0YXRlLmluZGV4LCA1LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlLnNlbmRDb250cm9sbGVyQXhpc01vdmUoY3VycmVudFN0YXRlLmluZGV4LCA2LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlLnNlbmRDb250cm9sbGVyQnV0dG9uUmVsZWFzZWQoY3VycmVudFN0YXRlLmluZGV4LCBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEJ1dHRvbi5wcmVzc2VkICYmIHByZXZpb3VzQnV0dG9uLnByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwZWF0IHByZXNzIC8gaG9sZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgNSwgY3VycmVudEJ1dHRvbi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSA3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgNiwgY3VycmVudEJ1dHRvbi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckJ1dHRvblByZXNzZWQoY3VycmVudFN0YXRlLmluZGV4LCBpLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBMYXN0IGNhc2UgaXMgYnV0dG9uIGlzbid0IGN1cnJlbnRseSBwcmVzc2VkIGFuZCB3YXNuJ3QgcHJlc3NlZCBiZWZvcmUuIFRoaXMgZG9lc24ndCBuZWVkIGFuIGVsc2UgYmxvY2tcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTdGF0ZS5heGVzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHggPSBwYXJzZUZsb2F0KGN1cnJlbnRTdGF0ZS5heGVzW2ldLnRvRml4ZWQoNCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9nYW1lcGFkLyNyZW1hcHBpbmcgR2FtZXBhZCBicm93c2VyIHNpZGUgc3RhbmRhcmQgbWFwcGluZyBoYXMgcG9zaXRpdmUgZG93biwgbmVnYXRpdmUgdXAuIFRoaXMgaXMgZG93bnJpZ2h0IGRpc2d1c3RpbmcuIFNvIHdlIGZpeCBpdC5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IC1wYXJzZUZsb2F0KGN1cnJlbnRTdGF0ZS5heGVzW2kgKyAxXS50b0ZpeGVkKDQpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZWZ0IHN0aWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF4aXMgMSA9IGxlZnQgaG9yaXpvbnRhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVlSW5wdXRHYW1lUGFkTWVzc2FnZS5zZW5kQ29udHJvbGxlckF4aXNNb3ZlKGN1cnJlbnRTdGF0ZS5pbmRleCwgMSwgeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF4aXMgMiA9IGxlZnQgdmVydGljYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDIsIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByaWdodCBzdGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBheGlzIDMgPSByaWdodCBob3Jpem9udGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWVJbnB1dEdhbWVQYWRNZXNzYWdlLnNlbmRDb250cm9sbGVyQXhpc01vdmUoY3VycmVudFN0YXRlLmluZGV4LCAzLCB4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXhpcyA0ID0gcmlnaHQgdmVydGljYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51ZUlucHV0R2FtZVBhZE1lc3NhZ2Uuc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjdXJyZW50U3RhdGUuaW5kZXgsIDQsIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcnNbY3VycmVudFN0YXRlLmluZGV4XS5wcmV2U3RhdGUgPSBjdXJyZW50U3RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJPaCBkZWFyIHRoZSBnYW1lcGFkIHBvbGwgbG9vcCBoYXMgdGhyb3duIGFuIGVycm9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy51cGRhdGVTdGF0dXMoKSk7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGludGVyZmFjZSBmb3IgY29udHJvbGxlcnMgXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyb2xsZXIge1xyXG4gICAgY3VycmVudFN0YXRlOiBHYW1lcGFkO1xyXG4gICAgcHJldlN0YXRlOiBHYW1lcGFkO1xyXG59IiwiaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiXHJcblxyXG4vKipcclxuICogVGhlIENsYXNzIHRoYXQgaGFuZGxlcyBneXJvIGlucHV0IFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEd5cm9Db250cm9sbGVyIHtcclxuIFxyXG4gICAgZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXI7XHJcbiBcclxuICAgIGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIgPSBkYXRhQ2hhbm5lbENvbnRyb2xsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG59XHJcbiIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgRmFrZVRvdWNoQ29udHJvbGxlciB9IGZyb20gXCIuL0Zha2VUb3VjaENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgS2V5Ym9hcmRDb250cm9sbGVyIH0gZnJvbSBcIi4vS2V5Ym9hcmRDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IE1vdXNlQ29udHJvbGxlciB9IGZyb20gXCIuL01vdXNlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVG91Y2hDb250cm9sbGVyIH0gZnJvbSBcIi4vSVRvdWNoQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBUb3VjaENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Ub3VjaENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgR2FtZVBhZENvbnRyb2xsZXIgfSBmcm9tIFwiLi9HYW1lcGFkQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBDb250cm9sU2NoZW1lVHlwZSB9IGZyb20gXCIuLi9Db25maWcvQ29uZmlnXCI7XHJcbmltcG9ydCB7IFZpZGVvUGxheWVyTW91c2VMb2NrZWRFdmVudHMgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvVmlkZW9QbGF5ZXJNb3VzZUxvY2tlZEV2ZW50c1wiO1xyXG5pbXBvcnQgeyBWaWRlb1BsYXllck1vdXNlSG92ZXJFdmVudHMgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvVmlkZW9QbGF5ZXJNb3VzZUhvdmVyRXZlbnRzXCI7XHJcbmltcG9ydCB7IEd5cm9Db250cm9sbGVyIH0gZnJvbSBcIi4vR3lyb0NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL0lWaWRlb1BsYXllclwiO1xyXG5pbXBvcnQgeyBJVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZSB9IGZyb20gXCIuLi9WaWRlb1BsYXllci9WaWRlb1BsYXllck1vdXNlSW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IFVlRGVzY3JpcHRvclVpIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlRGVzY3JpcHRvclVpXCI7XHJcblxyXG4vKipcclxuICogQ2xhc3MgZm9yIGhhbmRsaW5nIGlucHV0cyBmb3IgbW91c2UgYW5kIGtleWJvYXJkICAgXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5wdXRDb250cm9sbGVyIHtcclxuXHJcbiAgICB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyO1xyXG4gICAgZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXI7XHJcbiAgICBrZXlib2FyZENvbnRyb2xsZXI6IEtleWJvYXJkQ29udHJvbGxlcjtcclxuICAgIG1vdXNlQ29udHJvbGxlcjogTW91c2VDb250cm9sbGVyO1xyXG4gICAgdG91Y2hDb250cm9sbGVyOiBJVG91Y2hDb250cm9sbGVyXHJcbiAgICBmYWtlVG91Y2hDb250cm9sbGVyOiBGYWtlVG91Y2hDb250cm9sbGVyO1xyXG4gICAgZ2FtZVBhZENvbnRyb2xsZXI6IEdhbWVQYWRDb250cm9sbGVyO1xyXG4gICAgZ3lyb0NvbnRyb2xsZXI6IEd5cm9Db250cm9sbGVyO1xyXG4gICAgdWVEZXNjcmlwdG9yVWk6IFVlRGVzY3JpcHRvclVpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZGF0YUNoYW5uZWxDb250cm9sbGVyIC0gdGhlIGRhdGEgY2hhbm5lbCBjb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCB1ZURlc2NyaXB0b3JVaTogVWVEZXNjcmlwdG9yVWksIHZpZGVvRWxlbWVudFByb3ZpZGVyOiBJVmlkZW9QbGF5ZXIpIHtcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciA9IGRhdGFDaGFubmVsQ29udHJvbGxlcjtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyID0gdmlkZW9FbGVtZW50UHJvdmlkZXI7XHJcblx0dGhpcy51ZURlc2NyaXB0b3JVaSA9IHVlRGVzY3JpcHRvclVpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVnaXN0ZXJzIGJyb3dzZXIga2V5IGV2ZW50cyAgXHJcbiAgICAgKiBAcGFyYW0gc3VwcHJlc3NCcm93c2VyS2V5cyAtIG9wdGlvbiB0byBzdXBwcmVzcyBicm93c2VyIGtleXMgXHJcbiAgICAgKi9cclxuICAgIHJlZ2lzdGVyS2V5Qm9hcmQoc3VwcHJlc3NCcm93c2VyS2V5czogYm9vbGVhbikge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJSZWdpc3RlciBLZXlib2FyZCBFdmVudHNcIiwgNyk7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZENvbnRyb2xsZXIgPSBuZXcgS2V5Ym9hcmRDb250cm9sbGVyKHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLCB0aGlzLnVlRGVzY3JpcHRvclVpLCBzdXBwcmVzc0Jyb3dzZXJLZXlzKTtcclxuICAgICAgICB0aGlzLmtleWJvYXJkQ29udHJvbGxlci5yZWdpc3RlcktleUJvYXJkRXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZWdpc3RlciBtb3VzZSBldmVudHMgYmFzZWQgb24gYSBjb250cm9sIHR5cGUgXHJcbiAgICAgKiBAcGFyYW0gY29udHJvbFNjaGVtZSAtIGlmIHRoZSBtb3VzZSBpcyBlaXRoZXIgaG92ZXJpbmcgb3IgbG9ja2VkIFxyXG4gICAgICovXHJcbiAgICByZWdpc3Rlck1vdXNlKGNvbnRyb2xTY2hlbWU6IENvbnRyb2xTY2hlbWVUeXBlKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlJlZ2lzdGVyIE1vdXNlIEV2ZW50c1wiLCA3KTtcclxuXHJcbiAgICAgICAgLy8gY2FzdGluZyB0aGVzZSBhcyBhbnkgYXMgdGhleSBkbyBub3QgaGF2ZSB0aGUgbW96IGF0dHJpYnV0ZXMgd2UgcmVxdWlyZVxyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpIGFzIGFueTtcclxuICAgICAgICBsZXQgdmlkZW9JbnB1dEJpbmRpbmdzOiBJVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIgPSBuZXcgTW91c2VDb250cm9sbGVyKHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLCB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChjb250cm9sU2NoZW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29udHJvbFNjaGVtZVR5cGUuTG9ja2VkTW91c2U6XHJcblxyXG4gICAgICAgICAgICAgICAgdmlkZW9JbnB1dEJpbmRpbmdzID0gbmV3IFZpZGVvUGxheWVyTW91c2VMb2NrZWRFdmVudHModGhpcy52aWRlb0VsZW1lbnRQcm92aWRlciwgdGhpcy5tb3VzZUNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5vbmNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLnNldENsaWNrQWN0aW9ucyhldmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxvY2tjaGFuZ2UnLCAoKSA9PiB2aWRlb0lucHV0QmluZGluZ3MuaGFuZGxlTG9ja1N0YXRlQ2hhbmdlKCksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21venBvaW50ZXJsb2NrY2hhbmdlJywgKCkgPT4gdmlkZW9JbnB1dEJpbmRpbmdzLmhhbmRsZUxvY2tTdGF0ZUNoYW5nZSgpLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBDb250cm9sU2NoZW1lVHlwZS5Ib3ZlcmluZ01vdXNlOlxyXG4gICAgICAgICAgICAgICAgdmlkZW9JbnB1dEJpbmRpbmdzID0gbmV3IFZpZGVvUGxheWVyTW91c2VIb3ZlckV2ZW50cyh0aGlzLm1vdXNlQ29udHJvbGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBvbmNsaWNrIHRvIG51bGwgaWYgdGhlIGlucHV0IGJpbmRpbmdzIHdlcmUgcHJldmlvdXNseSBzZXQgdG8gcG9pbnRlcmxvY2tcclxuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5vbmNsaWNrID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChtb3VzZUV2ZW50KSA9PiB2aWRlb0lucHV0QmluZGluZ3MuaGFuZGxlTW91c2VNb3ZlKG1vdXNlRXZlbnQpLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIChtb3VzZUV2ZW50KSA9PiB2aWRlb0lucHV0QmluZGluZ3MuaGFuZGxlTW91c2VXaGVlbChtb3VzZUV2ZW50KSwgeyBwYXNzaXZlIDogZmFsc2UgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50Lm9ubW91c2Vkb3duID0gKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZpZGVvSW5wdXRCaW5kaW5ncy5oYW5kbGVNb3VzZURvd24obW91c2VFdmVudCk7XHJcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQub25tb3VzZXVwID0gKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZpZGVvSW5wdXRCaW5kaW5ncy5oYW5kbGVNb3VzZVVwKG1vdXNlRXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInVua25vd24gQ29udHJvbCBTY2hlbWUgVHlwZSBEZWZhdWx0aW5nIHRvIExvY2tlZCBNb3VzZSBFdmVudHNcIik7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlZ2lzdGVyIHRvdWNoIGV2ZW50cyBcclxuICAgICAqIEBwYXJhbSBmYWtlTW91c2VUb3VjaCAtIHRoZSBmYWtlZCBtb3VzZSB0b3VjaCBldmVudCBcclxuICAgICAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gdGhlIHBsYXllciBlbGVtZW50cyBET00gXHJcbiAgICAgKi9cclxuICAgIHJlZ2lzdGVyVG91Y2goZmFrZU1vdXNlVG91Y2g6IGJvb2xlYW4sIHBsYXllckVsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiUmVnaXN0ZXJpbmcgVG91Y2hcIiwgNik7XHJcbiAgICAgICAgaWYgKGZha2VNb3VzZVRvdWNoKSB7XHJcblx0ICAgIC8vKDxIVE1MVmlkZW9FbGVtZW50PnBsYXllckVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ2aWRlb1wiKVswXSlcclxuICAgICAgICAgICAgdGhpcy50b3VjaENvbnRyb2xsZXIgPSBuZXcgRmFrZVRvdWNoQ29udHJvbGxlcih0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciwgcGxheWVyRWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b3VjaENvbnRyb2xsZXIgPSBuZXcgVG91Y2hDb250cm9sbGVyKHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLCBwbGF5ZXJFbGVtZW50LCB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZWdpc3RlcnMgYSBnYW1lcGFkIFxyXG4gICAgICovXHJcbiAgICByZWdpc3RlckdhbWVQYWQoKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlJlZ2lzdGVyIEdhbWUgUGFkXCIsIDcpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVBhZENvbnRyb2xsZXIgPSBuZXcgR2FtZVBhZENvbnRyb2xsZXIodGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZWdpc3RlcnMgYSBneXJvIGRldmljZSBcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJHeXJvKCkge1xyXG4gICAgICAgIHRoaXMuZ3lyb0NvbnRyb2xsZXIgPSBuZXcgR3lyb0NvbnRyb2xsZXIodGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgU3BlY2lhbEtleUNvZGVzIH0gZnJvbSBcIi4vU3BlY2lhbEtleUNvZGVzXCI7XHJcbmltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVJbnB1dEtleWJvYXJkTWVzc2FnZSB9IGZyb20gXCIuLi9VZUluc3RhbmNlTWVzc2FnZS9VZUlucHV0S2V5Ym9hcmRNZXNzYWdlXCI7XHJcbmltcG9ydCB7IFVlRGVzY3JpcHRvclVpIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlRGVzY3JpcHRvclVpXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcblxyXG4vKipcclxuICogSGFuZGxlcyB0aGUgS2V5Ym9hcmQgSW5wdXRzIGZvciB0aGUgZG9jdW1lbnRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBLZXlib2FyZENvbnRyb2xsZXIge1xyXG4gICAgdWVJbnB1dEtleUJvYXJkTWVzc2FnZTogVWVJbnB1dEtleWJvYXJkTWVzc2FnZTtcclxuICAgIHVlRGVzY3JpcHRvclVpOiBVZURlc2NyaXB0b3JVaTtcclxuICAgIHN1cHByZXNzQnJvd3NlcktleXM6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBkYXRhQ2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgICogQHBhcmFtIHN1cHByZXNzQnJvd3NlcktleXMgLSBTdXBwcmVzcyBCcm93c2VyIEtleXNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIsIHVlRGVzY3JpcHRvclVpOiBVZURlc2NyaXB0b3JVaSwgc3VwcHJlc3NCcm93c2VyS2V5czogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMudWVJbnB1dEtleUJvYXJkTWVzc2FnZSA9IG5ldyBVZUlucHV0S2V5Ym9hcmRNZXNzYWdlKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblx0dGhpcy51ZURlc2NyaXB0b3JVaSA9IHVlRGVzY3JpcHRvclVpO1xyXG4gICAgICAgIHRoaXMuc3VwcHJlc3NCcm93c2VyS2V5cyA9IHN1cHByZXNzQnJvd3NlcktleXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgZG9jdW1lbnQga2V5Ym9hcmQgZXZlbnRzIHdpdGggdGhlIGNvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJLZXlCb2FyZEV2ZW50cygpIHtcclxuICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuaGFuZGxlT25LZXlEb3duKGV2KTtcclxuICAgICAgICBkb2N1bWVudC5vbmtleXVwID0gKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLmhhbmRsZU9uS2V5VXAoZXYpO1xyXG5cclxuICAgICAgICAvL1RoaXMgaGFzIGJlZW4gZGVwcmVjYXRlZCBhcyBhdCBKdW4gMTMgMjAyMVxyXG4gICAgICAgIGRvY3VtZW50Lm9ua2V5cHJlc3MgPSAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuaGFuZGxlT25LZXlQcmVzcyhldik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIFdoZW4gYSBrZXkgaXMgZG93blxyXG4gICAgICogQHBhcmFtIGtleWJvYXJkRXZlbnQgLSBLZXlib2FyZCBldmVudCBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25LZXlEb3duKGtleWJvYXJkRXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuXHRpZiAoa2V5Ym9hcmRFdmVudC5jdHJsS2V5KSB7XHJcblx0XHRpZiAoa2V5Ym9hcmRFdmVudC5rZXkgPT0gJ3YnKSB7XHJcblx0XHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkudGhlbih0ZXh0ID0+IHtcclxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGNvbnN0IGNoYXIgPSB0ZXh0LmNoYXJBdChpKTtcclxuXHRcdFx0XHRcdGNvbnN0IGtleSA9IGNoYXIuY2hhckNvZGVBdCgwKTtcclxuXHRcdFx0XHRcdHNlbGYudWVJbnB1dEtleUJvYXJkTWVzc2FnZS5zZW5kS2V5RG93bihrZXksIGtleWJvYXJkRXZlbnQucmVwZWF0KTtcclxuXHRcdFx0XHRcdGRvY3VtZW50Lm9ua2V5cHJlc3MobmV3IEtleWJvYXJkRXZlbnQoXCJrZXlwcmVzc1wiLCB7IGNoYXJDb2RlOiBrZXkgfSkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkuY2F0Y2goZXJyID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVhZCBjbGlwYm9hcmQgY29udGVudHM6ICcsIGVycik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGtleWJvYXJkRXZlbnQua2V5ID09ICdiJyl7XHJcblx0XHRcdGNvbnNvbGUubG9nKCduYW1lJyk7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFVpSW50ZXJhY3Rpb24oSlNPTi5zdHJpbmdpZnkoeyBcIk5hbWVcIiA6ICdSYW5kb21OYW1lJyB9KSk7XHJcblx0XHR9XHJcblx0XHRpZiAoa2V5Ym9hcmRFdmVudC5rZXkgPT0gJ2MnKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdjb3B5Jyk7XHJcblx0XHRcdC8vdGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJyZXF1ZXN0SW5wdXRTZWxlY3Rpb25cIik7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5nZXRLZXljb2RlKGtleWJvYXJkRXZlbnQpID09IFNwZWNpYWxLZXlDb2Rlcy5iYWNrU3BhY2UpIHtcclxuXHRcdFx0Ly8gY2xlYXIgaW5wdXQgYm94XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IGtleSA9IGtleWJvYXJkRXZlbnQua2V5O1xyXG5cdFx0aWYgKGtleSA9PSAnVW5pZGVudGlmaWVkJykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR0aGlzLnVlSW5wdXRLZXlCb2FyZE1lc3NhZ2Uuc2VuZEtleURvd24odGhpcy5nZXRLZXljb2RlKGtleWJvYXJkRXZlbnQpLCBrZXlib2FyZEV2ZW50LnJlcGVhdCk7XHJcblxyXG5cdFx0Ly8gYmFja1NwYWNlIGlzIG5vdCBjb25zaWRlcmVkIGEga2V5cHJlc3MgaW4gSmF2YVNjcmlwdCBidXQgd2UgbmVlZCBpdFxyXG5cdFx0Ly8gdG8gYmUgc28gY2hhcmFjdGVycyBtYXkgYmUgZGVsZXRlZCBpbiBhIFVFNCB0ZXh0IGVudHJ5IGZpZWxkLlxyXG5cdFx0aWYgKGtleWJvYXJkRXZlbnQua2V5Q29kZSA9PT0gU3BlY2lhbEtleUNvZGVzLmJhY2tTcGFjZSkge1xyXG5cdFx0XHRkb2N1bWVudC5vbmtleXByZXNzKG5ldyBLZXlib2FyZEV2ZW50KFwia2V5cHJlc3NcIiwgeyBjaGFyQ29kZTogU3BlY2lhbEtleUNvZGVzLmJhY2tTcGFjZSB9KSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmICh0aGlzLnN1cHByZXNzQnJvd3NlcktleXMgJiYgdGhpcy5pc0tleUNvZGVCcm93c2VyS2V5KGtleWJvYXJkRXZlbnQua2V5Q29kZSkpIHtcclxuXHRcdGtleWJvYXJkRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHR9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBoYW5kbGVzIHdoZW4gYSBrZXkgaXMgdXBcclxuICAgICAqIEBwYXJhbSBrZXlib2FyZEV2ZW50IC0gS2V5Ym9hcmQgZXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25LZXlVcChrZXlib2FyZEV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcImhhbmRsZU9uS2V5VXBcIiwgNik7XHJcbiAgICAgICAgdGhpcy51ZUlucHV0S2V5Qm9hcmRNZXNzYWdlLnNlbmRLZXlVcCh0aGlzLmdldEtleWNvZGUoa2V5Ym9hcmRFdmVudCkpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdXBwcmVzc0Jyb3dzZXJLZXlzICYmIHRoaXMuaXNLZXlDb2RlQnJvd3NlcktleShrZXlib2FyZEV2ZW50LmtleUNvZGUpKSB7XHJcbiAgICAgICAgICAgIGtleWJvYXJkRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gYSBrZXkgaXMgcHJlc3NcclxuICAgICAqIEBwYXJhbSBrZXlib2FyZCAtIEtleWJvYXJkIEV2ZW50XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU9uS2V5UHJlc3Moa2V5Ym9hcmQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiaGFuZGxlT25rZXlwcmVzc1wiLCA2KTtcclxuICAgICAgICB0aGlzLnVlSW5wdXRLZXlCb2FyZE1lc3NhZ2Uuc2VuZEtleVByZXNzKGtleWJvYXJkLmNoYXJDb2RlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIEtleWNvZGUgb2YgdGhlIEtleSBwcmVzc2VkXHJcbiAgICAgKiBAcGFyYW0ga2V5Ym9hcmRFdmVudCAtIEtleSBib2FyZCBFdmVudFxyXG4gICAgICogQHJldHVybnMgdGhlIGtleSBjb2RlIG9mIHRoZSBLZXlcclxuICAgICAqL1xyXG4gICAgZ2V0S2V5Y29kZShrZXlib2FyZEV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgLy9OZWVkIHRvIG1vdmUgdGhpcyB0byBhIG5ld2VyIHZlcnNpb24gdXNpbmcga2V5Ym9hcmQgZXZlbnQgbG9jYXRpb24uIGFzIGtleWJvYXJkRXZlbnQua2V5Y29kZSBpcyBkZXByZWNhdGVkXHJcblxyXG4gICAgICAgIGlmIChrZXlib2FyZEV2ZW50LmtleUNvZGUgPT09IFNwZWNpYWxLZXlDb2Rlcy5zaGlmdCAmJiBrZXlib2FyZEV2ZW50LmNvZGUgPT09ICdTaGlmdFJpZ2h0JykgcmV0dXJuIFNwZWNpYWxLZXlDb2Rlcy5yaWdodFNoaWZ0O1xyXG4gICAgICAgIGVsc2UgaWYgKGtleWJvYXJkRXZlbnQua2V5Q29kZSA9PT0gU3BlY2lhbEtleUNvZGVzLmNvbnRyb2wgJiYga2V5Ym9hcmRFdmVudC5jb2RlID09PSAnQ29udHJvbFJpZ2h0JykgcmV0dXJuIFNwZWNpYWxLZXlDb2Rlcy5yaWdodENvbnRyb2w7XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5Ym9hcmRFdmVudC5rZXlDb2RlID09PSBTcGVjaWFsS2V5Q29kZXMuYWx0ICYmIGtleWJvYXJkRXZlbnQuY29kZSA9PT0gJ0FsdFJpZ2h0JykgcmV0dXJuIFNwZWNpYWxLZXlDb2Rlcy5yaWdodEFsdDtcclxuICAgICAgICBlbHNlIHJldHVybiBrZXlib2FyZEV2ZW50LmtleUNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCcm93c2VyIGtleXMgZG8gbm90IGhhdmUgYSBjaGFyQ29kZSBzbyB3ZSBvbmx5IG5lZWQgdG8gdGVzdCBrZXlDb2RlLlxyXG4gICAgICovXHJcbiAgICBpc0tleUNvZGVCcm93c2VyS2V5KGtleUNvZGU6IG51bWJlcikge1xyXG4gICAgICAgIC8vIEZ1bmN0aW9uIGtleXMgb3IgdGFiIGtleS5cclxuXHRpZiAoa2V5Q29kZSA9PSAxMTYgfHwga2V5Q29kZSA9PSAxMjIpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4ga2V5Q29kZSA+PSAxMTIgJiYga2V5Q29kZSA8PSAxMjMgfHwga2V5Q29kZSA9PT0gOTtcclxuICAgIH1cclxufVxyXG4vKiA1NDU3NTI0ZjRkNGQgKi9cclxuIiwiLyoqXHJcbiAqIE1vdXNlIEJ1dHRvbiBEYXRhXHJcbiAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudC9idXR0b259XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTW91c2VCdXR0b24ge1xyXG5cdHN0YXRpYyBtYWluQnV0dG9uID0gMDtcdFx0XHQvLyBMZWZ0IGJ1dHRvbi5cclxuXHRzdGF0aWMgYXV4aWxpYXJ5QnV0dG9uID0gMTtcdFx0Ly8gV2hlZWwgYnV0dG9uLlxyXG5cdHN0YXRpYyBzZWNvbmRhcnlCdXR0b24gPSAyO1x0XHQvLyBSaWdodCBidXR0b24uXHJcblx0c3RhdGljIGZvdXJ0aEJ1dHRvbiA9IDM7XHRcdC8vIEJyb3dzZXIgQmFjayBidXR0b24uXHJcblx0c3RhdGljIGZpZnRoQnV0dG9uID0gNDtcdFx0XHQvLyBCcm93c2VyIEZvcndhcmQgYnV0dG9uLlxyXG59XHJcblxyXG4vKipcclxuICogTW91c2UgQnV0dG9uIE1hc2sgRGF0YVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01vdXNlRXZlbnQvYnV0dG9uc31cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb3VzZUJ1dHRvbnNNYXNrIHtcclxuXHRzdGF0aWMgcHJpbWFyeUJ1dHRvbiA9IDE7XHRcdC8vIExlZnQgYnV0dG9uLlxyXG5cdHN0YXRpYyBzZWNvbmRhcnlCdXR0b24gPSAyO1x0XHQvLyBSaWdodCBidXR0b24uXHJcblx0c3RhdGljIGF1eGlsaWFyeUJ1dHRvbiA9IDQ7XHRcdC8vIFdoZWVsIGJ1dHRvbi5cclxuXHRzdGF0aWMgZm91cnRoQnV0dG9uID0gODtcdFx0Ly8gQnJvd3NlciBCYWNrIGJ1dHRvbi5cclxuXHRzdGF0aWMgZmlmdGhCdXR0b24gPSAxNjtcdFx0Ly8gQnJvd3NlciBGb3J3YXJkIGJ1dHRvbi5cclxufSIsImltcG9ydCB7IFVlSW5wdXRNb3VzZU1lc3NhZ2UgfSBmcm9tIFwiLi4vVWVJbnN0YW5jZU1lc3NhZ2UvVWVJbnB1dE1vdXNlTWVzc2FnZVwiO1xyXG5pbXBvcnQgeyBNb3VzZUJ1dHRvbnNNYXNrLCBNb3VzZUJ1dHRvbiB9IGZyb20gXCIuL01vdXNlQnV0dG9uc1wiO1xyXG5pbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IE5vcm1hbGlzZUFuZFF1YW50aXNlU2lnbmVkLCBVbnF1YW50aXNlZEFuZERlbm9ybWFsaXNlVW5zaWduZWQsIE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQgfSBmcm9tIFwiLi9Db29yZGluYXRlRGF0YVwiXHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IElWaWRlb1BsYXllciB9IGZyb20gXCIuLi9WaWRlb1BsYXllci9JVmlkZW9QbGF5ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSBNb3VzZSBJbnB1dHMgZm9yIHRoZSBkb2N1bWVudFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vdXNlQ29udHJvbGxlciB7XHJcblxyXG5cdHJlYWRvbmx5IHVuc2lnbmVkT3V0T2ZSYW5nZTogbnVtYmVyID0gNjU1MzU7XHJcblx0cmVhZG9ubHkgc2lnbmVkT3V0T2ZSYW5nZTogbnVtYmVyID0gMzI3Njc7XHJcblxyXG5cdHVlSW5wdXRNb3VzZU1lc3NhZ2U6IFVlSW5wdXRNb3VzZU1lc3NhZ2U7XHJcblx0dmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcjtcclxuXHJcblx0cHJpbnRJbnB1dHM6IGJvb2xlYW47XHJcblxyXG5cdC8qKlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBkYXRhQ2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyKSB7XHJcblx0XHR0aGlzLnByaW50SW5wdXRzID0gZmFsc2U7XHJcblx0XHR0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2UgPSBuZXcgVWVJbnB1dE1vdXNlTWVzc2FnZShkYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG5cdFx0dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlciA9IHZpZGVvRWxlbWVudFByb3ZpZGVyO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcmVsZWFzZWRcclxuXHQgKiBAcGFyYW0gYnV0dG9ucyAtIE1vdXNlIEJ1dHRvblxyXG5cdCAqIEBwYXJhbSBYIC0gTW91c2UgcG9pbnRlciBYIGNvb3JkaW5hdGVcclxuXHQgKiBAcGFyYW0gWSAtIE1vdXNlIHBvaW50ZXIgWSBjb29yZGluYXRlXHJcblx0ICovXHJcblx0cmVsZWFzZU1vdXNlQnV0dG9ucyhidXR0b25zOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2sucHJpbWFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZVVwKE1vdXNlQnV0dG9uLm1haW5CdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJ1dHRvbnMgJiBNb3VzZUJ1dHRvbnNNYXNrLnNlY29uZGFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZVVwKE1vdXNlQnV0dG9uLnNlY29uZGFyeUJ1dHRvbiwgWCwgWSk7XHJcblx0XHR9XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2suYXV4aWxpYXJ5QnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2VuZE1vdXNlVXAoTW91c2VCdXR0b24uYXV4aWxpYXJ5QnV0dG9uLCBYLCBZKTtcclxuXHRcdH1cclxuXHRcdGlmIChidXR0b25zICYgTW91c2VCdXR0b25zTWFzay5mb3VydGhCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5zZW5kTW91c2VVcChNb3VzZUJ1dHRvbi5mb3VydGhCdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJ1dHRvbnMgJiBNb3VzZUJ1dHRvbnNNYXNrLmZpZnRoQnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2VuZE1vdXNlVXAoTW91c2VCdXR0b24uZmlmdGhCdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZFxyXG5cdCAqIEBwYXJhbSBidXR0b25zIC0gTW91c2UgQnV0dG9uXHJcblx0ICogQHBhcmFtIFggLSBNb3VzZSBwb2ludGVyIFggY29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZIC0gTW91c2UgcG9pbnRlciBZIGNvb3JkaW5hdGVcclxuXHQgKi9cclxuXHRwcmVzc01vdXNlQnV0dG9ucyhidXR0b25zOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2sucHJpbWFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZURvd24oTW91c2VCdXR0b24ubWFpbkJ1dHRvbiwgWCwgWSk7XHJcblx0XHR9XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2suc2Vjb25kYXJ5QnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2VuZE1vdXNlRG93bihNb3VzZUJ1dHRvbi5zZWNvbmRhcnlCdXR0b24sIFgsIFkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGJ1dHRvbnMgJiBNb3VzZUJ1dHRvbnNNYXNrLmF1eGlsaWFyeUJ1dHRvbikge1xyXG5cdFx0XHR0aGlzLnNlbmRNb3VzZURvd24oTW91c2VCdXR0b24uYXV4aWxpYXJ5QnV0dG9uLCBYLCBZKTtcclxuXHRcdH1cclxuXHRcdGlmIChidXR0b25zICYgTW91c2VCdXR0b25zTWFzay5mb3VydGhCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5zZW5kTW91c2VEb3duKE1vdXNlQnV0dG9uLmZvdXJ0aEJ1dHRvbiwgWCwgWSk7XHJcblx0XHR9XHJcblx0XHRpZiAoYnV0dG9ucyAmIE1vdXNlQnV0dG9uc01hc2suZmlmdGhCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5zZW5kTW91c2VEb3duKE1vdXNlQnV0dG9uLmZpZnRoQnV0dG9uLCBYLCBZKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSB3aGVuIGEgbW91c2UgaXMgbW92ZWRcclxuXHQgKiBAcGFyYW0gWCAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZIC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIGRlbHRhWCAtIE1vdXNlIERlbHRhIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBkZWx0YVkgLSBNb3VzZSBEZWx0YSBZIENvb3JkaW5hdGVcclxuXHQgKi9cclxuXHRzZW5kTW91c2VNb3ZlKFg6IG51bWJlciwgWTogbnVtYmVyLCBkZWx0YVg6IG51bWJlciwgZGVsdGFZOiBudW1iZXIpIHtcclxuXHRcdGlmICh0aGlzLnByaW50SW5wdXRzKSB7XHJcblx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYHg6ICR7WH0sIHk6JHtZfSwgZFg6ICR7ZGVsdGFYfSwgZFk6ICR7ZGVsdGFZfWAsIDcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBtb3VzZUNvcmQ6IE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQgPSB0aGlzLm5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoWCwgWSk7XHJcblx0XHRsZXQgZGVsdGFDb2RlOiBOb3JtYWxpc2VBbmRRdWFudGlzZVNpZ25lZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VTaWduZWQoZGVsdGFYLCBkZWx0YVkpO1xyXG5cclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VNb3ZlKG1vdXNlQ29yZC54LCBtb3VzZUNvcmQueSwgZGVsdGFDb2RlLngsIGRlbHRhQ29kZS55KTtcclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZCBkb3duXHJcblx0ICogQHBhcmFtIGJ1dHRvbiAtIE1vdXNlIEJ1dHRvbiBQcmVzc2VkXHJcblx0ICogQHBhcmFtIFggIC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIFkgIC0gTW91c2UgWSBDb29yZGluYXRlXHJcblx0ICovXHJcblx0c2VuZE1vdXNlRG93bihidXR0b246IG51bWJlciwgWDogbnVtYmVyLCBZOiBudW1iZXIpIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYG1vdXNlIGJ1dHRvbiAke2J1dHRvbn0gZG93biBhdCAoJHtYfSwgJHtZfSlgLCA2KTtcclxuXHRcdGxldCBjb29yZDogTm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZChYLCBZKTtcclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VEb3duKGJ1dHRvbiwgY29vcmQueCwgY29vcmQueSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gYSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZCB1cFxyXG5cdCAqIEBwYXJhbSBidXR0b24gLSBNb3VzZSBCdXR0b24gUHJlc3NlZFxyXG5cdCAqIEBwYXJhbSBYICAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZICAtIE1vdXNlIFkgQ29vcmRpbmF0ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZVVwKGJ1dHRvbjogbnVtYmVyLCBYOiBudW1iZXIsIFk6IG51bWJlcikge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgbW91c2UgYnV0dG9uICR7YnV0dG9ufSB1cCBhdCAoJHtYfSwgJHtZfSlgLCA2KTtcclxuXHRcdGxldCBjb29yZDogTm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCA9IHRoaXMubm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZChYLCBZKTtcclxuXHRcdHRoaXMudWVJbnB1dE1vdXNlTWVzc2FnZS5zZW5kTW91c2VVcChidXR0b24sIGNvb3JkLngsIGNvb3JkLnkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIGEgbW91c2Ugd2hlZWwgZXZlbnRcclxuXHQgKiBAcGFyYW0gZGVsdGFZIC0gTW91c2UgV2hlZWwgZGF0YVxyXG5cdCAqIEBwYXJhbSBYICAtIE1vdXNlIFggQ29vcmRpbmF0ZVxyXG5cdCAqIEBwYXJhbSBZICAtIE1vdXNlIFkgQ29vcmRpbmF0ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZVdoZWVsKGRlbHRhWTogbnVtYmVyLCBYOiBudW1iZXIsIFk6IG51bWJlcikge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgbW91c2Ugd2hlZWwgd2l0aCBkZWx0YSAke2RlbHRhWX0gYXQgKCR7WH0sICR7WX0pYCwgNik7XHJcblx0XHRsZXQgY29vcmQ6IE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQgPSB0aGlzLm5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoWCwgWSk7XHJcblx0XHR0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2Uuc2VuZE1vdXNlV2hlZWwoZGVsdGFZICogLTEsIGNvb3JkLngsIGNvb3JkLnkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyBtb3VzZSBlbnRlclxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZUVudGVyKCkge1xyXG5cdFx0dGhpcy51ZUlucHV0TW91c2VNZXNzYWdlLnNlbmRNb3VzZUVudGVyKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIG1vdXNlIExlYXZlXHJcblx0ICovXHJcblx0c2VuZE1vdXNlTGVhdmUoKSB7XHJcblx0XHR0aGlzLnVlSW5wdXRNb3VzZU1lc3NhZ2Uuc2VuZE1vdXNlTGVhdmUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE5vcm1hbGlzZXMgYW5kIFF1YW50aXNlZCB0aGUgTW91c2UgQ29vcmRpbmF0ZXNcdFxyXG5cdCAqIEBwYXJhbSB4IC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIHkgLSBNb3VzZSBZIENvb3JkaW5hdGVcclxuXHQgKiBAcmV0dXJucyAtIE5vcm1hbGl6ZSBBbmQgUXVhbnRpemUgVW5zaWduZWQgRGF0YSBUeXBlXHJcblx0ICovXHJcblx0bm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCh4OiBudW1iZXIsIHk6IG51bWJlcik6IE5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQge1xyXG5cclxuXHRcdGxldCByb290RGl2ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKTtcclxuXHRcdGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuXHRcdGlmIChyb290RGl2ICYmIHZpZGVvRWxlbWVudCkge1xyXG5cdFx0XHRsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSByb290RGl2LmNsaWVudEhlaWdodCAvIHJvb3REaXYuY2xpZW50V2lkdGg7XHJcblx0XHRcdGxldCB2aWRlb0FzcGVjdFJhdGlvID0gdmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0IC8gdmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XHJcblxyXG5cdFx0XHQvLyBVbnNpZ25lZCBYWSBwb3NpdGlvbnMgYXJlIHRoZSByYXRpbyAoMC4wLi4xLjApIGFsb25nIGEgdmlld3BvcnQgYXhpcyxcclxuXHRcdFx0Ly8gcXVhbnRpemVkIGludG8gYW4gdWludDE2ICgwLi42NTUzNikuXHJcblx0XHRcdC8vIFNpZ25lZCBYWSBkZWx0YXMgYXJlIHRoZSByYXRpbyAoLTEuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcblx0XHRcdC8vIHF1YW50aXplZCBpbnRvIGFuIGludDE2ICgtMzI3NjcuLjMyNzY3KS5cclxuXHRcdFx0Ly8gVGhpcyBhbGxvd3MgdGhlIGJyb3dzZXIgdmlld3BvcnQgYW5kIGNsaWVudCB2aWV3cG9ydCB0byBoYXZlIGEgZGlmZmVyZW50XHJcblx0XHRcdC8vIHNpemUuXHJcblx0XHRcdC8vIEhhY2s6IEN1cnJlbnRseSB3ZSBzZXQgYW4gb3V0LW9mLXJhbmdlIHBvc2l0aW9uIHRvIGFuIGV4dHJlbWUgKDY1NTM1KVxyXG5cdFx0XHQvLyBhcyB3ZSBjYW4ndCB5ZXQgYWNjdXJhdGVseSBkZXRlY3QgbW91c2UgZW50ZXIgYW5kIGxlYXZlIGV2ZW50c1xyXG5cdFx0XHQvLyBwcmVjaXNlbHkgaW5zaWRlIGEgdmlkZW8gd2l0aCBhbiBhc3BlY3QgcmF0aW8gd2hpY2ggY2F1c2VzIG1hdHRlcy5cclxuXHRcdFx0aWYgKHBsYXllckFzcGVjdFJhdGlvID4gdmlkZW9Bc3BlY3RSYXRpbykge1xyXG5cdFx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1NldHVwIE5vcm1hbGl6ZSBhbmQgUXVhbnRpemUgZm9yIHBsYXllckFzcGVjdFJhdGlvID4gdmlkZW9Bc3BlY3RSYXRpbycsIDYpO1xyXG5cclxuXHRcdFx0XHRsZXQgcmF0aW8gPSBwbGF5ZXJBc3BlY3RSYXRpbyAvIHZpZGVvQXNwZWN0UmF0aW87XHJcblx0XHRcdFx0Ly8gVW5zaWduZWQuXHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRYID0geCAvIHJvb3REaXYuY2xpZW50V2lkdGg7XHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRZID0gcmF0aW8gKiAoeSAvIHJvb3REaXYuY2xpZW50SGVpZ2h0IC0gMC41KSArIDAuNTtcclxuXHJcblx0XHRcdFx0aWYgKG5vcm1hbGl6ZWRYIDwgMC4wIHx8IG5vcm1hbGl6ZWRYID4gMS4wIHx8IG5vcm1hbGl6ZWRZIDwgMC4wIHx8IG5vcm1hbGl6ZWRZID4gMS4wKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRpblJhbmdlOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0eDogdGhpcy51bnNpZ25lZE91dE9mUmFuZ2UsXHJcblx0XHRcdFx0XHRcdHk6IHRoaXMudW5zaWduZWRPdXRPZlJhbmdlXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdGluUmFuZ2U6IHRydWUsXHJcblx0XHRcdFx0XHRcdHg6IG5vcm1hbGl6ZWRYICogKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSksXHJcblx0XHRcdFx0XHRcdHk6IG5vcm1hbGl6ZWRZICogKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSlcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1NldHVwIE5vcm1hbGl6ZSBhbmQgUXVhbnRpemUgZm9yIHBsYXllckFzcGVjdFJhdGlvIDw9IHZpZGVvQXNwZWN0UmF0aW8nLCA2KTtcclxuXHJcblx0XHRcdFx0bGV0IHJhdGlvID0gdmlkZW9Bc3BlY3RSYXRpbyAvIHBsYXllckFzcGVjdFJhdGlvO1xyXG5cdFx0XHRcdC8vIFVuc2lnbmVkLlxyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWCA9IHJhdGlvICogKHggLyByb290RGl2LmNsaWVudFdpZHRoIC0gMC41KSArIDAuNTtcclxuXHRcdFx0XHRsZXQgbm9ybWFsaXplZFkgPSB5IC8gcm9vdERpdi5jbGllbnRIZWlnaHQ7XHJcblx0XHRcdFx0aWYgKG5vcm1hbGl6ZWRYIDwgMC4wIHx8IG5vcm1hbGl6ZWRYID4gMS4wIHx8IG5vcm1hbGl6ZWRZIDwgMC4wIHx8IG5vcm1hbGl6ZWRZID4gMS4wKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRpblJhbmdlOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0eDogdGhpcy51bnNpZ25lZE91dE9mUmFuZ2UsXHJcblx0XHRcdFx0XHRcdHk6IHRoaXMudW5zaWduZWRPdXRPZlJhbmdlXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRpblJhbmdlOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHR4OiBub3JtYWxpemVkWCAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpLFxyXG5cdFx0XHRcdFx0XHR5OiBub3JtYWxpemVkWSAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVub3JtYWxpc2VzIGFuZCB1bnF1YW50aXNlZCB0aGUgTW91c2UgQ29vcmRpbmF0ZXNcdFxyXG5cdCAqIEBwYXJhbSB4IC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIHkgLSBNb3VzZSBZIENvb3JkaW5hdGVcclxuXHQgKiBAcmV0dXJucyAtIHVucXVhbnRpc2UgYW5kIERlbm9ybWFsaXplIFVuc2lnbmVkIERhdGEgVHlwZVxyXG5cdCAqL1xyXG5cdHVucXVhbnRpc2VBbmREZW5vcm1hbGlzZVVuc2lnbmVkKHg6IG51bWJlciwgeTogbnVtYmVyKTogVW5xdWFudGlzZWRBbmREZW5vcm1hbGlzZVVuc2lnbmVkIHtcclxuXHJcblx0XHRsZXQgcm9vdERpdiA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCk7XHJcblx0XHRsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuXHJcblx0XHRpZiAocm9vdERpdiAmJiB2aWRlb0VsZW1lbnQpIHtcclxuXHRcdFx0bGV0IHBsYXllckFzcGVjdFJhdGlvID0gcm9vdERpdi5jbGllbnRIZWlnaHQgLyByb290RGl2LmNsaWVudFdpZHRoO1xyXG5cdFx0XHRsZXQgdmlkZW9Bc3BlY3RSYXRpbyA9IHZpZGVvRWxlbWVudC52aWRlb0hlaWdodCAvIHZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xyXG5cclxuXHRcdFx0Ly8gVW5zaWduZWQgWFkgcG9zaXRpb25zIGFyZSB0aGUgcmF0aW8gKDAuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcblx0XHRcdC8vIHF1YW50aXplZCBpbnRvIGFuIHVpbnQxNiAoMC4uNjU1MzYpLlxyXG5cdFx0XHQvLyBTaWduZWQgWFkgZGVsdGFzIGFyZSB0aGUgcmF0aW8gKC0xLjAuLjEuMCkgYWxvbmcgYSB2aWV3cG9ydCBheGlzLFxyXG5cdFx0XHQvLyBxdWFudGl6ZWQgaW50byBhbiBpbnQxNiAoLTMyNzY3Li4zMjc2NykuXHJcblx0XHRcdC8vIFRoaXMgYWxsb3dzIHRoZSBicm93c2VyIHZpZXdwb3J0IGFuZCBjbGllbnQgdmlld3BvcnQgdG8gaGF2ZSBhIGRpZmZlcmVudFxyXG5cdFx0XHQvLyBzaXplLlxyXG5cdFx0XHQvLyBIYWNrOiBDdXJyZW50bHkgd2Ugc2V0IGFuIG91dC1vZi1yYW5nZSBwb3NpdGlvbiB0byBhbiBleHRyZW1lICg2NTUzNSlcclxuXHRcdFx0Ly8gYXMgd2UgY2FuJ3QgeWV0IGFjY3VyYXRlbHkgZGV0ZWN0IG1vdXNlIGVudGVyIGFuZCBsZWF2ZSBldmVudHNcclxuXHRcdFx0Ly8gcHJlY2lzZWx5IGluc2lkZSBhIHZpZGVvIHdpdGggYW4gYXNwZWN0IHJhdGlvIHdoaWNoIGNhdXNlcyBtYXR0ZXMuXHJcblx0XHRcdGlmIChwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8pIHtcclxuXHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA+IHZpZGVvQXNwZWN0UmF0aW8nLCA2KTtcclxuXHJcblx0XHRcdFx0bGV0IHJhdGlvID0gcGxheWVyQXNwZWN0UmF0aW8gLyB2aWRlb0FzcGVjdFJhdGlvO1xyXG5cdFx0XHRcdC8vIFVuc2lnbmVkLlxyXG5cdFx0XHRcdGxldCBub3JtYWxpemVkWCA9IHggLyAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKTtcclxuXHRcdFx0XHRsZXQgbm9ybWFsaXplZFkgPSAoeSAvICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpIC0gMC41KSAvIHJhdGlvICsgMC41O1xyXG5cclxuXHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0eDogbm9ybWFsaXplZFggKiByb290RGl2LmNsaWVudFdpZHRoLFxyXG5cdFx0XHRcdFx0eTogbm9ybWFsaXplZFkgKiByb290RGl2LmNsaWVudEhlaWdodFxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnU2V0dXAgTm9ybWFsaXplIGFuZCBRdWFudGl6ZSBmb3IgcGxheWVyQXNwZWN0UmF0aW8gPD0gdmlkZW9Bc3BlY3RSYXRpbycsIDYpO1xyXG5cclxuXHRcdFx0XHRsZXQgcmF0aW8gPSB2aWRlb0FzcGVjdFJhdGlvIC8gcGxheWVyQXNwZWN0UmF0aW87XHJcblx0XHRcdFx0Ly8gVW5zaWduZWQuXHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRYID0gKHggLyAodGhpcy51bnNpZ25lZE91dE9mUmFuZ2UgKyAxKSAtIDAuNSkgLyByYXRpbyArIDAuNTtcclxuXHRcdFx0XHRsZXQgbm9ybWFsaXplZFkgPSB5IC8gKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSk7XHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdHg6IG5vcm1hbGl6ZWRYICogcm9vdERpdi5jbGllbnRXaWR0aCxcclxuXHRcdFx0XHRcdHk6IG5vcm1hbGl6ZWRZICogcm9vdERpdi5jbGllbnRIZWlnaHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE5vcm1hbGlzZXMgYW5kIFF1YW50aXNlZCB0aGUgTW91c2UgQ29vcmRpbmF0ZXNcdFxyXG5cdCAqIEBwYXJhbSB4IC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIHkgLSBNb3VzZSBZIENvb3JkaW5hdGVcclxuXHQgKiBAcmV0dXJucyAtIE5vcm1hbGl6ZSBBbmQgUXVhbnRpemUgU2lnbmVkIERhdGEgVHlwZVxyXG5cdCAqL1xyXG5cdG5vcm1hbGlzZUFuZFF1YW50aXNlU2lnbmVkKHg6IG51bWJlciwgeTogbnVtYmVyKTogTm9ybWFsaXNlQW5kUXVhbnRpc2VTaWduZWQge1xyXG5cclxuXHRcdGxldCByb290RGl2ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKTtcclxuXHRcdGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuXHRcdGlmIChyb290RGl2ICYmIHZpZGVvRWxlbWVudCkge1xyXG5cdFx0XHRsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSByb290RGl2LmNsaWVudEhlaWdodCAvIHJvb3REaXYuY2xpZW50V2lkdGg7XHJcblx0XHRcdGxldCB2aWRlb0FzcGVjdFJhdGlvID0gdmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0IC8gdmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XHJcblxyXG5cdFx0XHQvLyBVbnNpZ25lZCBYWSBwb3NpdGlvbnMgYXJlIHRoZSByYXRpbyAoMC4wLi4xLjApIGFsb25nIGEgdmlld3BvcnQgYXhpcyxcclxuXHRcdFx0Ly8gcXVhbnRpemVkIGludG8gYW4gdWludDE2ICgwLi42NTUzNikuXHJcblx0XHRcdC8vIFNpZ25lZCBYWSBkZWx0YXMgYXJlIHRoZSByYXRpbyAoLTEuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcblx0XHRcdC8vIHF1YW50aXplZCBpbnRvIGFuIGludDE2ICgtMzI3NjcuLjMyNzY3KS5cclxuXHRcdFx0Ly8gVGhpcyBhbGxvd3MgdGhlIGJyb3dzZXIgdmlld3BvcnQgYW5kIGNsaWVudCB2aWV3cG9ydCB0byBoYXZlIGEgZGlmZmVyZW50XHJcblx0XHRcdC8vIHNpemUuXHJcblx0XHRcdC8vIEhhY2s6IEN1cnJlbnRseSB3ZSBzZXQgYW4gb3V0LW9mLXJhbmdlIHBvc2l0aW9uIHRvIGFuIGV4dHJlbWUgKDY1NTM1KVxyXG5cdFx0XHQvLyBhcyB3ZSBjYW4ndCB5ZXQgYWNjdXJhdGVseSBkZXRlY3QgbW91c2UgZW50ZXIgYW5kIGxlYXZlIGV2ZW50c1xyXG5cdFx0XHQvLyBwcmVjaXNlbHkgaW5zaWRlIGEgdmlkZW8gd2l0aCBhbiBhc3BlY3QgcmF0aW8gd2hpY2ggY2F1c2VzIG1hdHRlcy5cclxuXHRcdFx0aWYgKHBsYXllckFzcGVjdFJhdGlvID4gdmlkZW9Bc3BlY3RSYXRpbykge1xyXG5cdFx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1NldHVwIE5vcm1hbGl6ZSBhbmQgUXVhbnRpemUgZm9yIHBsYXllckFzcGVjdFJhdGlvID4gdmlkZW9Bc3BlY3RSYXRpbycsIDYpO1xyXG5cclxuXHRcdFx0XHRsZXQgcmF0aW8gPSBwbGF5ZXJBc3BlY3RSYXRpbyAvIHZpZGVvQXNwZWN0UmF0aW87XHJcblx0XHRcdFx0Ly8gVW5zaWduZWQuXHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRYID0geCAvICgwLjUgKiByb290RGl2LmNsaWVudFdpZHRoKTtcclxuXHRcdFx0XHRsZXQgbm9ybWFsaXplZFkgPSAocmF0aW8gKiB5KSAvICgwLjUgKiByb290RGl2LmNsaWVudEhlaWdodCk7XHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdHg6IG5vcm1hbGl6ZWRYICogdGhpcy5zaWduZWRPdXRPZlJhbmdlLFxyXG5cdFx0XHRcdFx0eTogbm9ybWFsaXplZFkgKiB0aGlzLnNpZ25lZE91dE9mUmFuZ2VcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICh0aGlzLnByaW50SW5wdXRzKSB7XHJcblx0XHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA8PSB2aWRlb0FzcGVjdFJhdGlvJywgNik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxldCByYXRpbyA9IHZpZGVvQXNwZWN0UmF0aW8gLyBwbGF5ZXJBc3BlY3RSYXRpbztcclxuXHRcdFx0XHQvLyBTaWduZWQuXHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRYID0gKHJhdGlvICogeCkgLyAoMC41ICogcm9vdERpdi5jbGllbnRXaWR0aCk7XHJcblx0XHRcdFx0bGV0IG5vcm1hbGl6ZWRZID0geSAvICgwLjUgKiByb290RGl2LmNsaWVudEhlaWdodCk7XHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdHg6IG5vcm1hbGl6ZWRYICogdGhpcy5zaWduZWRPdXRPZlJhbmdlLFxyXG5cdFx0XHRcdFx0eTogbm9ybWFsaXplZFkgKiB0aGlzLnNpZ25lZE91dE9mUmFuZ2VcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwiLyoqXHJcbiAqIFJlZ2lzdGVycyB0aGUgU3BlY2lhbCBLZXkgY29kZXNcclxuICogIE11c3QgYmUga2VwdCBpbiBzeW5jIHdpdGggSmF2YVNjcmlwdEtleUNvZGVUb0ZLZXkgQysrIGFycmF5LiBcclxuICogVGhlIGluZGV4IG9mIHRoZSBlbnRyeSBpbiB0aGUgYXJyYXkgaXMgdGhlIHNwZWNpYWwga2V5IGNvZGUgZ2l2ZW4gYmVsb3cuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3BlY2lhbEtleUNvZGVzIHtcclxuXHRzdGF0aWMgYmFja1NwYWNlID0gODtcclxuXHRzdGF0aWMgc2hpZnQgPSAxNjtcclxuXHRzdGF0aWMgY29udHJvbCA9IDE3O1xyXG5cdHN0YXRpYyBhbHQgPSAxODtcclxuXHRzdGF0aWMgcmlnaHRTaGlmdCA9IDI1MztcclxuXHRzdGF0aWMgcmlnaHRDb250cm9sID0gMjU0O1xyXG5cdHN0YXRpYyByaWdodEFsdCA9IDI1NTtcclxufVxyXG4iLCJpbXBvcnQgeyBVZUlucHV0VG91Y2hNZXNzYWdlIH0gZnJvbSBcIi4uL1VlSW5zdGFuY2VNZXNzYWdlL1VlSW5wdXRUb3VjaE1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVG91Y2hDb250cm9sbGVyIH0gZnJvbSBcIi4vSVRvdWNoQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBJVmlkZW9QbGF5ZXIgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvSVZpZGVvUGxheWVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbi8qKiBcclxuICogSGFuZGxlcyB0aGUgVG91Y2ggaW5wdXQgRXZlbnRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG91Y2hDb250cm9sbGVyIGltcGxlbWVudHMgSVRvdWNoQ29udHJvbGxlciB7XHJcbiAgICB1ZUlucHV0VG91Y2hNZXNzYWdlOiBVZUlucHV0VG91Y2hNZXNzYWdlO1xyXG4gICAgcGxheWVyRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIHRoZSBkYXRhIGNoYW5uZWwgY29udHJvbGxlciBcclxuICAgICAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gdGhlIHBsYXllciBlbGVtZW50IERPTVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlciwgcGxheWVyRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCwgdmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZSA9IG5ldyBVZUlucHV0VG91Y2hNZXNzYWdlKGRhdGFDaGFubmVsQ29udHJvbGxlciwgdmlkZW9FbGVtZW50UHJvdmlkZXIpO1xyXG4gICAgICAgIHRoaXMucGxheWVyRWxlbWVudCA9IHBsYXllckVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJFbGVtZW50Lm9udG91Y2hzdGFydCA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoU3RhcnQoZXYpO1xyXG4gICAgICAgIHRoaXMucGxheWVyRWxlbWVudC5vbnRvdWNoZW5kID0gKGV2OiBUb3VjaEV2ZW50KSA9PiB0aGlzLm9uVG91Y2hFbmQoZXYpO1xyXG4gICAgICAgIHRoaXMucGxheWVyRWxlbWVudC5vbnRvdWNobW92ZSA9IChldjogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoTW92ZShldik7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlRvdWNoIEV2ZW50cyBSZWdpc3RlcmVkXCIsIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiBhIHRvdWNoIGV2ZW50IHN0YXJ0cyBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIHRoZSB0b3VjaCBldmVudCBiZWluZyBpbnRlcmNlcHRlZCAgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hTdGFydCh0b3VjaEV2ZW50OiBUb3VjaEV2ZW50KSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIm9uIFRvdWNoIFN0YXJ0XCIsIDYpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG91Y2g6IFRvdWNoID0gdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBmaW5nZXIgPSB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vycy5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKGZpbmdlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwid2hvIGhhcyBtb3JlIHRoZW4gMTAgZmluZ2Vyc1wiLCA2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXSA9IGZpbmdlcjtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInRvdWNoLmlkZW50aWZpZXI6IFwiICsgdG91Y2guaWRlbnRpZmllciwgNik7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJmaW5nZXI6IFwiICsgZmluZ2VyLCA2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5zZW5kVG91Y2hTdGFydCh0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzKTtcclxuICAgICAgICB0b3VjaEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIGEgdG91Y2ggZXZlbnQgZW5kcyBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIHRoZSB0b3VjaCBldmVudCBiZWluZyBpbnRlcmNlcHRlZCAgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hFbmQodG91Y2hFdmVudDogVG91Y2hFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJvbiBUb3VjaCBFTkRcIiwgNik7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG91Y2ggPSB0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwib24gRm9yZ2V0IFRvdWNoXCIsIDYpO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwidG91Y2ggaWQ6IFwiICsgdG91Y2guaWRlbnRpZmllciwgNik7XHJcbiAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJGaW5nZXJzIGlkIFRvdWNoIGlkOiBcIiArIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5maW5nZXJzSWRzW3RvdWNoLmlkZW50aWZpZXJdLCA2KTtcclxuICAgICAgICAgICAgdGhpcy51ZUlucHV0VG91Y2hNZXNzYWdlLmZpbmdlcnMucHVzaCh0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXSk7XHJcbiAgICAgICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5maW5nZXJzLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2UuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXTtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInRvdWNoLmlkZW50aWZpZXI6IFwiICsgdG91Y2guaWRlbnRpZmllciwgNik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudWVJbnB1dFRvdWNoTWVzc2FnZS5zZW5kVG91Y2hFbmQodG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcyk7XHJcblx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlN1Y2Vzc2Z1bCB0b3VjaCBFTkRcIiwgNik7XHJcbiAgICAgICAgdG91Y2hFdmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB3aGVuIGEgbW92aW5nIHRvdWNoIGV2ZW50IG9jY3VycyBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIHRoZSB0b3VjaCBldmVudCBiZWluZyBpbnRlcmNlcHRlZCAgXHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hNb3ZlKHRvdWNoRXZlbnQ6IFRvdWNoRXZlbnQpIHtcclxuXHR0aGlzLnVlSW5wdXRUb3VjaE1lc3NhZ2Uuc2VuZFRvdWNoTW92ZSh0b3VjaEV2ZW50LnRvdWNoZXMpO1xyXG5cdHRvdWNoRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICAgIHN0YXRpYyB2ZXJib3NlTG9nTGV2ZWw6IG51bWJlciA9IDU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYXB0dXJlcyB0aGUgc3RhY2sgYW5kIHJldHVybnMgaXRcclxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IHN0YWNrXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBHZXRTdGFja1RyYWNlKCkge1xyXG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIGxldCBmb3JtYXR0ZWRTdGFjayA9IFwiTm8gU3RhY2sgQXZhaWxhYmxlIGZvciB0aGlzIGJyb3dzZXJcIjtcclxuXHJcbiAgICAgICAgLy8gZm9ybWF0IHRoZSBlcnJvclxyXG4gICAgICAgIGlmIChlcnJvci5zdGFjaykge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRTdGFjayA9IGVycm9yLnN0YWNrLnRvU3RyaW5nKCkucmVwbGFjZSgvRXJyb3IvZywgJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFN0YWNrO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbG9nIHZlcmJvc2l0eSBsZXZlbFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgU2V0TG9nZ2VyVmVyYm9zaXR5KHZlcmJvc2VMb2dMZXZlbDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmVyYm9zZUxvZ0xldmVsICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy52ZXJib3NlTG9nTGV2ZWwgPSB2ZXJib3NlTG9nTGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0YW5kYXJkIGxvZ2dpbmcgb3V0cHV0IFxyXG4gICAgICogQHBhcmFtIHN0YWNrIC0gdGhlIHN0YWNrIHRyYWNlXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIHRoZSBtZXNzYWdlIHRvIGJlIGxvZ2dlZFxyXG4gICAgICogQHBhcmFtIHZlcmJvc2l0eSAtIHRoZSB2ZXJib3NpdHkgbGV2ZWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIExvZyhzdGFjazogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIHZlcmJvc2l0eT86IG51bWJlcikge1xyXG4gICAgICAgIGlmICh2ZXJib3NpdHkgPiB0aGlzLnZlcmJvc2VMb2dMZXZlbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmV0dXJuU3RyaW5nID0gYExldmVsOiBMb2csIENhbGxlcjogJHtzdGFja30sIE1zZzogJHttZXNzYWdlfWA7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmV0dXJuU3RyaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdGFuZGFyZCBsb2dnaW5nIG91dHB1dCBcclxuICAgICAqIEBwYXJhbSBzdGFjayAtIHRoZSBzdGFjayB0cmFjZVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSB0aGUgbWVzc2FnZSB0byBiZSBsb2dnZWRcclxuICAgICAqIEBwYXJhbSB2ZXJib3NpdHkgLSB0aGUgdmVyYm9zaXR5IGxldmVsXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBJbmZvKHN0YWNrOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgdmVyYm9zaXR5PzogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHZlcmJvc2l0eSA+IHRoaXMudmVyYm9zZUxvZ0xldmVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXR1cm5TdHJpbmcgPSBgTGV2ZWw6IEluZm8sIE1zZzogJHttZXNzYWdlfWA7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKHJldHVyblN0cmluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RhbmRhcmQgbG9nZ2luZyBvdXRwdXQgXHJcbiAgICAgKiBAcGFyYW0gc3RhY2sgLSB0aGUgc3RhY2sgdHJhY2VcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gdGhlIG1lc3NhZ2UgdG8gYmUgbG9nZ2VkXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFcnJvcihzdGFjazogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcmV0dXJuU3RyaW5nID0gYExldmVsOiBFcnJvciwgQ2FsbGVyOiAke3N0YWNrfSwgTXNnOiAke21lc3NhZ2V9YDtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHJldHVyblN0cmluZyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaWNDb250cm9sbGVyIHtcclxuICAgIHVzZU1pYzogYm9vbGVhbjtcclxuICAgIGlzTG9jYWxob3N0Q29ubmVjdGlvbjogYm9vbGVhbjtcclxuICAgIGlzSHR0cHNDb25uZWN0aW9uOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVybFBhcmFtczogVVJMU2VhcmNoUGFyYW1zKSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBtaWMgc3RhdHVzIGZyb20gdGhlIHVybCBcclxuICAgICAgICB0aGlzLnVzZU1pYyA9IHVybFBhcmFtcy5oYXMoJ3VzZU1pYycpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VNaWMpIHtcclxuICAgICAgICAgICAgTG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJNaWNyb3Bob25lIGFjY2VzcyBpcyBlbmFibGVkIElUIElTIEVYUEVSSU1FTlRBTCBBTkQgSVMgTk9UIFBST1BFUkxZIFNVUFBPUlRFRCBBQ1JPU1MgVUUuIElGIElUIERPRVMgTk9UIFdPUksgSVRTIFlPVVIgT1dOIEZBVUxUISBZT1UgSEFWRSBCRUVOIFRPTEQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgKCF0aGlzLnVzZU1pYykge1xyXG4gICAgICAgIC8vICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTWljcm9waG9uZSBhY2Nlc3MgaXMgbm90IGVuYWJsZWQuIFBhc3MgP3VzZU1pYyBpbiB0aGUgdXJsIHRvIGVuYWJsZSBpdC5cIik7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiB0aGUgY29ubmVjdGlvbiBpcyBub3QgbG9jYWwgYW5kIGlzIGh0dHBzIG9yIG1pYyB3aWxsIG5vdCB3b3JrIFxyXG4gICAgICAgIHRoaXMuaXNMb2NhbGhvc3RDb25uZWN0aW9uID0gbG9jYXRpb24uaG9zdG5hbWUgPT09IFwibG9jYWxob3N0XCIgfHwgbG9jYXRpb24uaG9zdG5hbWUgPT09IFwiMTI3LjAuMC4xXCI7XHJcbiAgICAgICAgdGhpcy5pc0h0dHBzQ29ubmVjdGlvbiA9IGxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JztcclxuICAgICAgICBpZiAodGhpcy51c2VNaWMgJiYgIXRoaXMuaXNMb2NhbGhvc3RDb25uZWN0aW9uICYmICF0aGlzLmlzSHR0cHNDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlTWljID0gZmFsc2U7XHJcbiAgICAgICAgICAgIExvZ2dlci5FcnJvcihMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIk1pY3JvcGhvbmUgYWNjZXNzIGluIHRoZSBicm93c2VyIHdpbGwgbm90IHdvcmsgaWYgeW91IGFyZSBub3Qgb24gSFRUUFMgb3IgbG9jYWxob3N0LiBEaXNhYmxpbmcgbWljIGFjY2Vzcy5cIik7XHJcbiAgICAgICAgICAgIExvZ2dlci5FcnJvcihMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkZvciB0ZXN0aW5nIHlvdSBjYW4gZW5hYmxlIEhUVFAgbWljcm9waG9uZSBhY2Nlc3MgQ2hyb21lIGJ5IHZpc2l0aW5nIGNocm9tZTovL2ZsYWdzLyBhbmQgZW5hYmxpbmcgJ3Vuc2FmZWx5LXRyZWF0LWluc2VjdXJlLW9yaWdpbi1hcy1zZWN1cmUnXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBpbmJvdW5kQXVkaW9TdGF0cyB9IGZyb20gXCIuL0luYm91bmRBdWRpb1N0YXRzXCI7XHJcbmltcG9ydCB7IGluYm91bmRWaWRlb1N0YXRzIH0gZnJvbSBcIi4vSW5ib3VuZFZpZGVvU3RhdHNcIjtcclxuaW1wb3J0IHsgZGF0YUNoYW5uZWxTdGF0cyB9IGZyb20gXCIuL0RhdGFDaGFubmVsU3RhdHNcIjtcclxuaW1wb3J0IHsgQ2FuZGlkYXRlU3RhdCB9IGZyb20gXCIuL0NhbmRpZGF0ZVN0YXRcIjtcclxuaW1wb3J0IHsgQ2FuZGlkYXRlUGFpclN0YXRzIH0gZnJvbSBcIi4vQ2FuZGlkYXRlUGFpclN0YXRzXCI7XHJcbmltcG9ydCB7IE91dEJvdW5kVmlkZW9TdGF0cyB9IGZyb20gXCIuL091dEJvdW5kVmlkZW9TdGF0c1wiO1xyXG5pbXBvcnQgeyBTdHJlYW1TdGF0cyB9IGZyb20gXCIuL1N0cmVhbVN0YXRzXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcblxyXG4vKipcclxuICogVGhlIEFnZ3JlZ2F0ZWQgU3RhdHMgdGhhdCBpcyBnZW5lcmF0ZWQgZnJvbSB0aGUgUlRDIFN0YXRzIFJlcG9ydFxyXG4gKi9cclxuXHJcbnR5cGUgUlRDU3RhdHNUeXBlU1BTID0gUlRDU3RhdHNUeXBlIHwgXCJzdHJlYW1cIlxyXG5leHBvcnQgY2xhc3MgQWdncmVnYXRlZFN0YXRzIHtcclxuICAgIGluYm91bmRWaWRlb1N0YXRzOiBpbmJvdW5kVmlkZW9TdGF0cztcclxuICAgIGluYm91bmRBdWRpb1N0YXRzOiBpbmJvdW5kQXVkaW9TdGF0cztcclxuICAgIGxhc3RWaWRlb1N0YXRzOiBpbmJvdW5kVmlkZW9TdGF0cztcclxuICAgIGNhbmRpZGF0ZVBhaXI6IENhbmRpZGF0ZVBhaXJTdGF0c1xyXG4gICAgZGF0YUNoYW5uZWxTdGF0czogZGF0YUNoYW5uZWxTdGF0cztcclxuICAgIGxvY2FsQ2FuZGlkYXRlczogQXJyYXk8Q2FuZGlkYXRlU3RhdD47XHJcbiAgICByZW1vdGVDYW5kaWRhdGVzOiBBcnJheTxDYW5kaWRhdGVTdGF0PjtcclxuICAgIG91dEJvdW5kVmlkZW9TdGF0czogT3V0Qm91bmRWaWRlb1N0YXRzO1xyXG4gICAgc3RyZWFtU3RhdHM6IFN0cmVhbVN0YXRzXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cyA9IG5ldyBpbmJvdW5kVmlkZW9TdGF0cygpO1xyXG4gICAgICAgIHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMgPSBuZXcgaW5ib3VuZEF1ZGlvU3RhdHMoKTtcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIgPSBuZXcgQ2FuZGlkYXRlUGFpclN0YXRzKCk7XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbFN0YXRzID0gbmV3IGRhdGFDaGFubmVsU3RhdHMoKTtcclxuICAgICAgICB0aGlzLm91dEJvdW5kVmlkZW9TdGF0cyA9IG5ldyBPdXRCb3VuZFZpZGVvU3RhdHMoKTtcclxuICAgICAgICB0aGlzLnN0cmVhbVN0YXRzID0gbmV3IFN0cmVhbVN0YXRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHYXRoZXIgYWxsIHRoZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBSVEMgUGVlciBDb25uZWN0aW9uIFJlcG9ydFxyXG4gICAgICogQHBhcmFtIHJ0Y1N0YXRzUmVwb3J0IC0gUlRDIFN0YXRzIFJlcG9ydFxyXG4gICAgICovXHJcbiAgICBwcm9jZXNzU3RhdHMocnRjU3RhdHNSZXBvcnQ6IFJUQ1N0YXRzUmVwb3J0KSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhbmRpZGF0ZXMgPSBuZXcgQXJyYXk8Q2FuZGlkYXRlU3RhdD4oKTtcclxuICAgICAgICB0aGlzLnJlbW90ZUNhbmRpZGF0ZXMgPSBuZXcgQXJyYXk8Q2FuZGlkYXRlU3RhdD4oKTtcclxuXHJcbiAgICAgICAgcnRjU3RhdHNSZXBvcnQuZm9yRWFjaCgoc3RhdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdHlwZTogUlRDU3RhdHNUeXBlU1BTID0gc3RhdC50eXBlO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2FuZGlkYXRlLXBhaXJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbmRpZGF0ZVBhaXIoc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2VydGlmaWNhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjb2RlY1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImNzcmNcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJkYXRhLWNoYW5uZWxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURhdGFDaGFubmVsKHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImluYm91bmQtcnRwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbkJvdW5kUlRQKHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImxvY2FsLWNhbmRpZGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTG9jYWxDYW5kaWRhdGUoc3RhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWVkaWEtc291cmNlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwib3V0Ym91bmQtcnRwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicGVlci1jb25uZWN0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVtb3RlLWNhbmRpZGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVtb3RlQ2FuZGlkYXRlKHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJlbW90ZS1pbmJvdW5kLXJ0cFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJlbW90ZS1vdXRib3VuZC1ydHBcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlbW90ZU91dEJvdW5kKHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYWNrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUcmFjayhzdGF0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc3BvcnRcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJlYW1cIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN0cmVhbShzdGF0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkVycm9yKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwidW5oYW5kbGVkIFN0YXQgVHlwZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIHN0YXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBzdHJlYW0gc3RhdHMgZGF0YSBmcm9tIHdlYnJ0Y1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gc3RhdCB0aGUgc3RhdHMgY29taW5nIGluIGZyb20gd2VicnRjXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZVN0cmVhbShzdGF0OiBhbnkpIHtcclxuICAgICAgICB0aGlzLnN0cmVhbVN0YXRzID0gc3RhdFxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFByb2Nlc3MgdGhlIEljZSBDYW5kaWRhdGUgUGFpciBEYXRhIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDYW5kaWRhdGVQYWlyKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5ieXRlc1JlY2VpdmVkID0gc3RhdC5ieXRlc1JlY2VpdmVkO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5ieXRlc1NlbnQgPSBzdGF0LmJ5dGVzU2VudDtcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIubG9jYWxDYW5kaWRhdGVJZCA9IHN0YXQubG9jYWxDYW5kaWRhdGVJZFxyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci5yZW1vdGVDYW5kaWRhdGVJZCA9IHN0YXQucmVtb3RlQ2FuZGlkYXRlSWRcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIubm9taW5hdGVkID0gc3RhdC5ub21pbmF0ZWQ7XHJcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVQYWlyLnJlYWRhYmxlID0gc3RhdC5yZWFkYWJsZTtcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIuc2VsZWN0ZWQgPSBzdGF0LnNlbGVjdGVkO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpci53cml0YWJsZSA9IHN0YXQud3JpdGFibGU7XHJcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVQYWlyLnN0YXRlID0gc3RhdC5zdGF0ZTtcclxuICAgICAgICB0aGlzLmNhbmRpZGF0ZVBhaXIuY3VycmVudFJvdW5kVHJpcFRpbWUgPSBzdGF0LmN1cnJlbnRSb3VuZFRyaXBUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFByb2Nlc3MgdGhlIERhdGEgQ2hhbm5lbCBEYXRhIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVEYXRhQ2hhbm5lbChzdGF0OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMuYnl0ZXNSZWNlaXZlZCA9IHN0YXQuZGF0YXl0ZXNSZWNlaXZlZDtcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMuYnl0ZXNTZW50ID0gc3RhdC5ieXRlc1NlbnRcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMuZGF0YUNoYW5uZWxJZGVudGlmaWVyID0gc3RhdC5kYXRhQ2hhbm5lbElkZW50aWZpZXJcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMuaWQgPSBzdGF0LmlkXHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbFN0YXRzLmxhYmVsID0gc3RhdC5sYWJlbFxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy5tZXNzYWdlc1JlY2VpdmVkID0gc3RhdC5tZXNzYWdlc1JlY2VpdmVkXHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbFN0YXRzLm1lc3NhZ2VzU2VudCA9IHN0YXQubWVzc2FnZXNTZW50XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbFN0YXRzLnByb3RvY29sID0gc3RhdC5wcm90b2NvbFxyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cy5zdGF0ZSA9IHN0YXQuc3RhdGVcclxuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMudGltZXN0YW1wID0gc3RhdC50aW1lc3RhbXBcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBQcm9jZXNzIHRoZSBMb2NhbCBJY2UgQ2FuZGlkYXRlIERhdGEgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUxvY2FsQ2FuZGlkYXRlKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIGxldCBsb2NhbENhbmRpZGF0ZSA9IG5ldyBDYW5kaWRhdGVTdGF0KCk7XHJcbiAgICAgICAgbG9jYWxDYW5kaWRhdGUubGFiZWwgPSBcImxvY2FsLWNhbmRpZGF0ZVwiXHJcbiAgICAgICAgbG9jYWxDYW5kaWRhdGUuYWRkcmVzcyA9IHN0YXQuYWRkcmVzcztcclxuICAgICAgICBsb2NhbENhbmRpZGF0ZS5wb3J0ID0gc3RhdC5wb3J0XHJcbiAgICAgICAgbG9jYWxDYW5kaWRhdGUucHJvdG9jb2wgPSBzdGF0LnByb3RvY29sO1xyXG4gICAgICAgIGxvY2FsQ2FuZGlkYXRlLmNhbmRpZGF0ZVR5cGUgPSBzdGF0LmNhbmRpZGF0ZVR5cGU7XHJcbiAgICAgICAgbG9jYWxDYW5kaWRhdGUuaWQgPSBzdGF0LmlkO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYW5kaWRhdGVzLnB1c2gobG9jYWxDYW5kaWRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyB0aGUgUmVtb3RlIEljZSBDYW5kaWRhdGUgRGF0YSBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUmVtb3RlQ2FuZGlkYXRlKHN0YXQ6IGFueSkge1xyXG4gICAgICAgIGxldCBSZW1vdGVDYW5kaWRhdGUgPSBuZXcgQ2FuZGlkYXRlU3RhdCgpO1xyXG4gICAgICAgIFJlbW90ZUNhbmRpZGF0ZS5sYWJlbCA9IFwibG9jYWwtY2FuZGlkYXRlXCJcclxuICAgICAgICBSZW1vdGVDYW5kaWRhdGUuYWRkcmVzcyA9IHN0YXQuYWRkcmVzcztcclxuICAgICAgICBSZW1vdGVDYW5kaWRhdGUucG9ydCA9IHN0YXQucG9ydFxyXG4gICAgICAgIFJlbW90ZUNhbmRpZGF0ZS5wcm90b2NvbCA9IHN0YXQucHJvdG9jb2w7XHJcbiAgICAgICAgUmVtb3RlQ2FuZGlkYXRlLmlkID0gc3RhdC5pZDtcclxuICAgICAgICBSZW1vdGVDYW5kaWRhdGUuY2FuZGlkYXRlVHlwZSA9IHN0YXQuY2FuZGlkYXRlVHlwZTtcclxuICAgICAgICB0aGlzLnJlbW90ZUNhbmRpZGF0ZXMucHVzaChSZW1vdGVDYW5kaWRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFByb2Nlc3MgdGhlIEluYm91bmQgUlRQIEF1ZGlvIGFuZCBWaWRlbyBEYXRhICBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlSW5Cb3VuZFJUUChzdGF0OiBhbnkpIHtcclxuICAgICAgICBzd2l0Y2ggKHN0YXQua2luZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwidmlkZW9cIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wID0gc3RhdC50aW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWQgPSBzdGF0LmJ5dGVzUmVjZWl2ZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0RlY29kZWQgPSBzdGF0LmZyYW1lc0RlY29kZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLnBhY2tldHNMb3N0ID0gc3RhdC5wYWNrZXRzTG9zdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaml0dGVyID0gc3RhdC5qaXR0ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkU3RhcnQgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkU3RhcnQgPT0gbnVsbCkgPyBzdGF0LmJ5dGVzUmVjZWl2ZWQgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWRTdGFydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZFN0YXJ0ID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZFN0YXJ0ID09IG51bGwpID8gc3RhdC5mcmFtZXNEZWNvZGVkIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkU3RhcnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLnRpbWVzdGFtcFN0YXJ0ID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wU3RhcnQgPT0gbnVsbCkgPyBzdGF0LnRpbWVzdGFtcCA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wU3RhcnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0RlY29kZWRTdGFydCA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0RlY29kZWRTdGFydCA9PSBudWxsKSA/IHN0YXQuZnJhbWVzRGVjb2RlZCA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZFN0YXJ0O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RWaWRlb1N0YXRzICE9IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUgPSA4ICogKHN0YXQuYnl0ZXNSZWNlaXZlZCAtIHRoaXMubGFzdFZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZCkgLyAoc3RhdC50aW1lc3RhbXAgLSB0aGlzLmxhc3RWaWRlb1N0YXRzLnRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlID0gTWF0aC5mbG9vcih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGUgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dCaXRyYXRlID09IHVuZGVmaW5lZCB8fCBOdW1iZXIuaXNOYU4odGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dCaXRyYXRlKSkgPyB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dCaXRyYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA8IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93Qml0cmF0ZSB8fCBOdW1iZXIuaXNOYU4odGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dCaXRyYXRlKSkgPyB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0JpdHJhdGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEJpdHJhdGUgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoQml0cmF0ZSA9PSB1bmRlZmluZWQgfHwgTnVtYmVyLmlzTmFOKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEJpdHJhdGUpKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEJpdHJhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoQml0cmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUgPiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmhpZ2hCaXRyYXRlKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEJpdHJhdGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYXZnQml0cmF0ZSA9IDggKiAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkIC0gdGhpcy5sYXN0VmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkKSAvICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLnRpbWVzdGFtcCAtIHRoaXMubGFzdFZpZGVvU3RhdHMudGltZXN0YW1wKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmF2Z0JpdHJhdGUgPSBNYXRoLmZsb29yKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYXZnQml0cmF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZCAtIHRoaXMubGFzdFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZCkgLyAoKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wIC0gdGhpcy5sYXN0VmlkZW9TdGF0cy50aW1lc3RhbXApIC8gMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXJhdGUgPSBNYXRoLmZsb29yKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dGcmFtZXJhdGUgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dGcmFtZXJhdGUgPT0gdW5kZWZpbmVkIHx8IE51bWJlci5pc05hTih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0ZyYW1lcmF0ZSkpID8gdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXJhdGUgOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0ZyYW1lcmF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmxvd0ZyYW1lcmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lcmF0ZSA8IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMubG93RnJhbWVyYXRlKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5sb3dGcmFtZXJhdGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEZyYW1lcmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmhpZ2hGcmFtZXJhdGUgPT0gdW5kZWZpbmVkIHx8IE51bWJlci5pc05hTih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmhpZ2hGcmFtZXJhdGUpKSA/IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVyYXRlIDogdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5oaWdoRnJhbWVyYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEZyYW1lcmF0ZSA9ICh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lcmF0ZSA8IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEZyYW1lcmF0ZSkgPyB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lcmF0ZSA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuaGlnaEZyYW1lcmF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5hdmVyYWdlRnJhbWVSYXRlID0gKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZCAtIHRoaXMubGFzdFZpZGVvU3RhdHMuZnJhbWVzRGVjb2RlZFN0YXJ0KSAvICgodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy50aW1lc3RhbXAgLSB0aGlzLmxhc3RWaWRlb1N0YXRzLnRpbWVzdGFtcFN0YXJ0KSAvIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYXZlcmFnZUZyYW1lUmF0ZSA9IE1hdGguZmxvb3IodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5hdmVyYWdlRnJhbWVSYXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFZpZGVvU3RhdHMgPSB7IC4uLnRoaXMuaW5ib3VuZFZpZGVvU3RhdHMgfTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYXVkaW9cIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMuYnl0ZXNSZWNlaXZlZCA9IHN0YXQuYnl0ZXNSZWNlaXZlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kQXVkaW9TdGF0cy5qaXR0ZXIgPSBzdGF0LmppdHRlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMucGFja2V0c0xvc3QgPSBzdGF0LnBhY2tldHNsb3N0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmJvdW5kQXVkaW9TdGF0cy50aW1lc3RhbXAgPSBzdGF0LnRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIktpbmQgaXMgbm90IGhhbmRsZWRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBQcm9jZXNzIHRoZSBvdXRib3VuZCBSVFAgQXVkaW8gYW5kIFZpZGVvIERhdGEgIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVSZW1vdGVPdXRCb3VuZChzdGF0OiBhbnkpIHtcclxuICAgICAgICBzd2l0Y2ggKHN0YXQua2luZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwidmlkZW9cIjpcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLmJ5dGVzU2VudCA9IHN0YXQuYnl0ZXNTZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMuaWQgPSBzdGF0LmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMubG9jYWxJZCA9IHN0YXQubG9jYWxJZDtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLnBhY2tldHNTZW50ID0gc3RhdC5wYWNrZXRzU2VudDtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLnJlbW90ZVRpbWVzdGFtcCA9IHN0YXQucmVtb3RlVGltZXN0YW1wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMudGltZXN0YW1wID0gc3RhdC50aW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImF1ZGlvXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogUHJvY2VzcyB0aGUgSW5ib3VuZCBWaWRlbyBUcmFjayBEYXRhICBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlVHJhY2soc3RhdDogYW55KSB7XHJcblxyXG4gICAgICAgIC8vIHdlIG9ubHkgd2FudCB0byBleHRyYWN0IHN0YXRzIGZyb20gdGhlIHZpZGVvIHRyYWNrXHJcbiAgICAgICAgaWYoc3RhdC50eXBlID09PSAndHJhY2snICYmIChzdGF0LnRyYWNrSWRlbnRpZmllciA9PT0gJ3ZpZGVvX2xhYmVsJyB8fCBzdGF0LmtpbmQgPT09ICd2aWRlbycpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRHJvcHBlZCA9IHN0YXQuZnJhbWVzRHJvcHBlZDtcclxuICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNSZWNlaXZlZCA9IHN0YXQuZnJhbWVzUmVjZWl2ZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRHJvcHBlZFBlcmNlbnRhZ2UgPSBzdGF0LmZyYW1lc0Ryb3BwZWQgLyBzdGF0LmZyYW1lc1JlY2VpdmVkICogMTAwO1xyXG4gICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lSGVpZ2h0ID0gc3RhdC5mcmFtZUhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZVdpZHRoID0gc3RhdC5mcmFtZVdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lSGVpZ2h0U3RhcnQgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZUhlaWdodFN0YXJ0ID09IG51bGwpID8gc3RhdC5mcmFtZUhlaWdodCA6IHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVIZWlnaHRTdGFydDtcclxuICAgICAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZVdpZHRoU3RhcnQgPSAodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZVdpZHRoU3RhcnQgPT0gbnVsbCkgPyBzdGF0LmZyYW1lV2lkdGggOiB0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lV2lkdGhTdGFydDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQ2hlY2sgaWYgYSB2YWx1ZSBjb21pbmcgaW4gZnJvbSBvdXIgc3RhdHMgaXMgYWN0dWFsbHkgYSBudW1iZXIgIFxyXG4gICAgICovXHJcbiAgICBpc051bWJlcih2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCIvKiogXHJcbiAqIElDRSBDYW5kaWRhdGUgUGFpciBTdGF0cyBjb2xsZWN0ZWQgZnJvbSB0aGUgUlRDIFN0YXRzIFJlcG9ydFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENhbmRpZGF0ZVBhaXJTdGF0cyB7XHJcbiAgICBieXRlc1JlY2VpdmVkOiBudW1iZXI7XHJcbiAgICBieXRlc1NlbnQ6IG51bWJlcjtcclxuICAgIGxvY2FsQ2FuZGlkYXRlSWQ6IHN0cmluZztcclxuICAgIHJlbW90ZUNhbmRpZGF0ZUlkOiBzdHJpbmc7XHJcbiAgICBub21pbmF0ZWQ6IGJvb2xlYW47XHJcbiAgICByZWFkYWJsZTogYm9vbGVhbjtcclxuICAgIHdyaXRhYmxlOiBib29sZWFuO1xyXG4gICAgc2VsZWN0ZWQ6IGJvb2xlYW47XHJcbiAgICBzdGF0ZTogc3RyaW5nO1xyXG4gICAgY3VycmVudFJvdW5kVHJpcFRpbWU6IG51bWJlcjtcclxufVxyXG4iLCIvKiogXHJcbiAqIElDRSBDYW5kaWRhdGUgU3RhdCBjb2xsZWN0ZWQgZnJvbSB0aGUgUlRDIFN0YXRzIFJlcG9ydFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENhbmRpZGF0ZVN0YXQge1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBhZGRyZXNzOiBzdHJpbmc7XHJcbiAgICBjYW5kaWRhdGVUeXBlOiBzdHJpbmc7XHJcbiAgICBwb3J0OiBudW1iZXI7XHJcbiAgICBwcm90b2NvbDogXCJ0Y3BcIiB8IFwidWRwXCJcclxufSIsIi8qKiBcclxuICogRGF0YSBDaGFubmVsIFN0YXRzIGNvbGxlY3RlZCBmcm9tIHRoZSBSVEMgU3RhdHMgUmVwb3J0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgZGF0YUNoYW5uZWxTdGF0cyB7XHJcbiAgICBieXRlc1JlY2VpdmVkOiBudW1iZXI7XHJcbiAgICBieXRlc1NlbnQ6IG51bWJlcjtcclxuICAgIGRhdGFDaGFubmVsSWRlbnRpZmllcjogbnVtYmVyO1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICBtZXNzYWdlc1JlY2VpdmVkOiBudW1iZXI7XHJcbiAgICBtZXNzYWdlc1NlbnQ6IG51bWJlcjtcclxuICAgIHByb3RvY29sOiBzdHJpbmc7XHJcbiAgICBzdGF0ZTogc3RyaW5nO1xyXG4gICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbn0iLCIvKiogXHJcbiAqIEluYm91bmQgQXVkaW8gU3RhdHMgY29sbGVjdGVkIGZyb20gdGhlIFJUQyBTdGF0cyBSZXBvcnRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBpbmJvdW5kQXVkaW9TdGF0cyB7XHJcbiAgICBieXRlc1JlY2VpdmVkOiBudW1iZXI7XHJcbiAgICBqaXR0ZXI6IG51bWJlcjtcclxuICAgIHBhY2tldHNMb3N0OiBudW1iZXI7XHJcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxufSIsIi8qKiBcclxuICogSW5ib3VuZCBWaWRlbyBTdGF0cyBjb2xsZWN0ZWQgZnJvbSB0aGUgUlRDIFN0YXRzIFJlcG9ydFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGluYm91bmRWaWRlb1N0YXRzIHtcclxuICAgIHJlY2VpdmVUb0NvbXBvc2l0ZU1zOiBudW1iZXIgPSAwO1xyXG4gICAgdGltZXN0YW1wOiBudW1iZXIgPSAwO1xyXG4gICAgYnl0ZXNSZWNlaXZlZDogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lc0RlY29kZWQ6IG51bWJlciA9IDA7XHJcbiAgICBwYWNrZXRzTG9zdDogbnVtYmVyID0gMDtcclxuICAgIGJ5dGVzUmVjZWl2ZWRTdGFydDogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lc0RlY29kZWRTdGFydDogbnVtYmVyID0gMDtcclxuICAgIHRpbWVzdGFtcFN0YXJ0OiBudW1iZXIgPSAwO1xyXG4gICAgYml0cmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGxvd0JpdHJhdGU6IG51bWJlciA9IDA7XHJcbiAgICBoaWdoQml0cmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGF2Z0JpdHJhdGU6IG51bWJlciA9IDA7XHJcbiAgICBmcmFtZXJhdGU6IG51bWJlciA9IDA7XHJcbiAgICBsb3dGcmFtZXJhdGU6IG51bWJlciA9IDA7XHJcbiAgICBoaWdoRnJhbWVyYXRlOiBudW1iZXIgPSAwO1xyXG4gICAgYXZlcmFnZUZyYW1lUmF0ZTogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lc0Ryb3BwZWQ6IG51bWJlciA9IDA7XHJcbiAgICBmcmFtZXNSZWNlaXZlZDogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lc0Ryb3BwZWRQZXJjZW50YWdlOiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVIZWlnaHQ6IG51bWJlciA9IDA7XHJcbiAgICBmcmFtZVdpZHRoOiBudW1iZXIgPSAwO1xyXG4gICAgZnJhbWVIZWlnaHRTdGFydDogbnVtYmVyID0gMDtcclxuICAgIGZyYW1lV2lkdGhTdGFydDogbnVtYmVyID0gMDtcclxuICAgIGppdHRlcjogbnVtYmVyID0gMDtcclxufSIsIi8qKiBcclxuICogT3V0Ym91bmQgVmlkZW8gU3RhdHMgY29sbGVjdGVkIGZyb20gdGhlIFJUQyBTdGF0cyBSZXBvcnRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBPdXRCb3VuZFZpZGVvU3RhdHMge1xyXG4gICAgYnl0ZXNTZW50OiBudW1iZXI7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbG9jYWxJZDogc3RyaW5nO1xyXG4gICAgcGFja2V0c1NlbnQ6IG51bWJlcjtcclxuICAgIHJlbW90ZVRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBBZ2dyZWdhdGVkU3RhdHMgfSBmcm9tIFwiLi9BZ2dyZWdhdGVkU3RhdHNcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSBQZWVyIENvbm5lY3Rpb24gXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUGVlckNvbm5lY3Rpb25Db250cm9sbGVyIHtcclxuICAgIHBlZXJDb25uZWN0aW9uOiBSVENQZWVyQ29ubmVjdGlvbjtcclxuICAgIGFnZ3JlZ2F0ZWRTdGF0czogQWdncmVnYXRlZFN0YXRzO1xyXG4gICAgZm9yY2VUdXJuOiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IFJUQyBQZWVyIENvbm5lY3Rpb24gY2xpZW50XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFBlZXIgY29ubmVjdGlvbiBPcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFJUQ0NvbmZpZ3VyYXRpb24sIHR1cm5TdGF0ZTogYm9vbGVhbikge1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIHR1cm4gc3RhdGUgdG8gdHJ1ZSBvciBmYWxzZSBmb3IgcnRjIG9wdGlvbnNcclxuICAgICAgICB0aGlzLmZvcmNlVHVybiA9IHR1cm5TdGF0ZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZm9yY2VUdXJuID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuaWNlVHJhbnNwb3J0UG9saWN5ID0gXCJyZWxheVwiO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiRm9yY2luZyBUVVJOIHVzYWdlIGJ5IHNldHRpbmcgSUNFIFRyYW5zcG9ydCBQb2xpY3kgaW4gcGVlciBjb25uZWN0aW9uIGNvbmZpZy5cIiwgNik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBidWlsZCBhIG5ldyBwZWVyIGNvbm5lY3Rpb24gd2l0aCB0aGUgb3B0aW9uc1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24ob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gKGV2OiBFdmVudCkgPT4gdGhpcy5oYW5kbGVTaWduYWxTdGF0ZUNoYW5nZShldik7XHJcbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IChldjogRXZlbnQpID0+IHRoaXMuaGFuZGxlSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlKGV2KTtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSAoZXY6IEV2ZW50KSA9PiB0aGlzLmhhbmRsZUljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlKGV2KTtcclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9udHJhY2sgPSAoZXY6IFJUQ1RyYWNrRXZlbnQpID0+IHRoaXMuaGFuZGxlT25UcmFjayhldik7XHJcbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZSA9IChldjogUlRDUGVlckNvbm5lY3Rpb25JY2VFdmVudCkgPT4gdGhpcy5oYW5kZWxJY2VDYW5kaWRhdGUoZXYpO1xyXG4gICAgICAgIHRoaXMuYWdncmVnYXRlZFN0YXRzID0gbmV3IEFnZ3JlZ2F0ZWRTdGF0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIG9mZmVyIGZvciB0aGUgV2ViIFJUQyBoYW5kc2hha2UgYW5kIHNlbmQgdGhlIG9mZmVyIHRvIHRoZSBzaWduYWxpbmcgc2VydmVyIHZpYSB3ZWJzb2NrZXRcclxuICAgICAqIEBwYXJhbSBvZmZlck9wdGlvbnMgLSBSVEMgT2ZmZXIgT3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjcmVhdGVPZmZlcihvZmZlck9wdGlvbnM6IFJUQ09mZmVyT3B0aW9ucywgdXNlTWljOiBib29sZWFuKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkNyZWF0ZSBPZmZlclwiLCA2KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cFRyYWNrc1RvU2VuZEFzeW5jKHVzZU1pYykuZmluYWxseSgoKSA9PiB7IH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKG9mZmVyT3B0aW9ucykudGhlbigob2ZmZXI6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaG93VGV4dE92ZXJsYXlDb25uZWN0aW5nKCk7XHJcbiAgICAgICAgICAgIG9mZmVyLnNkcCA9IHRoaXMubXVuZ2VPZmZlcihvZmZlci5zZHAsIHVzZU1pYyk7XHJcbiAgICAgICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XHJcbiAgICAgICAgICAgIHRoaXMub25TZW5kV2ViUlRDT2ZmZXIob2ZmZXIpO1xyXG4gICAgICAgIH0pLmNhdGNoKChvblJlamVjdGVkUmVhc29uOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaG93VGV4dE92ZXJsYXlTZXR1cEZhaWx1cmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIEFnZ3JlZ2F0ZWQgU3RhdHMgYW5kIHRoZW4gZmlyZSBhIG9uVmlkZW8gU3RhdHMgZXZlbnRcclxuICAgICAqL1xyXG4gICAgZ2VuZXJhdGVTdGF0cygpIHtcclxuICAgICAgICAvKnRoaXMucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMobnVsbCkudGhlbigoU3RhdHNEYXRhOiBSVENTdGF0c1JlcG9ydCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFnZ3JlZ2F0ZWRTdGF0cy5wcm9jZXNzU3RhdHMoU3RhdHNEYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5vblZpZGVvU3RhdHModGhpcy5hZ2dyZWdhdGVkU3RhdHMpO1xyXG4gICAgICAgIH0pOyovXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZSBUaGUgUGVlciBDb25uZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBlZXJDb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKVxyXG4gICAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RpZnkgdGhlIFNlc3Npb24gRGVzY3JpcHRvciBcclxuICAgICAqIEBwYXJhbSBzZHAgLSBTZXNzaW9uIERlc2NyaXB0b3IgYXMgYSBzdHJpbmdcclxuICAgICAqIEBwYXJhbSB1c2VNaWMgLSBJcyB0aGUgbWljcm9waG9uZSBpbiB1c2VcclxuICAgICAqIEByZXR1cm5zIEEgbW9kaWZpZWQgU2Vzc2lvbiBEZXNjcmlwdG9yXHJcbiAgICAgKi9cclxuICAgIG11bmdlT2ZmZXIoc2RwOiBzdHJpbmcsIHVzZU1pYzogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCB0ZW1wID0gc2RwO1xyXG4gICAgICAgIHRlbXAucmVwbGFjZSgvKGE9Zm10cDpcXGQrIC4qbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQ9LiopXFxyXFxuL2dtLCBcIiQxO3gtZ29vZ2xlLXN0YXJ0LWJpdHJhdGU9MTAwMDA7eC1nb29nbGUtbWF4LWJpdHJhdGU9MTAwMDAwXFxyXFxuXCIpO1xyXG4gICAgICAgIHRlbXAucmVwbGFjZSgndXNlaW5iYW5kZmVjPTEnLCAndXNlaW5iYW5kZmVjPTE7c3RlcmVvPTE7c3Byb3AtbWF4Y2FwdHVyZXJhdGU9NDgwMDAnKTtcclxuXHJcbiAgICAgICAgLy8gSW5jcmVhc2UgdGhlIGNhcHR1cmUgcmF0ZSBvZiBhdWRpbyBzbyB3ZSBjYW4gaGF2ZSBoaWdoZXIgcXVhbGl0eSBhdWRpbyBvdmVyIG1pY1xyXG4gICAgICAgIGlmICh1c2VNaWMpIHtcclxuICAgICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZSgndXNlaW5iYW5kZmVjPTEnLCAndXNlaW5iYW5kZmVjPTE7c3Byb3AtbWF4Y2FwdHVyZXJhdGU9NDgwMDA7bWF4YXZlcmFnZWJpdHJhdGU9NTEwMDAwJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgUmVtb3RlIERlc2NyaXB0b3IgZnJvbSB0aGUgc2lnbmFsaW5nIHNlcnZlciB0byB0aGUgUlRDIFBlZXIgQ29ubmVjdGlvbiBcclxuICAgICAqIEBwYXJhbSBzZHBBbnN3ZXIgLSBSVEMgU2Vzc2lvbiBEZXNjcmlwdG9yIGZyb20gdGhlIFNpZ25hbGluZyBTZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQW5zd2VyKHNkcEFuc3dlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCkge1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oc2RwQW5zd2VyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gYSBJY2UgQ2FuZGlkYXRlIGlzIHJlY2VpdmVkIGFkZCB0byB0aGUgUlRDIFBlZXIgQ29ubmVjdGlvbiBcclxuICAgICAqIEBwYXJhbSBpY2VDYW5kaWRhdGUgLSBSVEMgSWNlIENhbmRpZGF0ZSBmcm9tIHRoZSBTaWduYWxpbmcgU2VydmVyXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU9uSWNlKGljZUNhbmRpZGF0ZTogUlRDSWNlQ2FuZGlkYXRlKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcInBlZXJjb25uZWN0aW9uIGhhbmRsZU9uSWNlXCIsIDYpO1xyXG5cclxuICAgICAgICAvLyAvLyBpZiBmb3JjaW5nIFRVUk4sIHJlamVjdCBhbnkgY2FuZGlkYXRlcyBub3QgcmVsYXlcclxuICAgICAgICBpZiAodGhpcy5mb3JjZVR1cm4pIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgbm8gcmVsYXkgYWRkcmVzcyBpcyBmb3VuZCwgaWYgc28sIHdlIGFyZSBhc3N1bWluZyBpdCBtZWFucyBubyBUVVJOIHNlcnZlclxyXG4gICAgICAgICAgICBpZiAoaWNlQ2FuZGlkYXRlLmNhbmRpZGF0ZS5pbmRleE9mKFwicmVsYXlcIikgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBgRHJvcHBpbmcgY2FuZGlkYXRlIGJlY2F1c2UgaXQgd2FzIG5vdCBUVVJOIHJlbGF5LiB8IFR5cGU9ICR7aWNlQ2FuZGlkYXRlLnR5cGV9IHwgUHJvdG9jb2w9ICR7aWNlQ2FuZGlkYXRlLnByb3RvY29sfSB8IEFkZHJlc3M9JHtpY2VDYW5kaWRhdGUuYWRkcmVzc30gfCBQb3J0PSR7aWNlQ2FuZGlkYXRlLnBvcnR9IHxgLCA2KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gdGhlIFJUQyBQZWVyIENvbm5lY3Rpb24gU2lnbmFsaW5nIHNlcnZlciBzdGF0ZSBDaGFuZ2VzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGUgLSBTaWduYWxpbmcgU2VydmVyIFN0YXRlIENoYW5nZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVTaWduYWxTdGF0ZUNoYW5nZShzdGF0ZTogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdzaWduYWxpbmcgc3RhdGUgY2hhbmdlOiAnICsgc3RhdGUsIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHdoZW4gdGhlIEljZSBDb25uZWN0aW9uIFN0YXRlIENoYW5nZXNcclxuICAgICAqIEBwYXJhbSBzdGF0ZSAtIEljZSBDb25uZWN0aW9uIFN0YXRlXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZShzdGF0ZTogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdpY2UgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2U6ICcgKyBzdGF0ZSwgNik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgd2hlbiB0aGUgSWNlIEdhdGhlcmluZyBTdGF0ZSBDaGFuZ2VzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGUgLSBJY2UgR2F0aGVyaW5nIFN0YXRlIENoYW5nZVxyXG4gICAgICovXHJcbiAgICBoYW5kbGVJY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZShzdGF0ZTogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdpY2UgZ2F0aGVyaW5nIHN0YXRlIGNoYW5nZTogJyArIEpTT04uc3RyaW5naWZ5KHN0YXRlKSwgNik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIG9uVHJhY2sgbWV0aG9kXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgd2ViUnRjIHRyYWNrIGV2ZW50IFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVPblRyYWNrKGV2ZW50OiBSVENUcmFja0V2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5vblRyYWNrKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2YXRlcyB0aGUgb25QZWVySWNlQ2FuZGlkYXRlIFxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIHBlZXIgaWNlIGNhbmRpZGF0ZVxyXG4gICAgICovXHJcbiAgICBoYW5kZWxJY2VDYW5kaWRhdGUoZXZlbnQ6IFJUQ1BlZXJDb25uZWN0aW9uSWNlRXZlbnQpIHtcclxuICAgICAgICB0aGlzLm9uUGVlckljZUNhbmRpZGF0ZShldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBtZXRob2QgZm9yIG9uVHJhY2sgZm9yIHVzZSBvdXRzaWRlIG9mIHRoZSBQZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXJcclxuICAgICAqIEBwYXJhbSB0cmFja0V2ZW50IC0gVGhlIHdlYlJ0YyB0cmFjayBldmVudFxyXG4gICAgICovXHJcbiAgICBvblRyYWNrKHRyYWNrRXZlbnQ6IFJUQ1RyYWNrRXZlbnQpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW4gb3ZlcnJpZGUgbWV0aG9kIGZvciBvblBlZXJJY2VDYW5kaWRhdGUgZm9yIHVzZSBvdXRzaWRlIG9mIHRoZSBQZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXJcclxuICAgICAqIEBwYXJhbSBwZWVyQ29ubmVjdGlvbkljZUV2ZW50IC0gVGhlIHBlZXIgaWNlIGNhbmRpZGF0ZVxyXG4gICAgICovXHJcbiAgICBvblBlZXJJY2VDYW5kaWRhdGUocGVlckNvbm5lY3Rpb25JY2VFdmVudDogUlRDUGVlckNvbm5lY3Rpb25JY2VFdmVudCkgeyB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0dXAgdHJhY2tzIG9uIHRoZSBSVEMgUGVlciBDb25uZWN0aW9uIFxyXG4gICAgICovXHJcbiAgICBhc3luYyBzZXR1cFRyYWNrc1RvU2VuZEFzeW5jKHVzZU1pYzogYm9vbGVhbikge1xyXG5cclxuICAgICAgICBsZXQgaGFzVHJhbnNjZWl2ZXJzID0gdGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRUcmFuc2NlaXZlcnMoKS5sZW5ndGggPiAwO1xyXG5cclxuICAgICAgICAvLyBTZXR1cCBhIHRyYW5zY2VpdmVyIGZvciBnZXR0aW5nIFVFIHZpZGVvXHJcbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIsIHsgZGlyZWN0aW9uOiBcInJlY3Zvbmx5XCIgfSk7XHJcblxyXG4gICAgICAgIC8vIFNldHVwIGEgdHJhbnNjZWl2ZXIgZm9yIHNlbmRpbmcgbWljIGF1ZGlvIHRvIFVFIGFuZCByZWNlaXZpbmcgYXVkaW8gZnJvbSBVRVxyXG4gICAgICAgIGlmICghdXNlTWljKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiLCB7IGRpcmVjdGlvbjogXCJyZWN2b25seVwiIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgYXVkaW8gb3B0aW9ucyBiYXNlZCBvbiBtaWMgdXNhZ2VcclxuICAgICAgICAgICAgbGV0IGF1ZGlvT3B0aW9ucyA9IHVzZU1pYyA/XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b0dhaW5Db250cm9sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsQ291bnQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgZWNob0NhbmNlbGxhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZW5jeTogMCxcclxuICAgICAgICAgICAgICAgICAgICBub2lzZVN1cHByZXNzaW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVSYXRlOiA0ODAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVTaXplOiAxNixcclxuICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IDEuMFxyXG4gICAgICAgICAgICAgICAgfSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHRoZSBtZWRpYSBzZW5kIG9wdGlvbnMgXHJcbiAgICAgICAgICAgIGxldCBtZWRpYVNlbmRPcHRpb25zOiBNZWRpYVN0cmVhbUNvbnN0cmFpbnRzID0ge1xyXG4gICAgICAgICAgICAgICAgdmlkZW86IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYXVkaW86IGF1ZGlvT3B0aW9ucyxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTm90ZSB1c2luZyBtaWMgb24gYW5kcm9pZCBjaHJvbWUgcmVxdWlyZXMgU1NMIG9yIGNocm9tZTovL2ZsYWdzLyBcInVuc2FmZWx5LXRyZWF0LWluc2VjdXJlLW9yaWdpbi1hcy1zZWN1cmVcIlxyXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShtZWRpYVNlbmRPcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKHN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhc1RyYW5zY2VpdmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRyYW5zY2VpdmVyIG9mIHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0VHJhbnNjZWl2ZXJzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyICYmIHRyYW5zY2VpdmVyLnJlY2VpdmVyICYmIHRyYW5zY2VpdmVyLnJlY2VpdmVyLnRyYWNrICYmIHRyYW5zY2VpdmVyLnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiBzdHJlYW0uZ2V0VHJhY2tzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCAmJiB0cmFjay5raW5kID09IFwiYXVkaW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kZXIucmVwbGFjZVRyYWNrKHRyYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gXCJzZW5kcmVjdlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2sgb2Ygc3RyZWFtLmdldFRyYWNrcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFjay5raW5kICYmIHRyYWNrLmtpbmQgPT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFRyYW5zY2VpdmVyKHRyYWNrLCB7IGRpcmVjdGlvbjogXCJzZW5kcmVjdlwiIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIsIHsgZGlyZWN0aW9uOiBcInJlY3Zvbmx5XCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbmQgb3ZlcnJpZGUgZXZlbnQgZm9yIHdoZW4gdGhlIHZpZGVvIHN0YXRzIGFyZSBmaXJlZFxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gQWdncmVnYXRlZCBTdGF0c1xyXG4gICAgICovXHJcbiAgICBvblZpZGVvU3RhdHMoZXZlbnQ6IEFnZ3JlZ2F0ZWRTdGF0cykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCB0byBzZW5kIHRoZSBSVEMgb2ZmZXIgdG8gdGhlIFNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqIEBwYXJhbSBvZmZlciAtIFJUQyBPZmZlclxyXG4gICAgICovXHJcbiAgICBvblNlbmRXZWJSVENPZmZlcihvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBmb3Igc2hvd2luZyB0aGUgUGVlciBjb25uZWN0aW9uIGNvbm5lY3RpbmcgT3ZlcmxheVxyXG4gICAgICovXHJcbiAgICBzaG93VGV4dE92ZXJsYXlDb25uZWN0aW5nKCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBmb3Igc2hvd2luZyB0aGUgUGVlciBjb25uZWN0aW9uIEZhaWxlZCBvdmVybGF5XHJcbiAgICAgKi9cclxuICAgIHNob3dUZXh0T3ZlcmxheVNldHVwRmFpbHVyZSgpIHsgfVxyXG59XHJcbiIsIi8qKiBcclxuICogQ2xhc3MgdG8gaG9sZCB0aGUgc3RyZWFtIHN0YXRzIGRhdGEgY29taW5nIGluIGZyb20gd2ViUnRjXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3RyZWFtU3RhdHMge1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgc3RyZWFtSWRlbnRpZmllcjogc3RyaW5nXHJcbiAgICB0aW1lc3RhbXA6IG51bWJlclxyXG4gICAgdHJhY2tJZHM6IHN0cmluZ1tdXHJcbn0iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiO1xyXG5pbXBvcnQgeyBVZURlc2NyaXB0b3IgfSBmcm9tIFwiLi9VZURlc2NyaXB0b3JcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIFNlbmRpbmcgY29udHJvbCBtZXNzYWdlcyB0byB0aGUgVUUgSW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVZUNvbnRyb2xNZXNzYWdlIGV4dGVuZHMgVWVEZXNjcmlwdG9yIHtcclxuXHJcblx0LyoqXHJcblx0ICogXHJcblx0ICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIERhdGEgQ2hhbm5lbCBDb250cm9sbGVyXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpIHtcclxuXHRcdHN1cGVyKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIElGcmFtZSBSZXF1ZXN0IHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdFNlbmRJRnJhbWVSZXF1ZXN0KCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5pRnJhbWVSZXF1ZXN0XSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIFJlcXVlc3QgdG8gVGFrZSBRdWFsaXR5IENvbnRyb2wgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0U2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbCgpIHtcclxuXHRcdGxldCBwYXlsb2FkID0gbmV3IFVpbnQ4QXJyYXkoW1VlTWVzc2FnZVR5cGUucmVxdWVzdFF1YWxpdHlDb250cm9sXSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgTWF4IEZQUyBSZXF1ZXN0IHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdFNlbmRNYXhGcHNSZXF1ZXN0KCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5tYXhGcHNSZXF1ZXN0XSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgQXZlcmFnZSBCaXRyYXRlIFJlcXVlc3QgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0U2VuZEF2ZXJhZ2VCaXRyYXRlUmVxdWVzdCgpIHtcclxuXHRcdGxldCBwYXlsb2FkID0gbmV3IFVpbnQ4QXJyYXkoW1VlTWVzc2FnZVR5cGUuYXZlcmFnZUJpdHJhdGVSZXF1ZXN0XSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBTdGFydCBTdHJlYW1pbmcgTWVzc2FnZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKi9cclxuXHRTZW5kU3RhcnRTdHJlYW1pbmcoKSB7XHJcblx0XHRsZXQgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KFtVZU1lc3NhZ2VUeXBlLnN0YXJ0U3RyZWFtaW5nXSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBTdG9wIFN0cmVhbWluZyBNZXNzYWdlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdFNlbmRTdG9wU3RyZWFtaW5nKCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5zdG9wU3RyZWFtaW5nXSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKHBheWxvYWQuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBMYXRlbmN5IFRlc3QgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICogQHBhcmFtIFN0YXJ0VGltZU1zIC0gU3RhcnQgVGltZSBvZiB0aGUgTGF0ZW5jeSB0ZXN0XHJcblx0ICovXHJcblx0c2VuZExhdGVuY3lUZXN0KFN0YXJ0VGltZU1zOiBudW1iZXIpIHtcclxuXHRcdGxldCBwYXlsb2FkID0ge1xyXG5cdFx0XHRTdGFydFRpbWU6IFN0YXJ0VGltZU1zLFxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLnNlbmREZXNjcmlwdG9yKFVlTWVzc2FnZVR5cGUubGF0ZW5jeVRlc3QsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgYSBSZXF1ZXN0IEluaXRpYWwgU2V0dGluZ3MgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0U2VuZFJlcXVlc3RJbml0aWFsU2V0dGluZ3MoKSB7XHJcblx0XHRsZXQgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KFtVZU1lc3NhZ2VUeXBlLnJlcXVlc3RJbml0aWFsU2V0dGluZ3NdKTtcclxuXHRcdHRoaXMuc2VuZERhdGEocGF5bG9hZC5idWZmZXIpO1xyXG5cdH1cclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHNlbmRpbmcgYSBtZXNzYWdlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlRGF0YU1lc3NhZ2Uge1xyXG5cclxuICAgIGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZGF0YUNoYW5uZWxDb250cm9sbGVyIC0gRGF0YSBDaGFubmVsIENvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpe1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyID0gZGF0YUNoYW5uZWxDb250cm9sbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhbiBBcnJheSBCdWZmZXIgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gYnVmZmVyIC0gTWVzc2FnZSBCdWZmZXIgQXJyYXlcclxuICAgICAqL1xyXG4gICAgc2VuZERhdGEoYnVmZmVyOiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLnNlbmREYXRhKGJ1ZmZlcik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IFVlRGF0YU1lc3NhZ2UgfSBmcm9tIFwiLi9VZURhdGFNZXNzYWdlXCI7XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBzZW5kaW5nIGEgRGVzY3JpcHRvciB0byB0aGUgVUUgSW5zdGFuY2UgXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVEZXNjcmlwdG9yIGV4dGVuZHMgVWVEYXRhTWVzc2FnZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFjaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YWNoYW5uZWxDb250cm9sbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBEZXNjcmlwdG9yIHRvIHRoZSBVRSBJbnN0YW5jZXNcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlVHlwZSAtIFVFIE1lc3NhZ2UgVHlwZVxyXG4gICAgICogQHBhcmFtIEpTT0Rlc2NyaXB0b3IgLSBEZXNjcmlwdG9yIE1lc3NhZ2UgYXMgSlNPTlxyXG4gICAgICovXHJcbiAgICBzZW5kRGVzY3JpcHRvcihtZXNzYWdlVHlwZTogbnVtYmVyLCBKU09EZXNjcmlwdG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiU2VuZGluZzogXCIgKyBKU09EZXNjcmlwdG9yLCA2KTtcclxuICAgICAgICAvLyBBZGQgdGhlIFVURi0xNiBKU09OIHN0cmluZyB0byB0aGUgYXJyYXkgYnl0ZSBidWZmZXIsIGdvaW5nIHR3byBieXRlcyBhdFxyXG4gICAgICAgIC8vIGEgdGltZS5cclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSArIDIgKyAyICogSlNPRGVzY3JpcHRvci5sZW5ndGgpKTtcclxuICAgICAgICBsZXQgYnl0ZUlkeCA9IDA7XHJcbiAgICAgICAgZGF0YS5zZXRVaW50OChieXRlSWR4LCBtZXNzYWdlVHlwZSk7XHJcbiAgICAgICAgYnl0ZUlkeCsrO1xyXG4gICAgICAgIGRhdGEuc2V0VWludDE2KGJ5dGVJZHgsIEpTT0Rlc2NyaXB0b3IubGVuZ3RoLCB0cnVlKTtcclxuICAgICAgICBieXRlSWR4ICs9IDI7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSlNPRGVzY3JpcHRvci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBkYXRhLnNldFVpbnQxNihieXRlSWR4LCBKU09EZXNjcmlwdG9yLmNoYXJDb2RlQXQoaSksIHRydWUpO1xyXG4gICAgICAgICAgICBieXRlSWR4ICs9IDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbmREYXRhKGRhdGEuYnVmZmVyKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEZXNjcmlwdG9yIH0gZnJvbSBcIi4vVWVEZXNjcmlwdG9yXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi4vQ29uZmlnL0NvbmZpZ1wiO1xyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIFNlbmRpbmcgb2YgYSBVSSBEZXNjcmlwdG9yIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlRGVzY3JpcHRvclVpIGV4dGVuZHMgVWVEZXNjcmlwdG9yIHtcclxuXHJcbiAgICBkYXRhQ2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcjtcclxuICAgIGNvbmZpZzogQ29uZmlnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGRhdGFDaGFubmVsQ29udHJvbGxlciAtIERhdGEgQ2hhbm5lbCBDb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFDaGFubmVsQ29udHJvbGxlcjogRGF0YUNoYW5uZWxDb250cm9sbGVyLCBjb25maWc6IENvbmZpZykge1xyXG4gICAgICAgIHN1cGVyKGRhdGFDaGFubmVsQ29udHJvbGxlcik7XHJcblx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIgPSBkYXRhQ2hhbm5lbENvbnRyb2xsZXI7XHJcblx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgc2V0IHJlcyBVSSBEZXNjcmlwdG9yIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gd2lkdGggLSBXaWR0aCBvZiByZXNcclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBIZWlnaHQgb2YgcmVzXHJcbiAgICAgKi9cclxuICAgIHNlbmRVcGRhdGVWaWRlb1N0cmVhbVNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuXHRpZiAodGhpcy5jb25maWcuaXNNb2JpbGUpIHtcclxuXHRcdHdpZHRoICo9IDI7XHJcblx0XHRoZWlnaHQgKj0gMjtcclxuXHR9XHJcblx0Y29uc3QgcyA9IEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFwiUmVzb2x1dGlvbi5XaWR0aFwiOiB3aWR0aCxcclxuXHRcdFwiUmVzb2x1dGlvbi5IZWlnaHRcIjogaGVpZ2h0XHJcblx0fSk7XHJcblx0Y29uc3QgbiA9IHtcclxuXHRcdGlkOiA1MVxyXG5cdH07XHJcblx0Y29uc3QgciA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMyArIDIgKiBzLmxlbmd0aCkpO1xyXG5cdGxldCBvID0gMDtcclxuXHRyLnNldFVpbnQ4KG8sIG4uaWQpLCBvKyssIHIuc2V0VWludDE2KG8sIHMubGVuZ3RoLCAhMCksIG8gKz0gMjtcclxuXHRmb3IgKGxldCBlID0gMDsgZSA8IHMubGVuZ3RoOyBlKyspIHtcclxuXHRcdHIuc2V0VWludDE2KG8sIHMuY2hhckNvZGVBdChlKSwgITApO1xyXG5cdFx0byArPSAyO1xyXG5cdH1cclxuXHR0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlci5zZW5kRGF0YShyLmJ1ZmZlcik7XHRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBzdGF0IGZwcyBVSSBEZXNjcmlwdG9yIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHNlbmRTaG93RnBzKCkge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwic3RhdCBmcHNcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgRW5jb2RlciBSYXRlIENvbnRyb2wgdG8gVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSByYXRlQ29udHJvbCAtIFJhdGUgQ29udHJvbCBcIkNCUlwiIHwgXCJWQlJcIiB8IFwiQ29uc3RRUFwiIFxyXG4gICAgICovXHJcbiAgICBzZW5kRW5jb2RlclJhdGVDb250cm9sKHJhdGVDb250cm9sOiBcIkNCUlwiIHwgXCJWQlJcIiB8IFwiQ29uc3RRUFwiKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5FbmNvZGVyLlJhdGVDb250cm9sIFwiICsgcmF0ZUNvbnRyb2wpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBFbmNvZGVyIFRhcmdldCBCaXQgUmF0ZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB0YXJnZXRCaXRSYXRlIC0gU2VuZCBhIFRhcmdldCBCaXQgUmF0ZVxyXG4gICAgICovXHJcbiAgICBzZW5kRW5jb2RlclRhcmdldEJpdFJhdGUodGFyZ2V0Qml0UmF0ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5FbmNvZGVyLlRhcmdldEJpdHJhdGUgXCIgKyAodGFyZ2V0Qml0UmF0ZSA+IDAgPyB0YXJnZXRCaXRSYXRlIDogLTEpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgRW5jb2RlciBNYXggQml0IFJhdGUgVkJSIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbWF4Qml0UmF0ZSAtIFNlbmQgQSBNYXggQml0IFJhdGVcclxuICAgICAqL1xyXG4gICAgc2VuZEVuY29kZXJNYXhCaXRyYXRlVmJyKG1heEJpdFJhdGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuRW5jb2Rlci5NYXhCaXRyYXRlVkJSIFwiICsgKG1heEJpdFJhdGUgPiAwID8gbWF4Qml0UmF0ZSA6IDEpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgdGhlIE1pbmltdW0gUXVhbnRpemF0aW9uIFBhcmFtZXRlciB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtaW5RUCAtIE1pbmltdW0gUXVhbnRpemF0aW9uIFBhcmFtZXRlciBcclxuICAgICAqL1xyXG4gICAgc2VuZEVuY29kZXJNaW5RUChtaW5RUDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5FbmNvZGVyLk1pblFQIFwiICsgbWluUVApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCB0aGUgTWF4aW11bSBRdWFudGl6YXRpb24gUGFyYW1ldGVyIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1heFFQIC0gTWF4aW11bSBRdWFudGl6YXRpb24gUGFyYW1ldGVyIFxyXG4gICAgICovXHJcbiAgICBzZW5kRW5jb2Rlck1heFFQKG1heFFQOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcIlBpeGVsU3RyZWFtaW5nLkVuY29kZXIuTWF4UVAgXCIgKyBtYXhRUCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIEVuYWJsZSBGaWxsZXIgRGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBlbmFibGUgLSBUcnVlXHJcbiAgICAgKi9cclxuICAgIHNlbmRFbmNvZGVyRW5hYmxlRmlsbGVyRGF0YShlbmFibGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcIlBpeGVsU3RyZWFtaW5nLkVuY29kZXIuRW5hYmxlRmlsbGVyRGF0YSBcIiArIE51bWJlcihlbmFibGUpLnZhbHVlT2YoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIEVuY29kZXIgTXVsdGlQYXNzIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbXVsdGlQYXNzIC0gTXVsdGlQYXNzIFwiRElTQUJMRURcIiB8IFwiUVVBUlRFUlwiIHwgXCJGVUxMXCJcclxuICAgICAqL1xyXG4gICAgc2VuZEVuY29kZXJNdWx0aVBhc3MobXVsdGlQYXNzOiBcIkRJU0FCTEVEXCIgfCBcIlFVQVJURVJcIiB8IFwiRlVMTFwiKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5FbmNvZGVyLk11bHRpcGFzcyBcIiArIG11bHRpUGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgV2ViIFJUQyBEZWdyYWRhdGlvbiBQcmVmZXJlbmNlIHRvIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gRGVncmFkYXRpb25QcmVmZXJlbmNlIC0gRGVncmFkYXRpb24gUHJlZmVyZW5jZSBcIkJBTEFOQ0VEXCIgfCBcIk1BSU5UQUlOX0ZSQU1FUkFURVwiIHwgXCJNQUlOVEFJTl9SRVNPTFVUSU9OXCJcclxuICAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y0RlZ3JhZGF0aW9uUHJlZmVyZW5jZShEZWdyYWRhdGlvblByZWZlcmVuY2U6IFwiQkFMQU5DRURcIiB8IFwiTUFJTlRBSU5fRlJBTUVSQVRFXCIgfCBcIk1BSU5UQUlOX1JFU09MVVRJT05cIikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuV2ViUlRDLkRlZ3JhZGF0aW9uUHJlZmVyZW5jZSBcIiArIERlZ3JhZGF0aW9uUHJlZmVyZW5jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyB0aGUgTWF4IEZQUyB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBNYXhGcHMgLSBXZWIgUlRDIE1heCBGcmFtZXMgUGVyIFNlY29uZFxyXG4gICAgICovXHJcbiAgICBzZW5kV2ViUnRjTWF4RnBzKE1heEZwczogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5XZWJSVEMuTWF4RnBzIFwiICsgTWF4RnBzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2VuZHMgdGhlIEZQUyB0byB0aGUgVUUgSW5zdGFuY2UgdXNlZCB1biBVRSA1LjBcclxuICAgICogQHBhcmFtIEZwcyAtIFdlYiBSVEMgRnJhbWVzIFBlciBTZWNvbmRcclxuICAgICovXHJcbiAgICBzZW5kV2ViUnRjRnBzKEZwczogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5XZWJSVEMuRnBzIFwiICsgRnBzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmRzIHRoZSBNaW5pbXVtIGJpdCByYXRlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIE1pbkJpdHJhdGUgLSBXZWIgUlRDIE1pbmltdW0gQml0cmF0ZVxyXG4gICAgICovXHJcbiAgICBzZW5kV2ViUnRjTWluQml0cmF0ZShNaW5CaXRyYXRlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihcIlBpeGVsU3RyZWFtaW5nLldlYlJUQy5NaW5CaXRyYXRlIFwiICsgTWluQml0cmF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyB0aGUgTWF4aW11bSBiaXQgcmF0ZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBNYXhCaXRyYXRlIC0gV2ViIFJUQyBNYXhpbXVtIEJpdHJhdGVcclxuICAgICAqL1xyXG4gICAgc2VuZFdlYlJ0Y01heEJpdHJhdGUoTWF4Qml0cmF0ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5XZWJSVEMuTWF4Qml0cmF0ZSBcIiArIE1heEJpdHJhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIExvdyBRdWFudGl6YXRpb24gUGFyYW1ldGVyIFRocmVzaG9sZCBsZXZlbCB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBMb3dRcFRocmVzaG9sZCAtIExvdyBRdWFudGl6YXRpb24gUGFyYW1ldGVyIFRocmVzaG9sZCBMZXZlbFxyXG4gICAgICovXHJcbiAgICBzZW5kV2ViUnRjTG93UXBUaHJlc2hvbGQoTG93UXBUaHJlc2hvbGQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZFVpQ29uc29sZUludGVyYWN0aW9uKFwiUGl4ZWxTdHJlYW1pbmcuV2ViUlRDLkxvd1FwVGhyZXNob2xkIFwiICsgTG93UXBUaHJlc2hvbGQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIEhpZ2ggUXVhbnRpemF0aW9uIFBhcmFtZXRlciBUaHJlc2hvbGQgbGV2ZWwgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gSGlnaFFwVGhyZXNob2xkIC0gSGlnaCBRdWFudGl6YXRpb24gUGFyYW1ldGVyIFRocmVzaG9sZCBMZXZlbFxyXG4gICAgICovXHJcbiAgICBzZW5kV2ViUnRjSGlnaFFwVGhyZXNob2xkKEhpZ2hRcFRocmVzaG9sZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVWlDb25zb2xlSW50ZXJhY3Rpb24oXCJQaXhlbFN0cmVhbWluZy5XZWJSVEMuSGlnaFFwVGhyZXNob2xkIFwiICsgSGlnaFFwVGhyZXNob2xkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmRzIGEgZGVzY3JpcHRvciBzdHJpbmcgdG8gdGhlIFVFIEludGVyYWN0aW9uIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRvciAtIHRoZSBTdHJpbmcgZGVzY3JpcHRvciB0byBzZW5kXHJcbiAgICAgKi9cclxuICAgIHNlbmRVaUludGVyYWN0aW9uKGRlc2NyaXB0b3I6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc2VuZERlc2NyaXB0b3IoVWVNZXNzYWdlVHlwZS51aUludGVyYWN0aW9uLCBkZXNjcmlwdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmRzIGEgY29uc29sZSBkZXNjcmlwdG9yXHJcbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRvciAtIFRoZSBzdHJpbmcgZGVzY3JpcHRvciB0byBzZW5kXHJcbiAgICAgKi9cclxuICAgIHNlbmRVaUNvbnNvbGVJbnRlcmFjdGlvbihkZXNjcmlwdG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgICAgQ29uc29sZTogZGVzY3JpcHRvclxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbmRVaUludGVyYWN0aW9uKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kQ29tbWFuZChwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XHJcblx0dGhpcy5zZW5kVWlJbnRlcmFjdGlvbihKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEYXRhTWVzc2FnZSB9IGZyb20gXCIuL1VlRGF0YU1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgVWVNZXNzYWdlVHlwZSB9IGZyb20gXCIuL1VlTWVzc2FnZVR5cGVzXCI7XHJcblxyXG4vKipcclxuICogVGhlIGNsYXNzIGZvciBoYW5kbGluZyBVRSBJbnB1dCBHYW1lUGFkIE1lc3NhZ2VzLiBJdCBpbXBsZW1lbnRzIHRoZSBVZURhdGFNZXNzYWdlIGNsYXNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVJbnB1dEdhbWVQYWRNZXNzYWdlIGV4dGVuZHMgVWVEYXRhTWVzc2FnZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIENoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhY2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlcikge1xyXG4gICAgICAgIHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBjb250cm9sbGVyIGJ1dHRvbiBwcmVzcyBkYXRhIHRocm91Z2ggdGhlIGRhdGEgY2hhbm5lbCBcclxuICAgICAqIEBwYXJhbSBjb250cm9sbGVySW5kZXggLSB0aGUgY29udHJvbGxlciBpbmRleCBudW1iZXIgXHJcbiAgICAgKiBAcGFyYW0gYnV0dG9uSW5kZXggLSB0aGUgYnV0dG9uIGluZGV4IG51bWJlclxyXG4gICAgICogQHBhcmFtIGlzUmVwZWF0IC0gaXMgdGhpcyBhIHJlcGVhdCBwcmVzcyBcclxuICAgICAqL1xyXG4gICAgc2VuZENvbnRyb2xsZXJCdXR0b25QcmVzc2VkKGNvbnRyb2xsZXJJbmRleDogbnVtYmVyLCBidXR0b25JbmRleDogbnVtYmVyLCBpc1JlcGVhdDogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCBEYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig0KSk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgwLCBVZU1lc3NhZ2VUeXBlLmdhbWVwYWRCdXR0b25QcmVzc2VkKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDEsIGNvbnRyb2xsZXJJbmRleCk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgyLCBidXR0b25JbmRleCk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgzLCBOdW1iZXIoaXNSZXBlYXQpLnZhbHVlT2YoKSk7XHJcbiAgICAgICAgdGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBjb250cm9sbGVyIGJ1dHRvbiByZWxlYXNlIGRhdGEgdGhyb3VnaCB0aGUgZGF0YSBjaGFubmVsIFxyXG4gICAgICogQHBhcmFtIGNvbnRyb2xsZXJJbmRleCAtIHRoZSBjb250cm9sbGVyIGluZGV4IG51bWJlciBcclxuICAgICAqIEBwYXJhbSBidXR0b25JbmRleCAgLSB0aGUgYnV0dG9uIGluZGV4IG51bWJlclxyXG4gICAgICovXHJcbiAgICBzZW5kQ29udHJvbGxlckJ1dHRvblJlbGVhc2VkKGNvbnRyb2xsZXJJbmRleDogbnVtYmVyLCBidXR0b25JbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IERhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDMpKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUuZ2FtZXBhZEJ1dHRvblJlbGVhc2VkKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDEsIGNvbnRyb2xsZXJJbmRleCk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgyLCBidXR0b25JbmRleCk7XHJcbiAgICAgICAgdGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGNvbnRyb2xsZXIgYXhpcyBkYXRhIHRocm91Z2ggdGhlIGRhdGEgY2hhbm5lbCBcclxuICAgICAqIEBwYXJhbSBjb250cm9sbGVySW5kZXggLSB0aGUgY29udHJvbGxlciBpbmRleCBudW1iZXIgXHJcbiAgICAgKiBAcGFyYW0gYXhpc0luZGV4IC0gdGhlIGF4aXMgaW5kZXggbnVtYmVyIFxyXG4gICAgICogQHBhcmFtIGFuYWxvZ1ZhbHVlIC0gdGhlIGFuYWxvZ3VlIHZhbHVlIG51bWJlciBcclxuICAgICAqL1xyXG4gICAgc2VuZENvbnRyb2xsZXJBeGlzTW92ZShjb250cm9sbGVySW5kZXg6IG51bWJlciwgYXhpc0luZGV4OiBudW1iZXIsIGFuYWxvZ1ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgRGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMTEpKTtcclxuICAgICAgICBEYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUuZ2FtZXBhZEFuYWxvZyk7XHJcbiAgICAgICAgRGF0YS5zZXRVaW50OCgxLCBjb250cm9sbGVySW5kZXgpO1xyXG4gICAgICAgIERhdGEuc2V0VWludDgoMiwgYXhpc0luZGV4KTtcclxuICAgICAgICBEYXRhLnNldEZsb2F0NjQoMywgYW5hbG9nVmFsdWUsIHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbmREYXRhKERhdGEuYnVmZmVyKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFVlRGF0YU1lc3NhZ2UgfSBmcm9tIFwiLi9VZURhdGFNZXNzYWdlXCI7XHJcbmltcG9ydCB7IFVlTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9VZU1lc3NhZ2VUeXBlc1wiXHJcblxyXG4vKipcclxuICogSGFuZGxlcyBzZW5kaW5nIEtleWJvYXJkIE1lc3NhZ2VzIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVlSW5wdXRLZXlib2FyZE1lc3NhZ2UgZXh0ZW5kcyBVZURhdGFNZXNzYWdle1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZGF0YWNoYW5uZWxDb250cm9sbGVyIC0gRGF0YSBDaGFubmVsIENvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZGF0YWNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpe1xyXG4gICAgICAgIHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyB0aGUga2V5IGRvd24gdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ga2V5Q29kZSAtIEtleSBjb2RlXHJcbiAgICAgKiBAcGFyYW0gaXNSZXBlYXQgLSBJcyB0aGUga2V5IHJlcGVhdGluZ1xyXG4gICAgICovXHJcbiAgICBzZW5kS2V5RG93bihrZXlDb2RlOm51bWJlciwgaXNSZXBlYXQ6Ym9vbGVhbil7XHJcbiAgICAgICAgbGV0IFBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5rZXlEb3duLCBrZXlDb2RlLCBOdW1iZXIoaXNSZXBlYXQpLnZhbHVlT2YoKV0pO1xyXG4gICAgICAgIHRoaXMuc2VuZERhdGEoUGF5bG9hZC5idWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIEtleSBVcCB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBrZXlDb2RlIC0gS2V5IGNvZGVcclxuICAgICAqL1xyXG4gICAgc2VuZEtleVVwKGtleUNvZGU6IG51bWJlcil7XHJcbiAgICAgICAgbGV0IHBheWxvYWQgPSBuZXcgVWludDhBcnJheShbVWVNZXNzYWdlVHlwZS5rZXlVcCwga2V5Q29kZV0pO1xyXG4gICAgICAgIHRoaXMuc2VuZERhdGEocGF5bG9hZC5idWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIGtleSBwcmVzcyB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBDaGFyQ29kZSAtIGNoYXJhY3RlciBjb2RlIG9mIGEga2V5IHByZXNzZWRcclxuICAgICAqL1xyXG4gICAgc2VuZEtleVByZXNzKENoYXJDb2RlOm51bWJlcil7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDMpKTtcclxuICAgICAgICBkYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUua2V5UHJlc3MpO1xyXG4gICAgICAgIGRhdGEuc2V0VWludDE2KDEsIENoYXJDb2RlLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnNlbmREYXRhKGRhdGEuYnVmZmVyKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEYXRhTWVzc2FnZSB9IGZyb20gXCIuL1VlRGF0YU1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgVWVNZXNzYWdlVHlwZSB9IGZyb20gXCIuL1VlTWVzc2FnZVR5cGVzXCJcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHNlbmRpbmcgTW91c2UgTWVzc2FnZXMgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVJbnB1dE1vdXNlTWVzc2FnZSBleHRlbmRzIFVlRGF0YU1lc3NhZ2Uge1xyXG5cclxuXHQvKipcclxuXHQqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIGNoYW5uZWwgQ29udHJvbGxlclxyXG5cdCovXHJcblx0Y29uc3RydWN0b3IoZGF0YWNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXIpIHtcclxuXHRcdHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIE1vdXNlIEVudGVyIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZUVudGVyKCkge1xyXG5cdFx0bGV0IERhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKTtcclxuXHRcdERhdGEuc2V0VWludDgoMCwgVWVNZXNzYWdlVHlwZS5tb3VzZUVudGVyKTtcclxuXHRcdHRoaXMuc2VuZERhdGEoRGF0YS5idWZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBNb3VzZSBMZWF2ZSB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKi9cclxuXHRzZW5kTW91c2VMZWF2ZSgpIHtcclxuXHRcdGxldCBEYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSk7XHJcblx0XHREYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUubW91c2VMZWF2ZSk7XHJcblx0XHR0aGlzLnNlbmREYXRhKERhdGEuYnVmZmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgTW91c2UgRG93biB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKiBAcGFyYW0gYnV0dG9uIC0gTW91c2UgQnV0dG9uIFxyXG5cdCAqIEBwYXJhbSBYIC0gWCBDb29yZGluYXRlIFZhbHVlIG9mIG1vdXNlIFxyXG5cdCAqIEBwYXJhbSBZIC0gWSBDb29yZGluYXRlIFZhbHVlIG9mIG1vdXNlIFxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZURvd24oYnV0dG9uOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRsZXQgRGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNikpO1xyXG5cdFx0RGF0YS5zZXRVaW50OCgwLCBVZU1lc3NhZ2VUeXBlLm1vdXNlRG93bik7XHJcblx0XHREYXRhLnNldFVpbnQ4KDEsIGJ1dHRvbik7XHJcblx0XHREYXRhLnNldFVpbnQxNigyLCBYLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0VWludDE2KDQsIFksIHRydWUpO1xyXG5cdFx0dGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIE1vdXNlIFVwIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBidXR0b24gLSBNb3VzZSBCdXR0b24gXHJcblx0ICogQHBhcmFtIFggLSBYIENvb3JkaW5hdGUgVmFsdWUgb2YgbW91c2UgXHJcblx0ICogQHBhcmFtIFkgLSBZIENvb3JkaW5hdGUgVmFsdWUgb2YgbW91c2UgXHJcblx0ICovXHJcblx0c2VuZE1vdXNlVXAoYnV0dG9uOiBudW1iZXIsIFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcblx0XHRsZXQgRGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNikpO1xyXG5cdFx0RGF0YS5zZXRVaW50OCgwLCBVZU1lc3NhZ2VUeXBlLm1vdXNlVXApO1xyXG5cdFx0RGF0YS5zZXRVaW50OCgxLCBidXR0b24pO1xyXG5cdFx0RGF0YS5zZXRVaW50MTYoMiwgWCwgdHJ1ZSk7XHJcblx0XHREYXRhLnNldFVpbnQxNig0LCBZLCB0cnVlKTtcclxuXHRcdHRoaXMuc2VuZERhdGEoRGF0YS5idWZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBNb3VzZSBNb3ZlIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBtb3VzZUNvcmRYIC0gWCBNb3VzZSBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIG1vdXNlQ29yZFkgLSBZIE1vdXNlIENvb3JkaW5hdGVcclxuXHQgKiBAcGFyYW0gZGVsdGFYIC0gWCBNb3VzZSBEZWx0YSBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIGRlbHRhWSAtIFkgTW91c2UgRGVsdGEgQ29vcmRpbmF0ZVxyXG5cdCAqL1xyXG5cdHNlbmRNb3VzZU1vdmUobW91c2VDb3JkWDogbnVtYmVyLCBtb3VzZUNvcmRZOiBudW1iZXIsIGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcikge1xyXG5cdFx0bGV0IERhdGEgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDkpKTtcclxuXHRcdERhdGEuc2V0VWludDgoMCwgVWVNZXNzYWdlVHlwZS5tb3VzZU1vdmUpO1xyXG5cdFx0RGF0YS5zZXRVaW50MTYoMSwgbW91c2VDb3JkWCwgdHJ1ZSk7XHJcblx0XHREYXRhLnNldFVpbnQxNigzLCBtb3VzZUNvcmRZLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0SW50MTYoNSwgZGVsdGFYLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0SW50MTYoNywgZGVsdGFZLCB0cnVlKTtcclxuXHRcdHRoaXMuc2VuZERhdGEoRGF0YS5idWZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBNb3VzZSB3aGVlbCBldmVudCB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKiBAcGFyYW0gZGVsdGFZIC0gTW91c2UgV2hlZWwgZGVsdGEgWVxyXG5cdCAqIEBwYXJhbSBYIC0gTW91c2UgWCBDb29yZGluYXRlXHJcblx0ICogQHBhcmFtIFkgLSBNb3VzZSBZIENvb3JkaW5hdGVcclxuXHQgKi9cclxuXHRzZW5kTW91c2VXaGVlbChkZWx0YVk6IG51bWJlciwgWDogbnVtYmVyLCBZOiBudW1iZXIpIHtcclxuXHRcdGxldCBEYXRhID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig3KSk7XHJcblx0XHREYXRhLnNldFVpbnQ4KDAsIFVlTWVzc2FnZVR5cGUubW91c2VXaGVlbCk7XHJcblx0XHREYXRhLnNldEludDE2KDEsIGRlbHRhWSwgdHJ1ZSk7XHJcblx0XHREYXRhLnNldFVpbnQxNigzLCBYLCB0cnVlKTtcclxuXHRcdERhdGEuc2V0VWludDE2KDUsIFksIHRydWUpO1xyXG5cdFx0dGhpcy5zZW5kRGF0YShEYXRhLmJ1ZmZlcik7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9EYXRhQ2hhbm5lbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgTm9ybWFsaXNlQW5kUXVhbnRpc2VVbnNpZ25lZCB9IGZyb20gXCIuLi9JbnB1dHMvQ29vcmRpbmF0ZURhdGFcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL0lWaWRlb1BsYXllclwiO1xyXG5pbXBvcnQgeyBVZURhdGFNZXNzYWdlIH0gZnJvbSBcIi4vVWVEYXRhTWVzc2FnZVwiO1xyXG5pbXBvcnQgeyBVZU1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vVWVNZXNzYWdlVHlwZXNcIlxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgU2VuZGluZyBUb3VjaCBtZXNzYWdlcyB0byB0aGUgVUUgSW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVZUlucHV0VG91Y2hNZXNzYWdlIGV4dGVuZHMgVWVEYXRhTWVzc2FnZSB7XHJcblxyXG4gICAgZmluZ2VyczogbnVtYmVyW107XHJcbiAgICBmaW5nZXJzSWRzOiB7IFtrZXk6IG51bWJlcl06IG51bWJlciB9O1xyXG5cclxuICAgIHJlYWRvbmx5IHVuc2lnbmVkT3V0T2ZSYW5nZTogbnVtYmVyID0gNjU1MzU7XHJcbiAgICByZWFkb25seSBzaWduZWRPdXRPZlJhbmdlOiBudW1iZXIgPSAzMjc2NztcclxuXHJcbiAgICBwcmludElucHV0czogYm9vbGVhbjtcclxuXHJcbiAgICB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBkYXRhY2hhbm5lbENvbnRyb2xsZXIgLSBEYXRhIGNoYW5uZWwgQ29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhY2hhbm5lbENvbnRyb2xsZXI6IERhdGFDaGFubmVsQ29udHJvbGxlciwgdmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHN1cGVyKGRhdGFjaGFubmVsQ29udHJvbGxlcik7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlciA9IHZpZGVvRWxlbWVudFByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuZmluZ2Vyc0lkcyA9IHt9XHJcbiAgICAgICAgdGhpcy5maW5nZXJzID0gWzksIDgsIDcsIDYsIDUsIDQsIDMsIDIsIDEsIDBdO1xyXG4gICAgICAgIHRoaXMucHJpbnRJbnB1dHMgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgVG91Y2ggZXZlbnQgU3RhcnRcclxuICAgICAqIEBwYXJhbSB0b3VjaGVzIC0gVG91Y2ggTGlzdFxyXG4gICAgICovXHJcbiAgICBzZW5kVG91Y2hTdGFydCh0b3VjaGVzOiBUb3VjaExpc3QpIHtcclxuICAgICAgICB0aGlzLnNlbmRUb3VjaChVZU1lc3NhZ2VUeXBlLnRvdWNoU3RhcnQsIHRvdWNoZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBUb3VjaCBldmVudCBFbmRcclxuICAgICAqIEBwYXJhbSB0b3VjaGVzIC0gVG91Y2ggTGlzdFxyXG4gICAgICovXHJcbiAgICBzZW5kVG91Y2hFbmQodG91Y2hlczogVG91Y2hMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5zZW5kVG91Y2goVWVNZXNzYWdlVHlwZS50b3VjaEVuZCwgdG91Y2hlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIFRvdWNoIGV2ZW50IE1vdmVcclxuICAgICAqIEBwYXJhbSB0b3VjaGVzIC0gVG91Y2ggTGlzdFxyXG4gICAgICovXHJcbiAgICBzZW5kVG91Y2hNb3ZlKHRvdWNoZXM6IFRvdWNoTGlzdCkge1xyXG4gICAgICAgIHRoaXMuc2VuZFRvdWNoKFVlTWVzc2FnZVR5cGUudG91Y2hNb3ZlLCB0b3VjaGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgU2VuZGluZyB0aGUgVG91Y2ggRXZlbnQgdG8gdGhlIFVFIEluc3RhbmNlIHZpYSB0aGUgRGF0YSBjaGFubmVsXHJcbiAgICAgKiBAcGFyYW0gdG91Y2hlcyAtIFRvdWNoIExpc3RcclxuICAgICAqL1xyXG4gICAgc2VuZFRvdWNoKHRvdWNoVHlwZTogbnVtYmVyLCB0b3VjaGVzOiBUb3VjaExpc3QpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMiArIDcgKiB0b3VjaGVzLmxlbmd0aCkpO1xyXG4gICAgICAgIGRhdGEuc2V0VWludDgoMCwgdG91Y2hUeXBlKTtcclxuICAgICAgICBkYXRhLnNldFVpbnQ4KDEsIHRvdWNoZXMubGVuZ3RoKTtcclxuICAgICAgICBsZXQgYnl0ZSA9IDI7XHJcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0b3VjaGVzLmxlbmd0aDsgdCsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0b3VjaCA9IHRvdWNoZXNbdF07XHJcbi8vXHQgICAgbGV0IG9mZnNldExlZnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbi8vICAgICAgICAgIGxldCBvZmZzZXRUb3AgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgICAgICAgICAgbGV0IHggPSB0b3VjaC5jbGllbnRYO1xyXG4gICAgICAgICAgICBsZXQgeSA9IHRvdWNoLmNsaWVudFk7XHJcblxyXG5cdCAgICBpZiAodG91Y2hUeXBlID09PSBVZU1lc3NhZ2VUeXBlLnRvdWNoTW92ZSkge1xyXG4gICAgICAgICAgICAgICAgeCAtPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcclxuICAgICAgICAgICAgICAgIHkgLT0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgY29vcmQgPSB0aGlzLm5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoeCwgeSk7XHJcblx0ICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJYOiBcIiArIHggKyBcIiBZOiBcIiArIHksIDYpO1xyXG4gICAgICAgICAgICAvLyAgICAgIGJ5dGUgPSAgMlxyXG4gICAgICAgICAgICBkYXRhLnNldFVpbnQxNihieXRlLCBjb29yZC54LCB0cnVlKTtcclxuICAgICAgICAgICAgYnl0ZSArPSAyO1xyXG4gICAgICAgICAgICAvLyAgICAgIGJ5dGUgPSAgNFxyXG4gICAgICAgICAgICBkYXRhLnNldFVpbnQxNihieXRlLCBjb29yZC55LCB0cnVlKTtcclxuICAgICAgICAgICAgYnl0ZSArPSAyO1xyXG4gICAgICAgICAgICAvLyAgICAgIGJ5dGUgPSAgNlxyXG4gICAgICAgICAgICBkYXRhLnNldFVpbnQ4KGJ5dGUsIHRoaXMuZmluZ2Vyc0lkc1t0b3VjaC5pZGVudGlmaWVyXSk7XHJcbiAgICAgICAgICAgIGJ5dGUgKz0gMTtcclxuICAgICAgICAgICAgLy8gICAgICBieXRlID0gIDdcclxuICAgICAgICAgICAgZGF0YS5zZXRVaW50OChieXRlLCAyNTUgKiB0b3VjaC5mb3JjZSk7ICAgLy8gZm9yY2UgaXMgYmV0d2VlbiAwLjAgYW5kIDEuMCBzbyBxdWFudGl6ZSBpbnRvIGJ5dGUuXHJcbiAgICAgICAgICAgIGJ5dGUgKz0gMTtcclxuICAgICAgICAgICAgLy8gICAgICBieXRlID0gIDhcclxuICAgICAgICAgICAgZGF0YS5zZXRVaW50OChieXRlLCBjb29yZC5pblJhbmdlID8gMSA6IDApOyAvLyBtYXJrIHRoZSB0b3VjaCBhcyBpbiB0aGUgcGxheWVyIG9yIG5vdFxyXG4gICAgICAgICAgICBieXRlICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZERhdGEoZGF0YS5idWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVE8gRE9cclxuICAgICAqIEBwYXJhbSB4IC0gWCBDb29yZGluYXRlXHJcbiAgICAgKiBAcGFyYW0geSAtIFkgQ29vcmRpbmF0ZVxyXG4gICAgICogQHJldHVybnMgLSBOb3JtYWxpc2VkIGFuZCBRdWFudGlzZWQgVW5zaWduZWQgdmFsdWVzXHJcbiAgICAgKi9cclxuICAgIG5vcm1hbGlzZUFuZFF1YW50aXNlVW5zaWduZWQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBOb3JtYWxpc2VBbmRRdWFudGlzZVVuc2lnbmVkIHtcclxuICAgICAgICBsZXQgcm9vdERpdiA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCk7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7XHJcblxyXG4gICAgICAgIGlmIChyb290RGl2ICYmIHZpZGVvRWxlbWVudCkge1xyXG4gICAgICAgICAgICBsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSByb290RGl2LmNsaWVudEhlaWdodCAvIHJvb3REaXYuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIGxldCB2aWRlb0FzcGVjdFJhdGlvID0gdmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0IC8gdmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAvLyBVbnNpZ25lZCBYWSBwb3NpdGlvbnMgYXJlIHRoZSByYXRpbyAoMC4wLi4xLjApIGFsb25nIGEgdmlld3BvcnQgYXhpcyxcclxuICAgICAgICAgICAgLy8gcXVhbnRpemVkIGludG8gYW4gdWludDE2ICgwLi42NTUzNikuXHJcbiAgICAgICAgICAgIC8vIFNpZ25lZCBYWSBkZWx0YXMgYXJlIHRoZSByYXRpbyAoLTEuMC4uMS4wKSBhbG9uZyBhIHZpZXdwb3J0IGF4aXMsXHJcbiAgICAgICAgICAgIC8vIHF1YW50aXplZCBpbnRvIGFuIGludDE2ICgtMzI3NjcuLjMyNzY3KS5cclxuICAgICAgICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIGJyb3dzZXIgdmlld3BvcnQgYW5kIGNsaWVudCB2aWV3cG9ydCB0byBoYXZlIGEgZGlmZmVyZW50XHJcbiAgICAgICAgICAgIC8vIHNpemUuXHJcbiAgICAgICAgICAgIC8vIEhhY2s6IEN1cnJlbnRseSB3ZSBzZXQgYW4gb3V0LW9mLXJhbmdlIHBvc2l0aW9uIHRvIGFuIGV4dHJlbWUgKDY1NTM1KVxyXG4gICAgICAgICAgICAvLyBhcyB3ZSBjYW4ndCB5ZXQgYWNjdXJhdGVseSBkZXRlY3QgbW91c2UgZW50ZXIgYW5kIGxlYXZlIGV2ZW50c1xyXG4gICAgICAgICAgICAvLyBwcmVjaXNlbHkgaW5zaWRlIGEgdmlkZW8gd2l0aCBhbiBhc3BlY3QgcmF0aW8gd2hpY2ggY2F1c2VzIG1hdHRlcy5cclxuICAgICAgICAgICAgaWYgKHBsYXllckFzcGVjdFJhdGlvID4gdmlkZW9Bc3BlY3RSYXRpbykge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCByYXRpbyA9IHBsYXllckFzcGVjdFJhdGlvIC8gdmlkZW9Bc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgICAgIC8vIFVuc2lnbmVkLlxyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6ZWRYID0geCAvIHJvb3REaXYuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgbm9ybWFsaXplZFkgPSByYXRpbyAqICh5IC8gcm9vdERpdi5jbGllbnRIZWlnaHQgLSAwLjUpICsgMC41O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkWCA8IDAuMCB8fCBub3JtYWxpemVkWCA+IDEuMCB8fCBub3JtYWxpemVkWSA8IDAuMCB8fCBub3JtYWxpemVkWSA+IDEuMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluUmFuZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy51bnNpZ25lZE91dE9mUmFuZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluUmFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IG5vcm1hbGl6ZWRYICogKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IG5vcm1hbGl6ZWRZICogKHRoaXMudW5zaWduZWRPdXRPZlJhbmdlICsgMSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaW50SW5wdXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCAnU2V0dXAgTm9ybWFsaXplIGFuZCBRdWFudGl6ZSBmb3IgcGxheWVyQXNwZWN0UmF0aW8gPD0gdmlkZW9Bc3BlY3RSYXRpbycsIDYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCByYXRpbyA9IHZpZGVvQXNwZWN0UmF0aW8gLyBwbGF5ZXJBc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgICAgIC8vIFVuc2lnbmVkLiBcclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxpemVkWCA9IHJhdGlvICogKHggLyByb290RGl2LmNsaWVudFdpZHRoIC0gMC41KSArIDAuNTtcclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxpemVkWSA9IHkgLyByb290RGl2LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkWCA8IDAuMCB8fCBub3JtYWxpemVkWCA+IDEuMCB8fCBub3JtYWxpemVkWSA8IDAuMCB8fCBub3JtYWxpemVkWSA+IDEuMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluUmFuZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy51bnNpZ25lZE91dE9mUmFuZ2VcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBub3JtYWxpemVkWCAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBub3JtYWxpemVkWSAqICh0aGlzLnVuc2lnbmVkT3V0T2ZSYW5nZSArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogVGhlIFR5cGUgb2YgbWVzc2FnZSBzZW50IHRvIHRoZSBVRSBpbnN0YW5jZSBvdmVyIHRoZSBkYXRhIGNoYW5uZWxcclxuICogTXVzdCBiZSBrZXB0IGluIHN5bmMgd2l0aCBQaXhlbFN0cmVhbWluZ1Byb3RvY29sOjpFVG9VRTRNc2cgQysrIGVudW0uXHJcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vRXBpY0dhbWVzL1VucmVhbEVuZ2luZS9ibG9iL3JlbGVhc2UvRW5naW5lL1BsdWdpbnMvTWVkaWEvUGl4ZWxTdHJlYW1pbmcvU291cmNlL1BpeGVsU3RyZWFtaW5nL1ByaXZhdGUvUHJvdG9jb2xEZWZzLmh9IFJlcXVpcmVzIExvZ2luXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVWVNZXNzYWdlVHlwZSB7XHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cdC8qXHJcblx0ICogQ29udHJvbCBNZXNzYWdlcy4gUmFuZ2UgPSAwLi40OS5cclxuXHQgKi9cclxuXHRzdGF0aWMgaUZyYW1lUmVxdWVzdCA9IDA7XHJcblx0c3RhdGljIHJlcXVlc3RRdWFsaXR5Q29udHJvbCA9IDE7XHJcblx0c3RhdGljIG1heEZwc1JlcXVlc3QgPSAyO1xyXG5cdHN0YXRpYyBhdmVyYWdlQml0cmF0ZVJlcXVlc3QgPSAzO1xyXG5cdHN0YXRpYyBzdGFydFN0cmVhbWluZyA9IDQ7XHJcblx0c3RhdGljIHN0b3BTdHJlYW1pbmcgPSA1O1xyXG5cdHN0YXRpYyBsYXRlbmN5VGVzdCA9IDY7XHJcblx0c3RhdGljIHJlcXVlc3RJbml0aWFsU2V0dGluZ3MgPSA3O1xyXG5cclxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcblx0LypcclxuXHQgKiBJbnB1dCBNZXNzYWdlcy4gUmFuZ2UgPSA1MC4uODkuXHJcblx0ICovXHJcblxyXG5cdC8vIEdlbmVyaWMgSW5wdXQgTWVzc2FnZXMuIFJhbmdlID0gNTAuLjU5LlxyXG5cdHN0YXRpYyB1aUludGVyYWN0aW9uID0gNTA7XHJcblx0c3RhdGljIGNvbW1hbmQgPSA1MTtcclxuXHJcblx0Ly8gS2V5Ym9hcmQgSW5wdXQgTWVzc2FnZS4gUmFuZ2UgPSA2MC4uNjkuXHJcblx0c3RhdGljIGtleURvd24gPSA2MDtcclxuXHRzdGF0aWMga2V5VXAgPSA2MTtcclxuXHRzdGF0aWMga2V5UHJlc3MgPSA2MjtcclxuXHJcblx0Ly8gTW91c2UgSW5wdXQgTWVzc2FnZXMuIFJhbmdlID0gNzAuLjc5LlxyXG5cdHN0YXRpYyBtb3VzZUVudGVyID0gNzA7XHJcblx0c3RhdGljIG1vdXNlTGVhdmUgPSA3MTtcclxuXHRzdGF0aWMgbW91c2VEb3duID0gNzI7XHJcblx0c3RhdGljIG1vdXNlVXAgPSA3MztcclxuXHRzdGF0aWMgbW91c2VNb3ZlID0gNzQ7XHJcblx0c3RhdGljIG1vdXNlV2hlZWwgPSA3NTtcclxuXHJcblx0Ly8gVG91Y2ggSW5wdXQgTWVzc2FnZXMuIFJhbmdlID0gODAuLjg5LlxyXG5cdHN0YXRpYyB0b3VjaFN0YXJ0ID0gODA7XHJcblx0c3RhdGljIHRvdWNoRW5kID0gODE7XHJcblx0c3RhdGljIHRvdWNoTW92ZSA9IDgyO1xyXG5cclxuXHQvLyBHYW1lcGFkIElucHV0IE1lc3NhZ2VzLiBSYW5nZSA9IDkwLi45OVxyXG5cdHN0YXRpYyBnYW1lcGFkQnV0dG9uUHJlc3NlZCA9IDkwO1xyXG5cdHN0YXRpYyBnYW1lcGFkQnV0dG9uUmVsZWFzZWQgPSA5MTtcclxuXHRzdGF0aWMgZ2FtZXBhZEFuYWxvZyA9IDkyO1xyXG5cclxuXHJcblx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG59IiwiaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL0lWaWRlb1BsYXllclwiO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBVaSBDb250cm9sbGVyIGNsYXNzIGhhbmRsZXMgYWxsIG1ldGhvZHMgdGhhdCBpbnRlcmFjdCB3aXRoIHRoZSBVSVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFVpQ29udHJvbGxlciB7XHJcbiAgICB2aWRlb1BsYXllclByb3ZpZGVyOiBJVmlkZW9QbGF5ZXI7XHJcbiAgICBwbGF5ZXJTdHlsZUF0dHJpYnV0ZXM6IHBsYXllclN0eWxlQXR0cmlidXRlcztcclxuICAgIG9yaWVudGF0aW9uQ2hhbmdlVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XHJcbiAgICBsYXN0VGltZVJlc2l6ZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIHJlc2l6ZVRpbWVvdXQ6IG51bWJlcjtcclxuICAgIGVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93OiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZpZGVvUGxheWVyUHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlciA9IHZpZGVvUGxheWVyUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMgPSBuZXcgcGxheWVyU3R5bGVBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIC8vIHNldCByZXNpemUgZXZlbnRzIHRvIHRoZSB3aW5kb3dzIGlmIGl0IGlzIHJlc2l6ZWQgb3IgaXRzIG9yaWVudGF0aW9uIGlzIGNoYW5nZWRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gdGhpcy5yZXNpemVQbGF5ZXJTdHlsZSgpLCB0cnVlKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCAoKSA9PiB0aGlzLm9uT3JpZW50YXRpb25DaGFuZ2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNpemVzIHRoZSBwbGF5ZXIgZWxlbWVudCB0byBmaWxsIHRoZSB3aW5kb3cgXHJcbiAgICAgKiBAcGFyYW0gcGxheWVyRWxlbWVudCAtIHRoZSBwbGF5ZXIgRE9NIGVsZW1lbnQgXHJcbiAgICAgKi9cclxuICAgIHJlc2l6ZVBsYXllclN0eWxlVG9GaWxsV2luZG93KHBsYXllckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuICAgICAgICAvLyBGaWxsIHRoZSBwbGF5ZXIgZGlzcGxheSBpbiB3aW5kb3csIGtlZXBpbmcgcGljdHVyZSdzIGFzcGVjdCByYXRpby5cclxuICAgICAgICBsZXQgd2luZG93QXNwZWN0UmF0aW8gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBsZXQgcGxheWVyQXNwZWN0UmF0aW8gPSBwbGF5ZXJFbGVtZW50LmNsaWVudEhlaWdodCAvIHBsYXllckVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgLy8gV2Ugd2FudCB0byBrZWVwIHRoZSB2aWRlbyByYXRpbyBjb3JyZWN0IGZvciB0aGUgdmlkZW8gc3RyZWFtXHJcbiAgICAgICAgbGV0IHZpZGVvV2lkdGg7XHJcbiAgICAgICAgbGV0IHZpZGVvSGVpZ2h0O1xyXG4gICAgICAgIGlmICghdmlkZW9FbGVtZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmlkZW9XaWR0aCA9IHBhcnNlSW50KHZpZGVvRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2aWRlb1dpZHRoXCIpKTtcclxuICAgICAgICAgICAgdmlkZW9IZWlnaHQgPSBwYXJzZUludCh2aWRlb0VsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmlkZW9IZWlnaHRcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdmlkZW9Bc3BlY3RSYXRpbyA9IHZpZGVvSGVpZ2h0IC8gdmlkZW9XaWR0aDtcclxuXHJcbiAgICAgICAgaWYgKGlzTmFOKHZpZGVvQXNwZWN0UmF0aW8pKSB7XHJcbiAgICAgICAgICAgIC8vVmlkZW8gaXMgbm90IGluaXRpYWxpc2VkIHlldCBzbyBzZXQgcGxheWVyRWxlbWVudCB0byBzaXplIG9mIHdpbmRvd1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVRvcCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCA9IDA7XHJcbiAgICAgICAgICAgIHBsYXllckVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFwidG9wOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wICsgXCJweDsgbGVmdDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUxlZnQgKyBcInB4OyB3aWR0aDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoICsgXCJweDsgaGVpZ2h0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlSGVpZ2h0ICsgXCJweDsgY3Vyc29yOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlQ3Vyc29yICsgXCI7IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVBZGRpdGlvbmFsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvd0FzcGVjdFJhdGlvIDwgcGxheWVyQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgLy8gV2luZG93IGhlaWdodCBpcyB0aGUgY29uc3RyYWluaW5nIGZhY3RvciBzbyB0byBrZWVwIGFzcGVjdCByYXRpbyBjaGFuZ2Ugd2lkdGggYXBwcm9wcmlhdGVseVxyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoID0gTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJIZWlnaHQgLyB2aWRlb0FzcGVjdFJhdGlvKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wID0gMDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVMZWZ0ID0gTWF0aC5mbG9vcigod2luZG93LmlubmVyV2lkdGggLSB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoKSAqIDAuNSk7XHJcbiAgICAgICAgICAgIHBsYXllckVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFwidG9wOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wICsgXCJweDsgbGVmdDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUxlZnQgKyBcInB4OyB3aWR0aDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVdpZHRoICsgXCJweDsgaGVpZ2h0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlSGVpZ2h0ICsgXCJweDsgY3Vyc29yOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlQ3Vyc29yICsgXCI7IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVBZGRpdGlvbmFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXaW5kb3cgd2lkdGggaXMgdGhlIGNvbnN0cmFpbmluZyBmYWN0b3Igc28gdG8ga2VlcCBhc3BlY3QgcmF0aW8gY2hhbmdlIGhlaWdodCBhcHByb3ByaWF0ZWx5XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgPSBNYXRoLmZsb29yKHdpbmRvdy5pbm5lcldpZHRoICogdmlkZW9Bc3BlY3RSYXRpbyk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlVG9wID0gTWF0aC5mbG9vcigod2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQpICogMC41KTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVMZWZ0ID0gMDtcclxuICAgICAgICAgICAgcGxheWVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgXCJ0b3A6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVUb3AgKyBcInB4OyBsZWZ0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCArIFwicHg7IHdpZHRoOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggKyBcInB4OyBoZWlnaHQ6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgKyBcInB4OyBjdXJzb3I6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVDdXJzb3IgKyBcIjsgXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUFkZGl0aW9uYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2l6ZXMgdGhlIHBsYXllciBlbGVtZW50IHRvIGZpdCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlIHN0cmVhbVxyXG4gICAgICogQHBhcmFtIHBsYXllckVsZW1lbnQgLSB0aGUgcGxheWVyIERPTSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHJlc2l6ZVBsYXllclN0eWxlVG9BY3R1YWxTaXplKHBsYXllckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50TGVuZ3RoO1xyXG4gICAgICAgIGlmICghdmlkZW9FbGVtZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmlkZW9FbGVtZW50TGVuZ3RoID0gcGFyc2VJbnQodmlkZW9FbGVtZW50LmdldEF0dHJpYnV0ZShcImxlbmd0aFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2aWRlb0VsZW1lbnRMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIERpc3BsYXkgaW1hZ2UgaW4gaXRzIGFjdHVhbCBzaXplXHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggPSB2aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgPSB2aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XHJcbiAgICAgICAgICAgIGxldCBUb3AgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUhlaWdodCkgKiAwLjUpO1xyXG4gICAgICAgICAgICBsZXQgTGVmdCA9IE1hdGguZmxvb3IoKHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVXaWR0aCkgKiAwLjUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZVRvcCA9IChUb3AgPiAwKSA/IFRvcCA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCA9IChMZWZ0ID4gMCkgPyBMZWZ0IDogMDtcclxuICAgICAgICAgICAgcGxheWVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgXCJ0b3A6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVUb3AgKyBcInB4OyBsZWZ0OiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlTGVmdCArIFwicHg7IHdpZHRoOiBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlV2lkdGggKyBcInB4OyBoZWlnaHQ6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVIZWlnaHQgKyBcInB4OyBjdXJzb3I6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVDdXJzb3IgKyBcIjsgXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUFkZGl0aW9uYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2l6ZXMgdGhlIHBsYXllciBlbGVtZW50IHRvIGZpdCBhbiBhcmJpdHJhcnkgc2l6ZSBcclxuICAgICAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gdGhlIHBsYXllciBET00gZWxlbWVudFxyXG4gICAgICovXHJcbiAgICByZXNpemVQbGF5ZXJTdHlsZVRvQXJiaXRyYXJ5U2l6ZShwbGF5ZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHBsYXllckVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFwidG9wOiAwcHg7IGxlZnQ6IDBweDsgd2lkdGg6IFwiICsgdGhpcy5wbGF5ZXJTdHlsZUF0dHJpYnV0ZXMuc3R5bGVXaWR0aCArIFwicHg7IGhlaWdodDogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUhlaWdodCArIFwicHg7IGN1cnNvcjogXCIgKyB0aGlzLnBsYXllclN0eWxlQXR0cmlidXRlcy5zdHlsZUN1cnNvciArIFwiOyBcIiArIHRoaXMucGxheWVyU3R5bGVBdHRyaWJ1dGVzLnN0eWxlQWRkaXRpb25hbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBmb3Igc2V0dGluZyB1cCB0aGUgbW91c2UgYW5kIGZyZWV6ZUZyYW1lIFxyXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSB0aGUgcGxheWVyIERPTSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHNldFVwTW91c2VBbmRGcmVlemVGcmFtZShlbGVtZW50OiBIVE1MRGl2RWxlbWVudCkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvdmVycmlkZSBmb3IgdXBkYXRpbmcgdGhlIHZpZGVvIHN0cmVhbSBzaXplXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSgpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzaXplcyB0aGUgcGxheWVyIHN0eWxlIGJhc2VkIG9uIHRoZSB3aW5kb3cgaGVpZ2h0IGFuZCB3aWR0aCBcclxuICAgICAqIEByZXR1cm5zIC0gbmlsIGlmIHJlcXVpcmVtZW50cyBhcmUgc2F0aXNmaWVkIFxyXG4gICAgICovXHJcbiAgICByZXNpemVQbGF5ZXJTdHlsZSgpIHtcclxuICAgICAgICBsZXQgcGxheWVyRWxlbWVudCA9IHRoaXMudmlkZW9QbGF5ZXJQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKCFwbGF5ZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlVmlkZW9TdHJlYW1TaXplKCk7XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZml4ZWQtc2l6ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXBNb3VzZUFuZEZyZWV6ZUZyYW1lKHBsYXllckVsZW1lbnQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNvbnRyb2xzIGZvciByZXNpemluZyB0aGUgcGxheWVyIFxyXG4gICAgICAgIGxldCB2aWRlb1dpZHRoID0gcGFyc2VJbnQocGxheWVyRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2aWRlb1dpZHRoXCIpKVxyXG4gICAgICAgIGxldCB2aWRlb0hlaWdodCA9IHBhcnNlSW50KHBsYXllckVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmlkZW9IZWlnaHRcIikpXHJcbiAgICAgICAgbGV0IHdpbmRvd1NtYWxsZXJUaGFuUGxheWVyID0gd2luZG93LmlubmVyV2lkdGggPCB2aWRlb1dpZHRoIHx8IHdpbmRvdy5pbm5lckhlaWdodCA8IHZpZGVvSGVpZ2h0O1xyXG4gICAgICAgIGlmICh0aGlzLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ID09PSB0cnVlIHx8IHdpbmRvd1NtYWxsZXJUaGFuUGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVBsYXllclN0eWxlVG9GaWxsV2luZG93KHBsYXllckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVQbGF5ZXJTdHlsZVRvQWN0dWFsU2l6ZShwbGF5ZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplUGxheWVyU3R5bGVUb0FyYml0cmFyeVNpemUocGxheWVyRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFVwTW91c2VBbmRGcmVlemVGcmFtZShwbGF5ZXJFbGVtZW50KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT24gdGhlIG9yaWVudGF0aW9uIGNoYW5nZSBvZiBhIHdpbmRvdyBjbGVhciB0aGUgdGltZW91dCBcclxuICAgICAqL1xyXG4gICAgb25PcmllbnRhdGlvbkNoYW5nZSgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5vcmllbnRhdGlvbkNoYW5nZVRpbWVvdXQpO1xyXG4gICAgICAgIHRoaXMub3JpZW50YXRpb25DaGFuZ2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7IHRoaXMucmVzaXplUGxheWVyU3R5bGUoKSB9LCA1MDApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIHBsYXllciBzdHlsZSBhdHRyaWJ1dGVzIHNvIHRoZXkgY2FuIGJlIGluc3RhbnRpYXRlZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIHBsYXllclN0eWxlQXR0cmlidXRlcyB7XHJcbiAgICBzdHlsZVdpZHRoOiBudW1iZXI7XHJcbiAgICBzdHlsZUhlaWdodDogbnVtYmVyO1xyXG4gICAgc3R5bGVUb3A6IG51bWJlcjtcclxuICAgIHN0eWxlTGVmdDogbnVtYmVyO1xyXG4gICAgc3R5bGVDdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICBzdHlsZUFkZGl0aW9uYWw6IG51bWJlcjtcclxufSIsImltcG9ydCB7IE1vdXNlQ29udHJvbGxlciB9IGZyb20gXCIuLi9JbnB1dHMvTW91c2VDb250cm9sbGVyXCJcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4vSVZpZGVvUGxheWVyXCI7XHJcblxyXG4vKipcclxuICogVmlkZW8gUGxheWVyIENvbnRyb2xsZXIgaGFuZGxlcyB0aGUgY3JlYXRpb24gb2YgdGhlIHZpZGVvIEhUTUwgZWxlbWVudCBhbmQgYWxsIGhhbmRsZXJzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3RyZWFtQ29udHJvbGxlciB7XHJcbiAgICB2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyO1xyXG4gICAgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgbW91c2VDb250cm9sbGVyOiBNb3VzZUNvbnRyb2xsZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodmlkZW9FbGVtZW50UHJvdmlkZXI6IElWaWRlb1BsYXllcikge1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIgPSB2aWRlb0VsZW1lbnRQcm92aWRlcjtcclxuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJBdWRpb1wiKSBhcyBIVE1MQXVkaW9FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZSBQZWVyIGNvbm5lY3Rpb24gaGFzIGEgdHJhY2sgZXZlbnRcclxuICAgICAqIEBwYXJhbSBydGNUcmFja0V2ZW50IC0gUlRDIFRyYWNrIEV2ZW50IFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVPblRyYWNrKHJ0Y1RyYWNrRXZlbnQ6IFJUQ1RyYWNrRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiaGFuZGxlT25UcmFjayBcIiArIEpTT04uc3RyaW5naWZ5KHJ0Y1RyYWNrRXZlbnQuc3RyZWFtcyksIDYpO1xyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO1xyXG5cclxuICAgICAgICBpZiAocnRjVHJhY2tFdmVudC50cmFjaykge1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdHb3QgdHJhY2sgLSAnICsgcnRjVHJhY2tFdmVudC50cmFjay5raW5kICsgJyBpZD0nICsgcnRjVHJhY2tFdmVudC50cmFjay5pZCArICcgcmVhZHlTdGF0ZT0nICsgcnRjVHJhY2tFdmVudC50cmFjay5yZWFkeVN0YXRlLCA2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChydGNUcmFja0V2ZW50LnRyYWNrLmtpbmQgPT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQ3JlYXRlQXVkaW9UcmFjayhydGNUcmFja0V2ZW50LnN0cmVhbXNbMF0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChydGNUcmFja0V2ZW50LnRyYWNrLmtpbmQgPT0gXCJ2aWRlb1wiICYmIHZpZGVvRWxlbWVudC5zcmNPYmplY3QgIT09IHJ0Y1RyYWNrRXZlbnQuc3RyZWFtc1swXSkge1xyXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gcnRjVHJhY2tFdmVudC5zdHJlYW1zWzBdO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdTZXQgdmlkZW8gc291cmNlIGZyb20gdmlkZW8gdHJhY2sgb250cmFjay4nLCA2KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ3JlYXRlcyB0aGUgYXVkaW8gZGV2aWNlIHdoZW4gcmVjZWl2aW5nIGFuIFJUQ1RyYWNrRXZlbnQgd2l0aCB0aGUga2luZCBvZiBcImF1ZGlvXCJcclxuICAgICogQHBhcmFtIGF1ZGlvTWVkaWFTdHJlYW0gLSBBdWRpbyBNZWRpYSBzdHJlYW0gdHJhY2tcclxuICAgICovXHJcbiAgICBDcmVhdGVBdWRpb1RyYWNrKGF1ZGlvTWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtKSB7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7XHJcblxyXG4gICAgICAgIC8vIGRvIG5vdGhpbmcgdGhlIHZpZGVvIGhhcyB0aGUgc2FtZSBtZWRpYSBzdHJlYW0gYXMgdGhlIGF1ZGlvIHRyYWNrIHdlIGhhdmUgaGVyZSAodGhleSBhcmUgbGlua2VkKVxyXG4gICAgICAgIGlmICh2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID09IGF1ZGlvTWVkaWFTdHJlYW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB2aWRlbyBlbGVtZW50IGhhcyBzb21lIG90aGVyIG1lZGlhIHN0cmVhbSB0aGF0IGlzIG5vdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBhdWRpbyB0cmFja1xyXG4gICAgICAgIGVsc2UgaWYgKHZpZGVvRWxlbWVudC5zcmNPYmplY3QgJiYgdmlkZW9FbGVtZW50LnNyY09iamVjdCAhPT0gYXVkaW9NZWRpYVN0cmVhbSkge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYXVkaW8gZWxlbWVudFxyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBhdWRpb01lZGlhU3RyZWFtO1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdDcmVhdGVkIG5ldyBhdWRpbyBlbGVtZW50IHRvIHBsYXkgc2VwYXJhdGUgYXVkaW8gc3RyZWFtLicsIDYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJVmlkZW9QbGF5ZXIgfSBmcm9tIFwiLi9JVmlkZW9QbGF5ZXJcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWaWRlb1BsYXllciBpbXBsZW1lbnRzIElWaWRlb1BsYXllciB7XHJcbiAgICB2aWRlb0VsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iocm9vdERpdjogSFRNTERpdkVsZW1lbnQsIHN0YXJ0VmlkZW9NdXRlZDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmlkID0gXCJzdHJlYW1pbmdWaWRlb1wiO1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm11dGVkID0gc3RhcnRWaWRlb011dGVkO1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmRpc2FibGVQaWN0dXJlSW5QaWN0dXJlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wbGF5c0lubGluZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICByb290RGl2LmFwcGVuZENoaWxkKHRoaXMudmlkZW9FbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBodG1sIHZpZGVvIGVsZW1lbnRcclxuICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHZpZGVvIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZ2V0VmlkZW9FbGVtZW50KCk6IEhUTUxWaWRlb0VsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZGVvRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBodG1sIHZpZGVvIGVsZW1lbnRzIHBhcmVudFxyXG4gICAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgdmlkZW8gZWxlbWVudHMgcGFyZW50XHJcbiAgICAgKi9cclxuICAgIGdldFZpZGVvUGFyZW50RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9FbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNsaWNrIGFjdGlvbnMgZm9yIHdoZW4gdGhlIEVsZW1lbnQgaXMgbW91c2UgY2xpY2tlZFxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgc2V0Q2xpY2tBY3Rpb25zKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBtaW5vciBoYWNrIHRvIGFsbGV2aWF0ZSBpb3Mgbm90IHN1cHBvcnRpbmcgcG9pbnRlcmxvY2tcclxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQucmVxdWVzdFBvaW50ZXJMb2NrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnJlcXVlc3RQb2ludGVyTG9jaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0IHRoZSBtb3VzZSBlbnRlciBhbmQgbW91c2UgbGVhdmUgZXZlbnRzIFxyXG4gICAgKi9cclxuICAgIHNldE1vdXNlRW50ZXJBbmRMZWF2ZUV2ZW50cyhtb3VzZUVudGVyQ2FsbEJhY2s6ICgpID0+IHZvaWQsIG1vdXNlTGVhdmVDYWxsQmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIC8vIEhhbmRsZSB3aGVuIHRoZSBNb3VzZSBoYXMgZW50ZXJlZCB0aGUgZWxlbWVudFxyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50Lm9ubW91c2VlbnRlciA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiTW91c2UgRW50ZXJlZFwiLCA2KTtcclxuICAgICAgICAgICAgbW91c2VFbnRlckNhbGxCYWNrKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlcyB3aGVuIHRoZSBtb3VzZSBoYXMgbGVmdCB0aGUgZWxlbWVudCBcclxuICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5vbm1vdXNlbGVhdmUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIk1vdXNlIExlZnRcIiwgNik7XHJcbiAgICAgICAgICAgIG1vdXNlTGVhdmVDYWxsQmFjaygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNldCB0aGUgVmlkZW8gRWxlbWVudHMgc3JjIG9iamVjdCB0cmFja3MgdG8gZW5hYmxlXHJcbiAgICAqIEBwYXJhbSBlbmFibGVkIC0gRW5hYmxlIFRyYWNrcyBvbiB0aGUgU3JjIE9iamVjdFxyXG4gICAgKi9cclxuICAgIHNldFZpZGVvRW5hYmxlZChlbmFibGVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgLy8gdGhpcyBpcyBhIHRlbXBvcmFyeSBoYWNrIHVudGlsIHR5cGUgc2NyaXB0cyB2aWRlbyBlbGVtZW50IGlzIHVwZGF0ZWQgdG8gcmVmbGVjdCB0aGUgbmVlZCBmb3IgdHJhY2tzIG9uIGEgaHRtbCB2aWRlbyBlbGVtZW50IFxyXG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgPSB0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnk7XHJcbiAgICAgICAgdmlkZW9FbGVtZW50LnNyY09iamVjdC5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjazogTWVkaWFTdHJlYW1UcmFjaykgPT4gdHJhY2suZW5hYmxlZCA9IGVuYWJsZWQpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTW91c2VDb250cm9sbGVyIH0gZnJvbSBcIi4uL0lucHV0cy9Nb3VzZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyTW91c2VJbnRlcmZhY2UgfSBmcm9tIFwiLi9WaWRlb1BsYXllck1vdXNlSW50ZXJmYWNlXCI7XHJcblxyXG4vKipcclxuICogVmlkZW8gUGxheWVyIG1vdXNlIEhvdmVyIGhhbmRsZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWaWRlb1BsYXllck1vdXNlSG92ZXJFdmVudHMgaW1wbGVtZW50cyBJVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZSB7XHJcblxyXG4gICAgbW91c2VDb250cm9sbGVyOiBNb3VzZUNvbnRyb2xsZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gbW91c2VDb250cm9sbGVyIC0gTW91c2UgQ29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3VzZUNvbnRyb2xsZXI6IE1vdXNlQ29udHJvbGxlcikge1xyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyID0gbW91c2VDb250cm9sbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2F0aXNmaWVzIHRoZSBpbnRlcmZhY2VzIGhhbmRsZUxvY2tTdGF0ZUNoYW5nZSByZXF1aXJlbWVudCBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTG9ja1N0YXRlQ2hhbmdlKCk6IHZvaWQgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIG1vdmUgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZU1vdmUobW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJNb3VzZU1vdmVcIiwgNik7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlTW92ZShtb3VzZUV2ZW50Lm9mZnNldFgsIG1vdXNlRXZlbnQub2Zmc2V0WSwgbW91c2VFdmVudC5tb3ZlbWVudFgsIG1vdXNlRXZlbnQubW92ZW1lbnRZKTtcclxuICAgICAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIERvd24gZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZURvd24obW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJvbk1vdXNlIERvd25cIiwgNik7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlRG93bihtb3VzZUV2ZW50LmJ1dHRvbiwgbW91c2VFdmVudC5vZmZzZXRYLCBtb3VzZUV2ZW50Lm9mZnNldFkpO1xyXG4gICAgICAgIG1vdXNlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB0aGUgbW91c2UgVXAgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZVVwKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICB0aGlzLm1vdXNlQ29udHJvbGxlci5zZW5kTW91c2VVcChtb3VzZUV2ZW50LmJ1dHRvbiwgbW91c2VFdmVudC5vZmZzZXRYLCBtb3VzZUV2ZW50Lm9mZnNldFkpO1xyXG4gICAgICAgIG1vdXNlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB0aGUgbW91c2Ugd2hlZWwgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSB3aGVlbCBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIHdoZWVsRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNb3VzZVdoZWVsKHdoZWVsRXZlbnQ6IFdoZWVsRXZlbnQpIHtcclxuICAgICAgICAvL3doZWVsRXZlbnQuZGV0YWlsICogLTEyMFxyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZVdoZWVsKHdoZWVsRXZlbnQuZGVsdGFZLCB3aGVlbEV2ZW50Lm9mZnNldFgsIHdoZWVsRXZlbnQub2Zmc2V0WSk7XHJcbiAgICAgICAgd2hlZWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBjb250ZXh0IG1lbnUgZXZlbnQsIHNlbmRzIHRoZSBtb3VzZSBkYXRhIHRvIHRoZSBVRSBJbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIG1vdXNlRXZlbnQgLSBNb3VzZSBFdmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDb250ZXh0TWVudShtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlVXAobW91c2VFdmVudC5idXR0b24sIG1vdXNlRXZlbnQub2Zmc2V0WCwgbW91c2VFdmVudC5vZmZzZXRZKTtcclxuICAgICAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTW91c2VDb250cm9sbGVyIH0gZnJvbSBcIi4uL0lucHV0cy9Nb3VzZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL0xvZ2dlci9Mb2dnZXJcIjtcclxuaW1wb3J0IHsgSVZpZGVvUGxheWVyIH0gZnJvbSBcIi4vSVZpZGVvUGxheWVyXCI7XHJcbmltcG9ydCB7IElWaWRlb1BsYXllck1vdXNlSW50ZXJmYWNlIH0gZnJvbSBcIi4vVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZVwiO1xyXG5cclxuLyoqXHJcbiAqIEhhbmRsZSB0aGUgbW91c2UgbG9ja2VkIGV2ZW50c1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpZGVvUGxheWVyTW91c2VMb2NrZWRFdmVudHMgaW1wbGVtZW50cyBJVmlkZW9QbGF5ZXJNb3VzZUludGVyZmFjZSB7XHJcblxyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG5cclxuICAgIHZpZGVvRWxlbWVudFByb3ZpZGVyOiBJVmlkZW9QbGF5ZXI7XHJcbiAgICBtb3VzZUNvbnRyb2xsZXI6IE1vdXNlQ29udHJvbGxlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB2aWRlb0VsZW1lbnRQcm92aWRlciAtIFRoZSBIVE1MIFZpZGVvIEVsZW1lbnQgcHJvdmlkZXJcclxuICAgICAqIEBwYXJhbSBtb3VzZUNvbnRyb2xsZXIgIC0gTW91c2UgQ29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih2aWRlb0VsZW1lbnRQcm92aWRlcjogSVZpZGVvUGxheWVyLCBtb3VzZUNvbnRyb2xsZXI6IE1vdXNlQ29udHJvbGxlcikge1xyXG4gICAgICAgIHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIgPSB2aWRlb0VsZW1lbnRQcm92aWRlcjtcclxuICAgICAgICB0aGlzLm1vdXNlQ29udHJvbGxlciA9IG1vdXNlQ29udHJvbGxlcjtcclxuXHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy54ID0gdmlkZW9FbGVtZW50LndpZHRoIC8gMjtcclxuICAgICAgICB0aGlzLnkgPSB2aWRlb0VsZW1lbnQuaGVpZ2h0IC8gMjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB3aGVuIHRoZSBsb2NrZWQgc3RhdGUgQ2hhbmdlZFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVMb2NrU3RhdGVDaGFuZ2UoKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkxvY2sgc3RhdGUgaGFzIGNoYW5nZWRcIiwgNik7XHJcbiAgICAgICAgbGV0IHZpZGVvRWxlbWVudCA9IHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCA9PT0gdmlkZW9FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gKG1vdXNlRXZlbnQpID0+IHRoaXMuaGFuZGxlTW91c2VNb3ZlKG1vdXNlRXZlbnQpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5vbndoZWVsID0gKHdoZWVsRXZlbnQpID0+IHRoaXMuaGFuZGxlTW91c2VXaGVlbCh3aGVlbEV2ZW50KTtcclxuICAgICAgICAgICAgdmlkZW9FbGVtZW50Lm9ubW91c2Vkb3duID0gKHdoZWVsRXZlbnQpID0+IHRoaXMuaGFuZGxlTW91c2VEb3duKHdoZWVsRXZlbnQpO1xyXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQub25tb3VzZXVwID0gKG1vdXNlRXZlbnQpID0+IHRoaXMuaGFuZGxlTW91c2VVcChtb3VzZUV2ZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5vbm1vdXNlZG93biA9IG51bGw7XHJcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5vbm1vdXNldXAgPSBudWxsO1xyXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQub253aGVlbCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBtb3ZlIGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VNb3ZlKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBsZXQgdmlkZW9FbGVtZW50ID0gdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy54ICs9IG1vdXNlRXZlbnQubW92ZW1lbnRYO1xyXG4gICAgICAgIHRoaXMueSArPSBtb3VzZUV2ZW50Lm1vdmVtZW50WTtcclxuICAgICAgICBpZiAodGhpcy54ID4gdmlkZW9FbGVtZW50LmNsaWVudFdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCAtPSB2aWRlb0VsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnkgPiB2aWRlb0VsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMueSAtPSB2aWRlb0VsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy54IDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB2aWRlb0VsZW1lbnQuY2xpZW50V2lkdGggKyB0aGlzLng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnkgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQgLSB0aGlzLnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1vdXNlQ29udHJvbGxlci5zZW5kTW91c2VNb3ZlKHRoaXMueCwgdGhpcy55LCBtb3VzZUV2ZW50Lm1vdmVtZW50WCwgbW91c2VFdmVudC5tb3ZlbWVudFkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBEb3duIGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VEb3duKG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICB0aGlzLm1vdXNlQ29udHJvbGxlci5zZW5kTW91c2VEb3duKG1vdXNlRXZlbnQuYnV0dG9uLCBtb3VzZUV2ZW50LngsIG1vdXNlRXZlbnQueSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBtb3VzZSBVcCBldmVudCwgc2VuZHMgdGhlIG1vdXNlIGRhdGEgdG8gdGhlIFVFIEluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gbW91c2VFdmVudCAtIE1vdXNlIEV2ZW50XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU1vdXNlVXAobW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZVVwKG1vdXNlRXZlbnQuYnV0dG9uLCBtb3VzZUV2ZW50LngsIG1vdXNlRXZlbnQueSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIG1vdXNlIHdoZWVsIGV2ZW50LCBzZW5kcyB0aGUgbW91c2Ugd2hlZWwgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB3aGVlbEV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlTW91c2VXaGVlbCh3aGVlbEV2ZW50OiBXaGVlbEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIuc2VuZE1vdXNlV2hlZWwod2hlZWxFdmVudC5kZWx0YVksIHdoZWVsRXZlbnQueCwgd2hlZWxFdmVudC55KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB0aGUgbW91c2UgY29udGV4dCBtZW51IGV2ZW50LCBzZW5kcyB0aGUgbW91c2UgZGF0YSB0byB0aGUgVUUgSW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBtb3VzZUV2ZW50IC0gTW91c2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ29udGV4dE1lbnUobW91c2VFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIExvZ2dlci5JbmZvKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwib25Db250ZXh0TWVudVwiKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFdlYlNvY2tldENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vV2ViU29ja2V0cy9XZWJTb2NrZXRDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFN0cmVhbUNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vVmlkZW9QbGF5ZXIvU3RyZWFtQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlSW5zdGFuY2VTdGF0ZSwgTWVzc2FnZUFuc3dlciwgTWVzc2FnZUF1dGhSZXNwb25zZSwgTWVzc2FnZUNvbmZpZyB9IGZyb20gXCIuLi9XZWJTb2NrZXRzL01lc3NhZ2VSZWNlaXZlXCI7XHJcbmltcG9ydCB7IFVpQ29udHJvbGxlciB9IGZyb20gXCIuLi9VaS9VaUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgRnJlZXplRnJhbWVDb250cm9sbGVyIH0gZnJvbSBcIi4uL0ZyZWV6ZUZyYW1lL0ZyZWV6ZUZyYW1lQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBBZmtMb2dpYyB9IGZyb20gXCIuLi9BZmsvQWZrTG9naWNcIjtcclxuaW1wb3J0IHsgRGF0YUNoYW5uZWxDb250cm9sbGVyIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0RhdGFDaGFubmVsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL1BlZXJDb25uZWN0aW9uQ29udHJvbGxlclwiXHJcbmltcG9ydCB7IEtleWJvYXJkQ29udHJvbGxlciB9IGZyb20gXCIuLi9JbnB1dHMvS2V5Ym9hcmRDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IElUb3VjaENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vSW5wdXRzL0lUb3VjaENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgVWVEZXNjcmlwdG9yVWkgfSBmcm9tIFwiLi4vVWVJbnN0YW5jZU1lc3NhZ2UvVWVEZXNjcmlwdG9yVWlcIjtcclxuaW1wb3J0IHsgVWVDb250cm9sTWVzc2FnZSB9IGZyb20gXCIuLi9VZUluc3RhbmNlTWVzc2FnZS9VZUNvbnRyb2xNZXNzYWdlXCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCB7IElXZWJSdGNQbGF5ZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vSVdlYlJ0Y1BsYXllckNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSURlbGVnYXRlIH0gZnJvbSBcIi4uL0RlbGVnYXRlL0lEZWxlZ2F0ZVwiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi4vQ29uZmlnL0NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBFbmNvZGVyLCBJbml0aWFsU2V0dGluZ3MsIFdlYlJUQyB9IGZyb20gXCIuLi9EYXRhQ2hhbm5lbC9Jbml0aWFsU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgTGF0ZW5jeVRlc3RSZXN1bHRzIH0gZnJvbSBcIi4uL0RhdGFDaGFubmVsL0xhdGVuY3lUZXN0UmVzdWx0c1wiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vTG9nZ2VyL0xvZ2dlclwiO1xyXG5pbXBvcnQgeyBJbnB1dENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vSW5wdXRzL0lucHV0Q29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBNaWNDb250cm9sbGVyIH0gZnJvbSBcIi4uL01pY1BsYXllci9NaWNDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IFZpZGVvUGxheWVyIH0gZnJvbSBcIi4uL1ZpZGVvUGxheWVyL1ZpZGVvUGxheWVyXCI7XHJcbmltcG9ydCAqIGFzIE1lc3NhZ2VSZWNlaXZlIGZyb20gXCIuLi9XZWJTb2NrZXRzL01lc3NhZ2VSZWNlaXZlXCI7XHJcbi8qKlxyXG4gKiBFbnRyeSBwb2ludCBmb3IgdGhlIFdlYiBSVEMgUGxheWVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3Mgd2ViUnRjUGxheWVyQ29udHJvbGxlciBpbXBsZW1lbnRzIElXZWJSdGNQbGF5ZXJDb250cm9sbGVyIHtcclxuXHRjb25maWc6IENvbmZpZztcclxuXHRzZHBDb25zdHJhaW50czogUlRDT2ZmZXJPcHRpb25zO1xyXG5cdHdlYlNvY2tldENvbnRyb2xsZXI6IFdlYlNvY2tldENvbnRyb2xsZXI7XHJcblx0ZGF0YUNoYW5uZWxDb250cm9sbGVyOiBEYXRhQ2hhbm5lbENvbnRyb2xsZXI7XHJcblx0ZGF0YWNoYW5uZWxPcHRpb25zOiBSVENEYXRhQ2hhbm5lbEluaXQ7XHJcblx0dmlkZW9QbGF5ZXI6IFZpZGVvUGxheWVyO1xyXG5cdHN0cmVhbUNvbnRyb2xsZXI6IFN0cmVhbUNvbnRyb2xsZXI7XHJcblx0a2V5Ym9hcmRDb250cm9sbGVyOiBLZXlib2FyZENvbnRyb2xsZXI7XHJcblx0dG91Y2hDb250cm9sbGVyOiBJVG91Y2hDb250cm9sbGVyO1xyXG5cdHVlQ29udHJvbE1lc3NhZ2U6IFVlQ29udHJvbE1lc3NhZ2U7XHJcblx0dWVEZXNjcmlwdG9yVWk6IFVlRGVzY3JpcHRvclVpO1xyXG5cdHBlZXJDb25uZWN0aW9uQ29udHJvbGxlcjogUGVlckNvbm5lY3Rpb25Db250cm9sbGVyO1xyXG5cdHVpQ29udHJvbGxlcjogVWlDb250cm9sbGVyO1xyXG5cdGlucHV0Q29udHJvbGxlcjogSW5wdXRDb250cm9sbGVyO1xyXG5cdGZyZWV6ZUZyYW1lQ29udHJvbGxlcjogRnJlZXplRnJhbWVDb250cm9sbGVyO1xyXG5cdHNob3VsZFNob3dQbGF5T3ZlcmxheTogYm9vbGVhbiA9IHRydWU7XHJcblx0YWZrTG9naWM6IEFma0xvZ2ljO1xyXG5cdHBsYXllckVsZW1lbnRDbGllbnRSZWN0OiBET01SZWN0O1xyXG5cdGxhc3RUaW1lUmVzaXplZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdG1hdGNoVmlld3BvcnRSZXNvbHV0aW9uOiBib29sZWFuO1xyXG5cdHJlc2l6ZVRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xyXG5cdGxhdGVuY3lTdGFydFRpbWU6IG51bWJlcjtcclxuXHRkZWxlZ2F0ZTogSURlbGVnYXRlO1xyXG5cclxuXHQvLyBpZiB5b3Ugb3ZlcnJpZGUgdGhlIGRpc2Nvbm5lY3Rpb24gbWVzc2FnZSBieSBjYWxsaW5nIHRoZSBpbnRlcmZhY2UgbWV0aG9kIHNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGVcclxuXHQvLyBpdCB3aWxsIHVzZSB0aGlzIHByb3BlcnR5IHRvIHN0b3JlIHRoZSBvdmVycmlkZSBtZXNzYWdlIHN0cmluZ1xyXG5cdGRpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGU6IHN0cmluZztcclxuXHJcblx0Ly8gZm9yIG1pYyBzdXBwb3J0IFxyXG5cdHVybFBhcmFtczogVVJMU2VhcmNoUGFyYW1zO1xyXG5cdG1pY0NvbnRyb2xsZXI6IE1pY0NvbnRyb2xsZXI7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBjb25maWcgLSB0aGUgZnJvbnRlbmQgY29uZmlnIG9iamVjdCBcclxuXHQgKiBAcGFyYW0gZGVsZWdhdGUgLSB0aGUgZGVsZWdhdGUgaW50ZXJmYWNlIG9iamVjdCBcclxuXHQgKi9cclxuXHRjb25zdHJ1Y3Rvcihjb25maWc6IENvbmZpZywgZGVsZWdhdGU6IElEZWxlZ2F0ZSkge1xyXG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcblx0XHR0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XHJcblxyXG5cdFx0dGhpcy5zZHBDb25zdHJhaW50cyA9IHtcclxuXHRcdFx0b2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZSxcclxuXHRcdFx0b2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNldCB1cCB0aGUgYWZrIGxvZ2ljIGNsYXNzIGFuZCBjb25uZWN0IHVwIGl0cyBtZXRob2QgZm9yIGNsb3NpbmcgdGhlIHNpZ25hbGluZyBzZXJ2ZXIgXHJcblx0XHR0aGlzLmFma0xvZ2ljID0gbmV3IEFma0xvZ2ljKHRoaXMuY29uZmlnLmNvbnRyb2xTY2hlbWUsIHRoaXMuY29uZmlnLmFma1RpbWVvdXQpO1xyXG5cdFx0dGhpcy5hZmtMb2dpYy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlID0gKG1lc3NhZ2U6IHN0cmluZykgPT4gdGhpcy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKG1lc3NhZ2UpO1xyXG5cdFx0dGhpcy5hZmtMb2dpYy5jbG9zZVdlYlNvY2tldCA9ICgpID0+IHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKTtcclxuXHJcblx0XHR0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlciA9IG5ldyBGcmVlemVGcmFtZUNvbnRyb2xsZXIodGhpcy5jb25maWcucGxheWVyRWxlbWVudCk7XHJcblxyXG5cdFx0dGhpcy52aWRlb1BsYXllciA9IG5ldyBWaWRlb1BsYXllcih0aGlzLmNvbmZpZy5wbGF5ZXJFbGVtZW50LCB0aGlzLmNvbmZpZy5zdGFydFZpZGVvTXV0ZWQpO1xyXG5cdFx0dGhpcy5zdHJlYW1Db250cm9sbGVyID0gbmV3IFN0cmVhbUNvbnRyb2xsZXIodGhpcy52aWRlb1BsYXllcik7XHJcblxyXG5cdFx0dGhpcy51aUNvbnRyb2xsZXIgPSBuZXcgVWlDb250cm9sbGVyKHRoaXMudmlkZW9QbGF5ZXIpO1xyXG5cdFx0dGhpcy51aUNvbnRyb2xsZXIuc2V0VXBNb3VzZUFuZEZyZWV6ZUZyYW1lID0gKGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSA9PiB0aGlzLnNldFVwTW91c2VBbmRGcmVlemVGcmFtZShlbGVtZW50KTtcclxuXHJcblx0XHR0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciA9IG5ldyBEYXRhQ2hhbm5lbENvbnRyb2xsZXIodGhpcy52aWRlb1BsYXllciwgdGhpcy5jb25maWcpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25PcGVuID0gKCkgPT4gdGhpcy5oYW5kbGVEYXRhQ2hhbm5lbENvbm5lY3RlZCgpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIub25MYXRlbmN5VGVzdFJlc3VsdCA9IChsYXRlbmN5VGVzdFJlc3VsdHM6IExhdGVuY3lUZXN0UmVzdWx0cykgPT4gdGhpcy5oYW5kbGVMYXRlbmN5VGVzdFJlc3VsdChsYXRlbmN5VGVzdFJlc3VsdHMpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIub25WaWRlb0VuY29kZXJBdmdRUCA9IChBdmdRUDogbnVtYmVyKSA9PiB0aGlzLmhhbmRsZVZpZGVvRW5jb2RlckF2Z1FQKEF2Z1FQKTtcclxuXHRcdHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLk9uSW5pdGlhbFNldHRpbmdzID0gKEluaXRpYWxTZXR0aW5nczogSW5pdGlhbFNldHRpbmdzKSA9PiB0aGlzLmhhbmRsZUluaXRpYWxTZXR0aW5ncyhJbml0aWFsU2V0dGluZ3MpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIub25RdWFsaXR5Q29udHJvbE93bmVyc2hpcCA9IChoYXNRdWFsaXR5T3duZXJzaGlwOiBib29sZWFuKSA9PiB0aGlzLmhhbmRsZVF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXApO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIucmVzZXRBZmtXYXJuaW5nVGltZXJPbkRhdGFTZW5kID0gKCkgPT4gdGhpcy5hZmtMb2dpYy5yZXNldEFma1dhcm5pbmdUaW1lcigpO1xyXG5cclxuXHRcdC8vIHNldCB1cCB3ZWJzb2NrZXQgbWV0aG9kc1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyID0gbmV3IFdlYlNvY2tldENvbnRyb2xsZXIodGhpcy5jb25maWcuc2lnbmFsbGluZ1NlcnZlckFkZHJlc3MpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uQ29uZmlnID0gKG1lc3NhZ2VDb25maWc6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VDb25maWcpID0+IHRoaXMuaGFuZGxlT25Db25maWdNZXNzYWdlKG1lc3NhZ2VDb25maWcpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uSW5zdGFuY2VTdGF0ZUNoYW5nZSA9IChpbnN0YW5jZVN0YXRlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlSW5zdGFuY2VTdGF0ZSkgPT4gdGhpcy5oYW5kbGVJbnN0YW5jZVN0YXRlQ2hhbmdlKGluc3RhbmNlU3RhdGUpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uQXV0aGVudGljYXRpb25SZXNwb25zZSA9IChhdXRoUmVzcG9uc2U6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VBdXRoUmVzcG9uc2UpID0+IHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoUmVzcG9uc2UpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uV2ViU29ja2V0T25jbG9zZU92ZXJsYXlNZXNzYWdlID0gKGV2ZW50KSA9PiB0aGlzLmRlbGVnYXRlLm9uRGlzY29ubmVjdChgJHtldmVudC5jb2RlfSAtICR7ZXZlbnQucmVhc29ufWApO1xyXG5cclxuXHRcdC8vIHNldCB1cCB0aGUgZmluYWwgd2ViUnRjIHBsYXllciBjb250cm9sbGVyIG1ldGhvZHMgZnJvbSB3aXRoaW4gb3VyIGRlbGVnYXRlIHNvIGEgY29ubmVjdGlvbiBjYW4gYmUgYWN0aXZhdGVkXHJcblx0XHR0aGlzLmRlbGVnYXRlLnNldElXZWJSdGNQbGF5ZXJDb250cm9sbGVyKHRoaXMpO1xyXG5cclxuXHRcdC8vIG5vdyB0aGF0IHRoZSBkZWxlZ2F0ZSBoYXMgZmluaXNoZWQgaW5zdGFudGlhdGluZyBjb25uZWN0IHRoZSByZXN0IG9mIHRoZSBhZmsgbWV0aG9kcyB0byB0aGUgYWZrIGxvZ2ljIGNsYXNzXHJcblx0XHR0aGlzLmFma0xvZ2ljLnNob3dBZmtPdmVybGF5ID0gKCkgPT4gdGhpcy5kZWxlZ2F0ZS5zaG93QWZrT3ZlcmxheSh0aGlzLmFma0xvZ2ljLmNvdW50RG93bik7XHJcblx0XHR0aGlzLmFma0xvZ2ljLnVwZGF0ZUFma0NvdW50ZG93biA9ICgpID0+IHRoaXMuZGVsZWdhdGUudXBkYXRlQWZrT3ZlcmxheSh0aGlzLmFma0xvZ2ljLmNvdW50RG93bik7XHJcblx0XHR0aGlzLmFma0xvZ2ljLmhpZGVDdXJyZW50T3ZlcmxheSA9ICgpID0+IHRoaXMuZGVsZWdhdGUuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc3RvcEFma1dhcm5pbmdUaW1lciA9ICgpID0+IHRoaXMuYWZrTG9naWMuc3RvcEFma1dhcm5pbmdUaW1lcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogY29ubmVjdCB1cCB0aGUgb25BZmtDbGljayBhY3Rpb24gd2l0aCBhIG1ldGhvZCBzbyBpdCBjYW4gYmUgZXhwb3NlZCB0byB0aGUgZGVsZWdhdGVcclxuXHQgKi9cclxuXHRvbkFma0NsaWNrKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5hZmtMb2dpYy5vbkFma0NsaWNrKCk7XHJcblxyXG5cdFx0Ly8gaWYgdGhlIHN0cmVhbSBpcyBwYXVzZWQgcGxheSBpdFxyXG5cdFx0aWYgKHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LnBhdXNlZCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHR0aGlzLnBsYXlTdHJlYW0oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlc3RhcnQgdGhlIHN0cmVhbSBhdXRvbWF0aWNpdHkgd2l0aG91dCByZWZyZXNoaW5nIHRoZSBwYWdlXHJcblx0ICovXHJcblx0cmVzdGFydFN0cmVhbUF1dG9tYXRpY2l0eSgpIHtcclxuXHRcdC8vIGlmIHRoZXJlIGlzIG5vIHdlYlNvY2tldENvbnRyb2xsZXIgcmV0dXJuIGltbWVkaWF0ZWx5IG9yIHRoaXMgd2lsbCBub3Qgd29ya1xyXG5cdFx0aWYgKCF0aGlzLndlYlNvY2tldENvbnRyb2xsZXIpIHtcclxuXHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlRoZSBXZWIgU29ja2V0IENvbnRyb2xsZXIgZG9lcyBub3QgZXhpc3Qgc28gdGhpcyB3aWxsIG5vdCB3b3JrIHJpZ2h0IG5vdy5cIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiBhIHdlYnNvY2tldCBvYmplY3QgaGFzIG5vdCBiZWVuIGNyZWF0ZWQgY29ubmVjdCBub3JtYWxseSB3aXRob3V0IGNsb3NpbmcgXHJcblx0XHRpZiAoIXRoaXMud2ViU29ja2V0Q29udHJvbGxlci53ZWJTb2NrZXQpIHtcclxuXHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkEgd2Vic29ja2V0IGNvbm5lY3Rpb24gaGFzIG5vdCBiZWVuIG1hZGUgeWV0IHNvIHdlIHdpbGwgc3RhcnQgdGhlIHN0cmVhbVwiKTtcclxuXHRcdFx0dGhpcy5kZWxlZ2F0ZS5vbldlYlJ0Y0F1dG9Db25uZWN0KCk7XHJcblx0XHRcdHRoaXMuY29ubmVjdFRvU2lnbmFsbGluZ1NldmVyKCk7XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gc2V0IHRoZSByZXBsYXkgc3RhdHVzIHNvIHdlIGdldCBhIHRleHQgb3ZlcmxheSBvdmVyIGFuIGFjdGlvbiBvdmVybGF5XHJcblx0XHRcdHRoaXMuZGVsZWdhdGUuc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3QgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIHNldCB0aGUgZGlzY29ubmVjdCBtZXNzYWdlXHJcblx0XHRcdHRoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIlJlc3RhcnRpbmcgc3RyZWFtIG1hbnVhbGx5XCIpO1xyXG5cclxuXHRcdFx0Ly8gY2xvc2UgdGhlIGNvbm5lY3Rpb24gXHJcblx0XHRcdHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKTtcclxuXHJcblx0XHRcdC8vIHdhaXQgZm9yIHRoZSBjb25uZWN0aW9uIHRvIGNsb3NlIGFuZCByZXN0YXJ0IHRoZSBjb25uZWN0aW9uXHJcblx0XHRcdGxldCBhdXRvQ29ubmVjdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmRlbGVnYXRlLm9uV2ViUnRjQXV0b0Nvbm5lY3QoKTtcclxuXHRcdFx0XHR0aGlzLmNvbm5lY3RUb1NpZ25hbGxpbmdTZXZlcigpO1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dChhdXRvQ29ubmVjdFRpbWVvdXQpO1xyXG5cdFx0XHR9LCAzMDAwKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgaWYgd2UgYXJlIGVubGFyZ2luZyB0aGUgZGlzcGxheSB0byBmaWxsIHRoZSB3aW5kb3cgZm9yIGZyZWV6ZSBmcmFtZXMgYW5kIHVpIGNvbnRyb2xsZXJcclxuXHQgKiBAcGFyYW0gaXNGaWxsaW5nIGlzIHRoZSBkaXNwbGF5IGZpbGxpbmcgb3Igbm90XHJcblx0ICovXHJcblx0c2V0RW5sYXJnZVRvRmlsbERpc3BsYXkoaXNGaWxsaW5nOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5mcmVlemVGcmFtZS5lbmxhcmdlRGlzcGxheVRvRmlsbFdpbmRvdyA9IGlzRmlsbGluZztcclxuXHRcdHRoaXMudWlDb250cm9sbGVyLmVubGFyZ2VEaXNwbGF5VG9GaWxsV2luZG93ID0gaXNGaWxsaW5nO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTG9hZHMgYSBmcmVlemUgZnJhbWUgaWYgaXQgaXMgcmVxdWlyZWQgb3RoZXJ3aXNlIHNob3dzIHRoZSBwbGF5IG92ZXJsYXlcclxuXHQgKi9cclxuXHRsb2FkRnJlZXplRnJhbWVPclNob3dQbGF5T3ZlcmxheSgpIHtcclxuXHRcdGlmICh0aGlzLnNob3VsZFNob3dQbGF5T3ZlcmxheSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwic2hvd2luZyBwbGF5IG92ZXJsYXlcIik7XHJcblx0XHRcdHRoaXMuZGVsZWdhdGUuc2hvd1BsYXlPdmVybGF5KCk7XHJcblx0XHRcdHRoaXMucmVzaXplUGxheWVyU3R5bGUoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJzaG93aW5nIGZyZWV6ZSBmcmFtZVwiKTtcclxuXHRcdFx0dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuc2hvd0ZyZWV6ZUZyYW1lKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnZpZGVvUGxheWVyLnNldFZpZGVvRW5hYmxlZChmYWxzZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFbmFibGUgdGhlIHZpZGVvIGFmdGVyIGhpZGluZyBhIGZyZWV6ZSBmcmFtZVxyXG5cdCAqL1xyXG5cdEludmFsaWRhdGVGcmVlemVGcmFtZUFuZEVuYWJsZVZpZGVvKCkge1xyXG5cdFx0dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuaGlkZUZyZWV6ZUZyYW1lKCk7XHJcblx0XHRpZiAodGhpcy52aWRlb1BsYXllci52aWRlb0VsZW1lbnQpIHtcclxuXHRcdFx0dGhpcy52aWRlb1BsYXllci5zZXRWaWRlb0VuYWJsZWQodHJ1ZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRXZWJTb2NrZXRDb250cm9sbGVyKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMud2ViU29ja2V0Q29udHJvbGxlcjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBsYXlzIHRoZSBzdHJlYW0gYXVkaW8gYW5kIHZpZGVvIHNvdXJjZSBhbmQgc2V0cyB1cCBvdGhlciBwaWVjZXMgd2hpbGUgdGhlIHN0cmVhbSBzdGFydHNcclxuXHQgKi9cclxuXHRwbGF5U3RyZWFtKCkge1xyXG5cdFx0aWYgKCF0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudCkge1xyXG5cdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dFcnJvck92ZXJsYXkoXCJDb3VsZCBub3QgcGxheWVyIHZpZGVvIHN0cmVhbSBiZWNhdXNlIHRoZSB2aWRlbyBwbGF5ZXIgd2FzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkuXCIpO1xyXG5cdFx0XHRMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJDb3VsZCBub3QgcGxheWVyIHZpZGVvIHN0cmVhbSBiZWNhdXNlIHRoZSB2aWRlbyBwbGF5ZXIgd2FzIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHkuXCIpO1xyXG5cclxuXHRcdFx0Ly8gc2V0IHRoZSBkaXNjb25uZWN0IG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKFwiU3RyZWFtIG5vdCBpbml0aWFsaXNlZCBjb3JyZWN0bHlcIik7XHJcblxyXG5cdFx0XHQvLyBjbG9zZSB0aGUgY29ubmVjdGlvbiBcclxuXHRcdFx0dGhpcy5jbG9zZVNpZ25hbGluZ1NlcnZlcigpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIucmVnaXN0ZXJUb3VjaCh0aGlzLmNvbmZpZy5mYWtlTW91c2VXaXRoVG91Y2hlcywgdGhpcy52aWRlb1BsYXllci52aWRlb0VsZW1lbnQpO1xyXG5cdFx0XHRpZiAodGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudCkge1xyXG5cdFx0XHRcdHRoaXMuc3RyZWFtQ29udHJvbGxlci5hdWRpb0VsZW1lbnQucGxheSgpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5VmlkZW8oKTtcclxuXHRcdFx0XHR9KS5jYXRjaCgob25SZWplY3RlZFJlYXNvbikgPT4ge1xyXG5cdFx0XHRcdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBvblJlamVjdGVkUmVhc29uKTtcclxuXHRcdFx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYXV0b3BsYXlpbmcgdmlkZW8gd2l0aG91dCBpbnRlcmFjdGlvbiAtIHRvIHJlc29sdmUgdGhpcyB3ZSBhcmUgZ29pbmcgdG8gc2hvdyB0aGUgcGxheSBidXR0b24gb3ZlcmxheS5cIik7XHJcblx0XHRcdFx0XHR0aGlzLmRlbGVnYXRlLnNob3dQbGF5T3ZlcmxheSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMucGxheVZpZGVvKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5zaG91bGRTaG93UGxheU92ZXJsYXkgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuc2hvd0ZyZWV6ZUZyYW1lKCk7XHJcblx0XHRcdHRoaXMuZGVsZWdhdGUuaGlkZUN1cnJlbnRPdmVybGF5KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQbGF5cyB0aGUgdmlkZW8gc3RyZWFtXHJcblx0ICovXHJcblx0cHJpdmF0ZSBwbGF5VmlkZW8oKSB7XHJcblx0XHQvLyAvLyBoYW5kbGUgcGxheSgpIHdpdGggLnRoZW4gYXMgaXQgaXMgYW4gYXN5bmNocm9ub3VzIGNhbGwgIFxyXG5cdFx0dGhpcy52aWRlb1BsYXllci52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKChvblJlamVjdGVkUmVhc29uOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc3RyZWFtQ29udHJvbGxlci5hdWRpb0VsZW1lbnQuc3JjT2JqZWN0KSB7XHJcblx0XHRcdFx0dGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgb25SZWplY3RlZFJlYXNvbik7XHJcblx0XHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYXV0b3BsYXlpbmcgdmlkZW8gd2l0aG91dCBpbnRlcmFjdGlvbiAtIHRvIHJlc29sdmUgdGhpcyB3ZSBhcmUgZ29pbmcgdG8gc2hvdyB0aGUgcGxheSBidXR0b24gb3ZlcmxheS5cIik7XHJcblx0XHRcdHRoaXMuZGVsZWdhdGUuc2hvd1BsYXlPdmVybGF5KCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEVuYWJsZSB0aGUgdmlkZW8gdG8gcGxheSBhdXRvbWF0aWNpdHkgaWYgZW5hYmxlU3BzQXV0b3BsYXkgaXMgdHJ1ZVxyXG5cdCAqL1xyXG5cdGF1dG9QbGF5VmlkZW9PclNldFVwUGxheU92ZXJsYXkoKSB7XHJcblx0XHRpZiAodGhpcy5jb25maWcuZW5hYmxlU3BzQXV0b3BsYXkgPT09IHRydWUpIHtcclxuXHJcblx0XHRcdC8vIHNldCB1cCB0aGUgYXV0byBwbGF5IG9uIHRoZSB2aWRlbyBlbGVtZW50ICBcclxuXHRcdFx0dGhpcy52aWRlb1BsYXllci52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gYXR0ZW1wdCB0byBwbGF5IHRoZSB2aWRlb1xyXG5cdFx0XHR0aGlzLnBsYXlTdHJlYW0oKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZGVsZWdhdGUuc2hvd1BsYXlPdmVybGF5KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2VuZCBhbmQgcmVxdWVzdCBpbml0aWFsIHN0YXRzXHJcblx0XHR0aGlzLnVlQ29udHJvbE1lc3NhZ2UuU2VuZFJlcXVlc3RJbml0aWFsU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMudWVDb250cm9sTWVzc2FnZS5TZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb25uZWN0IHRvIHRoZSBTaWduYWxpbmcgc2VydmVyXHJcblx0ICovXHJcblx0Y29ubmVjdFRvU2lnbmFsbGluZ1NldmVyKCkge1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLmNvbm5lY3QoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoaXMgd2lsbCBzdGFydCB0aGUgaGFuZHNoYWtlIHRvIHRoZSBzaWduYWxsaW5nIHNlcnZlclxyXG5cdCAqIEBwYXJhbSBwZWVyQ29uZmlnICAtIFJUQyBDb25maWd1cmF0aW9uIE9wdGlvbnMgZnJvbSB0aGUgU2lnbmFsaW5nIHNlcnZlclxyXG5cdCAqIEByZW1hcmsgUlRDIFBlZXIgQ29ubmVjdGlvbiBvbiBJY2UgQ2FuZGlkYXRlIGV2ZW50IGhhdmUgaXQgaGFuZGxlZCBieSBoYW5kbGUgU2VuZCBJY2UgQ2FuZGlkYXRlXHJcblx0ICovXHJcblx0c3RhcnRTZXNzaW9uKHBlZXJDb25maWc6IFJUQ0NvbmZpZ3VyYXRpb24pIHtcclxuXHRcdC8vIHNldCB1cCB1cmwgcGFyYW1zIGZvciBTVFVOLCBNaWMgYW5kIFNGVVxyXG5cdFx0dGhpcy51cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG5cclxuXHRcdC8vIGNoZWNrIGZvciBmb3JjaW5nIHR1cm5cclxuXHRcdGlmICh0aGlzLnVybFBhcmFtcy5oYXMoJ0ZvcmNlVFVSTicpKSB7XHJcblx0XHRcdC8vIGNoZWNrIGZvciBhIHR1cm4gc2VydmVyXHJcblx0XHRcdGNvbnN0IGhhc1R1cm5TZXJ2ZXIgPSB0aGlzLmNoZWNrVHVyblNlcnZlckF2YWlsYWJpbGl0eShwZWVyQ29uZmlnKTtcclxuXHJcblx0XHRcdC8vIGNsb3NlIGFuZCBlcnJvciBpZiB0dXJuIGlzIGZvcmNlZCBhbmQgdGhlcmUgaXMgbm8gdHVybiBzZXJ2ZXJcclxuXHRcdFx0aWYgKCFoYXNUdXJuU2VydmVyKSB7XHJcblx0XHRcdFx0TG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJObyB0dXJuIHNlcnZlciB3YXMgZm91bmQgaW4gdGhlIFBlZXIgQ29ubmVjdGlvbiBPcHRpb25zLiBUVVJOIGNhbm5vdCBiZSBmb3JjZWQsIGNsb3NpbmcgY29ubmVjdGlvbi4gUGxlYXNlIHVzZSBTVFVOIGluc3RlYWRcIik7XHJcblx0XHRcdFx0dGhpcy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKFwiVFVSTiBjYW5ub3QgYmUgZm9yY2VkLCBjbG9zaW5nIGNvbm5lY3Rpb24uIFBsZWFzZSB1c2UgU1RVTiBpbnN0ZWFkLlwiKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlU2lnbmFsaW5nU2VydmVyKCk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2V0IHVwIHRoZSBwZWVyIGNvbm5lY3Rpb24gY29udHJvbGxlclxyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIgPSBuZXcgUGVlckNvbm5lY3Rpb25Db250cm9sbGVyKHBlZXJDb25maWcsIHRoaXMudXJsUGFyYW1zLmhhcygnRm9yY2VUVVJOJykpO1xyXG5cclxuXHRcdC8vc2V0IHVwIG1pYyBjb250cm9sbGVyXHJcblx0XHR0aGlzLm1pY0NvbnRyb2xsZXIgPSBuZXcgTWljQ29udHJvbGxlcih0aGlzLnVybFBhcmFtcylcclxuXHJcblx0XHQvLyBzZXQgdXAgcGVlciBjb25uZWN0aW9uIGNvbnRyb2xsZXIgdmlkZW8gc3RhdHNcclxuXHRcdHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uVmlkZW9TdGF0cyA9IChldmVudDogQWdncmVnYXRlZFN0YXRzKSA9PiB0aGlzLmhhbmRsZVZpZGVvU3RhdHMoZXZlbnQpO1xyXG5cclxuXHRcdC8qIFdoZW4gdGhlIFBlZXIgQ29ubmVjdGlvbiBXYW50cyB0byBzZW5kIGFuIG9mZmVyIGhhdmUgaXQgaGFuZGxlZCAqL1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIub25TZW5kV2ViUlRDT2ZmZXIgPSAob2ZmZXI6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQpID0+IHRoaXMuaGFuZGxlU2VuZFdlYlJUQ09mZmVyKG9mZmVyKTtcclxuXHJcblx0XHQvKiBXaGVuIHRoZSBQZWVyIGNvbm5lY3Rpb24gaWNlIGNhbmRpZGF0ZSBpcyBhZGRlZCBoYXZlIGl0IGhhbmRsZWQgKi9cclxuXHRcdHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uUGVlckljZUNhbmRpZGF0ZSA9IChwZWVyQ29ubmVjdGlvbkljZUV2ZW50OiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KSA9PiB0aGlzLmhhbmRsZVNlbmRJY2VDYW5kaWRhdGUocGVlckNvbm5lY3Rpb25JY2VFdmVudCk7XHJcblxyXG5cdFx0Ly8gaGFuZGVsIG1pYyBjb25uZWN0aW9ucyB3aXRoIHByb21pc2VcclxuXHRcdHRoaXMuZGF0YUNoYW5uZWxDb250cm9sbGVyLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLCBcImNpcnJ1c1wiLCB0aGlzLmRhdGFjaGFubmVsT3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gc2V0IHVwIHdlYlJ0YyB0ZXh0IG92ZXJsYXlzIFxyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2hvd1RleHRPdmVybGF5Q29ubmVjdGluZyA9ICgpID0+IHRoaXMuZGVsZWdhdGUub25XZWJSdGNDb25uZWN0aW5nKCk7XHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5zaG93VGV4dE92ZXJsYXlTZXR1cEZhaWx1cmUgPSAoKSA9PiB0aGlzLmRlbGVnYXRlLm9uV2ViUnRjRmFpbGVkKCk7XHJcblxyXG5cdFx0LyogUlRDIFBlZXIgQ29ubmVjdGlvbiBvbiBUcmFjayBldmVudCAtPiBoYW5kbGUgb24gdHJhY2sgKi9cclxuXHRcdHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uVHJhY2sgPSAodHJhY2tFdmVudDogUlRDVHJhY2tFdmVudCkgPT4gdGhpcy5zdHJlYW1Db250cm9sbGVyLmhhbmRsZU9uVHJhY2sodHJhY2tFdmVudCk7XHJcblxyXG5cdFx0LyogU3RhcnQgdGhlIEhhbmQgc2hha2UgcHJvY2VzcyBieSBjcmVhdGluZyBhbiBPZmZlciAqL1xyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuY3JlYXRlT2ZmZXIodGhpcy5zZHBDb25zdHJhaW50cywgdGhpcy5taWNDb250cm9sbGVyLnVzZU1pYyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVja3MgdGhlIHBlZXIgY29ubmVjdGlvbiBvcHRpb25zIGZvciBhIHR1cm4gc2VydmVyIGFuZCByZXR1cm5zIHRydWUgb3IgZmFsc2VcclxuXHQgKi9cclxuXHRjaGVja1R1cm5TZXJ2ZXJBdmFpbGFiaWxpdHkob3B0aW9uczogUlRDQ29uZmlndXJhdGlvbikge1xyXG5cclxuXHRcdC8vIGlmIGljZVNlcnZlcnMgaXMgZW1wdHkgcmV0dXJuIGZhbHNlIHRoaXMgc2hvdWxkIG5vdCBiZSB0aGUgZ2VuZXJhbCB1c2UgY2FzZSBidXQgaXMgaGVyZSBpbmNhc2VcclxuXHRcdGlmICghb3B0aW9ucy5pY2VTZXJ2ZXJzKSB7XHJcblx0XHRcdExvZ2dlci5JbmZvKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdBIHR1cm4gc2V2ZXIgd2FzIG5vdCBmb3VuZCcpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbG9vcCB0aHJvdWdoIHRoZSBpY2Ugc2VydmVycyB0byBjaGVjayBmb3IgYSB0dXJuIHVybFxyXG5cdFx0Zm9yIChjb25zdCBpY2VTZXJ2ZXIgb2Ygb3B0aW9ucy5pY2VTZXJ2ZXJzKSB7XHJcblx0XHRcdGZvciAoY29uc3QgdXJsIG9mIGljZVNlcnZlci51cmxzKSB7XHJcblx0XHRcdFx0aWYgKHVybC5pbmNsdWRlcygndHVybicpKSB7XHJcblx0XHRcdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIGBBIHR1cm4gc2V2ZXIgd2FzIGZvdW5kIGF0ICR7dXJsfWApO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0TG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ0EgdHVybiBzZXZlciB3YXMgbm90IGZvdW5kJyk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gYSBDb25maWcgTWVzc2FnZSBpcyByZWNlaXZlZCBjb250YWlucyB0aGUgUGVlciBDb25uZWN0aW9uIE9wdGlvbnMgcmVxdWlyZWQgKFNUVU4gYW5kIFRVUk4gU2VydmVyIEluZm8pXHJcblx0ICogQHBhcmFtIG1lc3NhZ2VDb25maWcgLSBDb25maWcgTWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoZSBzaWduYWxpbmcgc2VydmVyXHJcblx0ICovXHJcblx0aGFuZGxlT25Db25maWdNZXNzYWdlKG1lc3NhZ2VDb25maWc6IE1lc3NhZ2VDb25maWcpIHtcclxuXHJcblx0XHQvLyBUZWxsIHRoZSBXZWJSdGNDb250cm9sbGVyIHRvIHN0YXJ0IGEgc2Vzc2lvbiB3aXRoIHRoZSBwZWVyIG9wdGlvbnMgc2VudCBmcm9tIHRoZSBzaWduYWxpbmcgc2VydmVyXHJcblx0XHR0aGlzLnN0YXJ0U2Vzc2lvbihtZXNzYWdlQ29uZmlnLnBlZXJDb25uZWN0aW9uT3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gV2hlbiB0aGUgc2lnbmFsaW5nIHNlcnZlciBzZW5kcyBhIFdlYlJUQyBBbnN3ZXIgb3ZlciB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb24gaGF2ZSB0aGUgV2ViUnRjQ29udHJvbGxlciBoYW5kbGUgdGhlIG1lc3NhZ2VcclxuXHRcdHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbldlYlJ0Y0Fuc3dlciA9IChtZXNzYWdlQW5zd2VyOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQW5zd2VyKSA9PiB0aGlzLmhhbmRsZVdlYlJ0Y0Fuc3dlcihtZXNzYWdlQW5zd2VyKTtcclxuXHJcblx0XHQvLyBXaGVuIHRoZSBzaWduYWxpbmcgc2VydmVyIHNlbmRzIGEgSWNlQ2FuZGlkYXRlIG92ZXIgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGhhdmUgdGhlIFdlYlJ0Y0NvbnRyb2xsZXIgaGFuZGxlIHRoZSBtZXNzYWdlXHJcblx0XHR0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25JY2VDYW5kaWRhdGUgPSAoaWNlQ2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGVJbml0KSA9PiB0aGlzLmhhbmRsZUljZUNhbmRpZGF0ZShpY2VDYW5kaWRhdGUpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIHRoZSBSVEMgQW5zd2VyIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuXHQgKiBAcGFyYW0gQW5zd2VyIC0gQW5zd2VyIE1lc3NhZ2UgZnJvbSB0aGUgU2lnbmFsaW5nIHNlcnZlclxyXG5cdCAqL1xyXG5cdGhhbmRsZVdlYlJ0Y0Fuc3dlcihBbnN3ZXI6IE1lc3NhZ2VBbnN3ZXIpIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJUaGVyZSBpcyBhbiBhbnN3ZXJcIiwgNik7XHJcblxyXG5cdFx0bGV0IHNkcEFuc3dlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCA9IHtcclxuXHRcdFx0c2RwOiBBbnN3ZXIuc2RwLFxyXG5cdFx0XHR0eXBlOiBcImFuc3dlclwiXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuaGFuZGxlQW5zd2VyKHNkcEFuc3dlcik7XHJcblxyXG5cdFx0Ly8gc3RhcnQgdGhlIGFmayB3YXJuaW5nIHRpbWVyIGFzIHRoZSBjb250YWluZXIgaXMgbm93IHJ1bm5pbmdcclxuXHRcdHRoaXMuYWZrTG9naWMuc3RhcnRBZmtXYXJuaW5nVGltZXIoKTtcclxuXHJcblx0XHQvLyBzaG93IHRoZSBvdmVybGF5IHRoYXQgd2UgaGF2ZSBhbiBhbnN3ZXJcclxuXHRcdHRoaXMuZGVsZWdhdGUub25XZWJSdGNBbnN3ZXIoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFdoZW4gYW4gaWNlIENhbmRpZGF0ZSBpcyByZWNlaXZlZCBmcm9tIHRoZSBTaWduYWxpbmcgc2VydmVyIGFkZCBpdCB0byB0aGUgUGVlciBDb25uZWN0aW9uIENsaWVudFxyXG5cdCAqIEBwYXJhbSBpY2VDYW5kaWRhdGUgLSBJY2UgQ2FuZGlkYXRlIGZyb20gU2VydmVyXHJcblx0ICovXHJcblx0aGFuZGxlSWNlQ2FuZGlkYXRlKGljZUNhbmRpZGF0ZTogUlRDSWNlQ2FuZGlkYXRlSW5pdCkge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIldlYiBSVEMgQ29udHJvbGxlcjogb25XZWJSdGNJY2VcIiwgNik7XHJcblxyXG5cdFx0bGV0IGNhbmRpZGF0ZSA9IG5ldyBSVENJY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlKTtcclxuXHRcdHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLmhhbmRsZU9uSWNlKGNhbmRpZGF0ZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIHRoZSBpY2UgQ2FuZGlkYXRlIHRvIHRoZSBzaWduYWxpbmcgc2VydmVyIHZpYSB3ZWJzb2NrZXRcclxuXHQgICAqIEBwYXJhbSBpY2VFdmVudCAtIFJUQyBQZWVyIENvbm5lY3Rpb25JY2VFdmVudCkge1xyXG5cdCAqL1xyXG5cdGhhbmRsZVNlbmRJY2VDYW5kaWRhdGUoaWNlRXZlbnQ6IFJUQ1BlZXJDb25uZWN0aW9uSWNlRXZlbnQpIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJPbkljZUNhbmRpZGF0ZVwiLCA2KTtcclxuXHRcdGlmIChpY2VFdmVudC5jYW5kaWRhdGUgJiYgaWNlRXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSkge1xyXG5cdFx0XHR0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc2VuZEljZUNhbmRpZGF0ZShpY2VFdmVudC5jYW5kaWRhdGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCB0aGUgUlRDIE9mZmVyIFNlc3Npb24gdG8gdGhlIFNpZ25hbGluZyBzZXJ2ZXIgdmlhIHdlYnNvY2tldFxyXG5cdCAqIEBwYXJhbSBvZmZlciAtIFJUQyBTZXNzaW9uIERlc2NyaXB0aW9uXHJcblx0ICovXHJcblx0aGFuZGxlU2VuZFdlYlJUQ09mZmVyKG9mZmVyOiBSVENTZXNzaW9uRGVzY3JpcHRpb25Jbml0KSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiU2VuZGluZyB0aGUgb2ZmZXIgdG8gdGhlIFNlcnZlclwiLCA2KTtcclxuXHRcdHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kV2ViUnRjT2ZmZXIob2ZmZXIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogcmVnaXN0ZXJzIHRoZSBtb3VzZSBmb3IgdXNlIGluIElXZWJSdGNQbGF5ZXJDb250cm9sbGVyXHJcblx0ICovXHJcblx0YWN0aXZhdGVSZWdpc3Rlck1vdXNlKCkge1xyXG5cdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIucmVnaXN0ZXJNb3VzZSh0aGlzLmNvbmZpZy5jb250cm9sU2NoZW1lKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdXAgdGhlIERhdGEgY2hhbm5lbCBLZXlib2FyZCwgTW91c2UsIFVFIENvbnRyb2wgTWVzc2FnZSwgVUUgRGVzY3JpcHRvclxyXG5cdCAqL1xyXG5cdGhhbmRsZURhdGFDaGFubmVsQ29ubmVjdGVkKCkge1xyXG5cdFx0TG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkRhdGEgQ2hhbm5lbCBpcyBvcGVuXCIsIDYpO1xyXG5cclxuXHRcdC8vIHNob3cgdGhlIGNvbm5lY3RlZCBvdmVybGF5IFxyXG5cdFx0dGhpcy5kZWxlZ2F0ZS5vbldlYlJ0Y0Nvbm5lY3RlZCgpO1xyXG5cclxuXHRcdHRoaXMuaW5wdXRDb250cm9sbGVyID0gbmV3IElucHV0Q29udHJvbGxlcih0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciwgbnVsbCwgdGhpcy52aWRlb1BsYXllcik7XHJcblxyXG5cdFx0dGhpcy51ZUNvbnRyb2xNZXNzYWdlID0gbmV3IFVlQ29udHJvbE1lc3NhZ2UodGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIpO1xyXG5cdFx0dGhpcy51ZURlc2NyaXB0b3JVaSA9IG5ldyBVZURlc2NyaXB0b3JVaSh0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlciwgdGhpcy5jb25maWcpO1xyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIudWVEZXNjcmlwdG9yVWkgPSB0aGlzLnVlRGVzY3JpcHRvclVpO1xyXG5cdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIudWVEZXNjcmlwdG9yVWkgPSB0aGlzLnVlRGVzY3JpcHRvclVpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJjb25uZWN0ZWRcIik7XHJcblx0XHR0aGlzLmFjdGl2YXRlUmVnaXN0ZXJNb3VzZSgpXHJcblx0XHR0aGlzLmlucHV0Q29udHJvbGxlci5yZWdpc3RlcktleUJvYXJkKHRoaXMuY29uZmlnLnN1cHByZXNzQnJvd3NlcktleXMpO1xyXG5cdFx0dGhpcy5pbnB1dENvbnRyb2xsZXIucmVnaXN0ZXJHYW1lUGFkKCk7XHJcblxyXG5cdFx0dGhpcy52aWRlb1BsYXllci5zZXRNb3VzZUVudGVyQW5kTGVhdmVFdmVudHMoKCkgPT4gdGhpcy5pbnB1dENvbnRyb2xsZXIubW91c2VDb250cm9sbGVyLnNlbmRNb3VzZUVudGVyKCksICgpID0+IHRoaXMuaW5wdXRDb250cm9sbGVyLm1vdXNlQ29udHJvbGxlci5zZW5kTW91c2VMZWF2ZSgpKTtcclxuXHJcblx0XHR0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCk7XHJcblxyXG5cdFx0dGhpcy5kYXRhQ2hhbm5lbENvbnRyb2xsZXIucHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZSA9ICh2aWV3KSA9PiB0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5wcm9jZXNzRnJlZXplRnJhbWVNZXNzYWdlKHZpZXcsICgpID0+IHRoaXMubG9hZEZyZWV6ZUZyYW1lT3JTaG93UGxheU92ZXJsYXkoKSk7XHJcblx0XHR0aGlzLmRhdGFDaGFubmVsQ29udHJvbGxlci5vblVuRnJlZXplRnJhbWUgPSAoKSA9PiB0aGlzLkludmFsaWRhdGVGcmVlemVGcmFtZUFuZEVuYWJsZVZpZGVvKCk7XHJcblxyXG5cdFx0c2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5nZXRTdGF0cygpLCAxMDAwKTtcclxuXHJcblx0XHQvLyBlaXRoZXIgYXV0b3BsYXkgdGhlIHZpZGVvIG9yIHNldCB1cCB0aGUgcGxheSBvdmVybGF5XHJcblx0XHR0aGlzLmF1dG9QbGF5VmlkZW9PclNldFVwUGxheU92ZXJsYXkoKTtcclxuXHJcblx0XHR0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCk7XHJcblxyXG5cdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kVXBkYXRlVmlkZW9TdHJlYW1TaXplKHRoaXMudmlkZW9QbGF5ZXIudmlkZW9FbGVtZW50LmNsaWVudFdpZHRoLCB0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQpO1xyXG5cclxuXHRcdHRoaXMuZGVsZWdhdGUub25WaWRlb0luaXRpYWxpc2VkKCk7XHJcblxyXG5cdFx0dGhpcy51aUNvbnRyb2xsZXIudXBkYXRlVmlkZW9TdHJlYW1TaXplID0gKCkgPT4gdGhpcy51cGRhdGVWaWRlb1N0cmVhbVNpemUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgd2hlbiB0aGUgd2ViIHNvY2tldCByZWNlaXZlcyBhbiBhdXRoZW50aWNhdGlvbiByZXNwb25zZVxyXG5cdCAqIEBwYXJhbSBhdXRoUmVzcG9uc2UgLSBBdXRoZW50aWNhdGlvbiBSZXNwb25zZVxyXG5cdCAqL1xyXG5cdGhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UoYXV0aFJlc3BvbnNlOiBNZXNzYWdlQXV0aFJlc3BvbnNlKSB7XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoUmVzcG9uc2UpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIHRoZSBzdHJlYW0gc2l6ZSBjaGFuZ2VzXHJcblx0ICovXHJcblx0dXBkYXRlVmlkZW9TdHJlYW1TaXplKCkge1xyXG5cdFx0Ly8gQ2FsbCB0aGUgc2V0dGVyIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb25cclxuXHRcdGlmICghdGhpcy5tYXRjaFZpZXdwb3J0UmVzb2x1dGlvbikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHQvLz9cclxuXHRcdGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdGlmIChub3cgLSB0aGlzLmxhc3RUaW1lUmVzaXplZCA+IDEwMDApIHtcclxuXHRcdFx0Ly8gZ2V0IHRoZSByb290IGRpdiBmcm9tIGNvbmZpZyBcclxuXHRcdFx0aWYgKCF0aGlzLmNvbmZpZy5wbGF5ZXJFbGVtZW50KSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSh0aGlzLnZpZGVvUGxheWVyLnZpZGVvRWxlbWVudC5jbGllbnRXaWR0aCwgdGhpcy52aWRlb1BsYXllci52aWRlb0VsZW1lbnQuY2xpZW50SGVpZ2h0KTtcclxuXHRcdFx0dGhpcy5sYXN0VGltZVJlc2l6ZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksICdSZXNpemluZyB0b28gb2Z0ZW4gLSBza2lwcGluZycsIDYpO1xyXG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KTtcclxuXHRcdFx0dGhpcy5yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSwgMTAwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gdGhlIEluc3RhbmNlIFN0YXRlIENoYW5nZXNcclxuXHQgKiBAcGFyYW0gaW5zdGFuY2VTdGF0ZSAgLSBJbnN0YW5jZSBTdGF0ZSBcclxuXHQgKi9cclxuXHRoYW5kbGVJbnN0YW5jZVN0YXRlQ2hhbmdlKGluc3RhbmNlU3RhdGU6IE1lc3NhZ2VJbnN0YW5jZVN0YXRlKSB7XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uSW5zdGFuY2VTdGF0ZUNoYW5nZShpbnN0YW5jZVN0YXRlKVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHRoZSBmcmVlemUgZnJhbWUgb3ZlcmxheSB0byB0aGUgcGxheWVyIGRpdlxyXG5cdCAqIEBwYXJhbSBwbGF5ZXJFbGVtZW50IC0gVGhlIGRpdiBlbGVtZW50IG9mIHRoZSBQbGF5ZXJcclxuXHQgKi9cclxuXHRzZXRVcE1vdXNlQW5kRnJlZXplRnJhbWUocGxheWVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdC8vIENhbGN1bGF0aW5nIGFuZCBub3JtYWxpemluZyBwb3NpdGlvbnMgZGVwZW5kcyBvbiB0aGUgd2lkdGggYW5kIGhlaWdodCBvZiB0aGUgcGxheWVyLlxyXG5cdFx0dGhpcy5wbGF5ZXJFbGVtZW50Q2xpZW50UmVjdCA9IHBsYXllckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHR0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5mcmVlemVGcmFtZS5yZXNpemUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsb3NlIHRoZSBDb25uZWN0aW9uIHRvIHRoZSBzaWduYWxpbmcgc2VydmVyXHJcblx0ICovXHJcblx0Y2xvc2VTaWduYWxpbmdTZXJ2ZXIoKSB7XHJcblx0XHR0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuY2xvc2UoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpcmVzIGEgVmlkZW8gU3RhdHMgRXZlbnQgaW4gdGhlIFJUQyBQZWVyIENvbm5lY3Rpb24gXHJcblx0ICovXHJcblx0Z2V0U3RhdHMoKSB7XHJcblx0XHR0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5nZW5lcmF0ZVN0YXRzKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kIGEgTGF0ZW5jeSBUZXN0IFJlcXVlc3QgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICovXHJcblx0c2VuZExhdGVuY3lUZXN0KCkge1xyXG5cdFx0dGhpcy5sYXRlbmN5U3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuXHRcdHRoaXMudWVDb250cm9sTWVzc2FnZS5zZW5kTGF0ZW5jeVRlc3QodGhpcy5sYXRlbmN5U3RhcnRUaW1lKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgdGhlIEVuY29kZXIgU2V0dGluZ3MgdG8gdGhlIFVFIEluc3RhbmNlIGFzIGEgVUUgVUkgRGVzY3JpcHRvci5cclxuXHQgKiBAcGFyYW0gZW5jb2RlciAtIEVuY29kZXIgU2V0dGluZ3NcclxuXHQgKi9cclxuXHRzZW5kRW5jb2RlclNldHRpbmdzKGVuY29kZXI6IEVuY29kZXIpIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCItLS0tICAgRW5jb2RlciBTZXR0aW5ncyAgICAtLS0tXFxuXCIgKyBKU09OLnN0cmluZ2lmeShlbmNvZGVyLCB1bmRlZmluZWQsIDQpICsgXCJcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIDYpO1xyXG5cclxuXHRcdGlmIChlbmNvZGVyLlJhdGVDb250cm9sICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kRW5jb2RlclJhdGVDb250cm9sKGVuY29kZXIuUmF0ZUNvbnRyb2wpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVuY29kZXIuVGFyZ2V0Qml0cmF0ZSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZEVuY29kZXJUYXJnZXRCaXRSYXRlKGVuY29kZXIuVGFyZ2V0Qml0cmF0ZSk7XHJcblx0XHR9XHJcblx0XHRpZiAoZW5jb2Rlci5NYXhCaXRyYXRlICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kRW5jb2Rlck1heEJpdHJhdGVWYnIoZW5jb2Rlci5NYXhCaXRyYXRlKTtcclxuXHRcdH1cclxuXHRcdGlmIChlbmNvZGVyLk1pblFQICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kRW5jb2Rlck1pblFQKGVuY29kZXIuTWluUVApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVuY29kZXIuTWF4UVAgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRFbmNvZGVyTWF4UVAoZW5jb2Rlci5NYXhRUCk7XHJcblx0XHR9XHJcblx0XHRpZiAoZW5jb2Rlci5GaWxsZXJEYXRhICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kRW5jb2RlckVuYWJsZUZpbGxlckRhdGEoZW5jb2Rlci5GaWxsZXJEYXRhKTtcclxuXHRcdH1cclxuXHRcdGlmIChlbmNvZGVyLk11bHRpUGFzcyAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZEVuY29kZXJNdWx0aVBhc3MoZW5jb2Rlci5NdWx0aVBhc3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCB0aGUgV2ViUlRDIFNldHRpbmdzIHRvIHRoZSBVRSBJbnN0YW5jZSBhcyBhIFVFIFVJIERlc2NyaXB0b3IuXHJcblx0ICogQHBhcmFtIHdlYlJUQyAtIFdlYiBSVEMgU2V0dGluZ3MgXHJcblx0ICovXHJcblx0c2VuZFdlYlJ0Y1NldHRpbmdzKHdlYlJUQzogV2ViUlRDKSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiLS0tLSAgIFdlYlJUQyBTZXR0aW5ncyAgICAtLS0tXFxuXCIgKyBKU09OLnN0cmluZ2lmeSh3ZWJSVEMsIHVuZGVmaW5lZCwgNCkgKyBcIlxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgNik7XHJcblxyXG5cdFx0aWYgKHdlYlJUQy5EZWdyYWRhdGlvblByZWYgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVlRGVzY3JpcHRvclVpLnNlbmRXZWJSdGNEZWdyYWRhdGlvblByZWZlcmVuY2Uod2ViUlRDLkRlZ3JhZGF0aW9uUHJlZilcclxuXHRcdH1cclxuXHJcblx0XHRpZiAod2ViUlRDLkZQUyAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFdlYlJ0Y0Zwcyh3ZWJSVEMuRlBTKTtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kV2ViUnRjTWF4RnBzKHdlYlJUQy5GUFMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh3ZWJSVEMuTWluQml0cmF0ZSAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFdlYlJ0Y01pbkJpdHJhdGUod2ViUlRDLk1pbkJpdHJhdGUpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHdlYlJUQy5NYXhCaXRyYXRlICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kV2ViUnRjTWF4Qml0cmF0ZSh3ZWJSVEMuTWF4Qml0cmF0ZSk7XHJcblx0XHR9XHJcblx0XHRpZiAod2ViUlRDLkxvd1FQICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kV2ViUnRjTG93UXBUaHJlc2hvbGQod2ViUlRDLkxvd1FQKTtcclxuXHRcdH1cclxuXHRcdGlmICh3ZWJSVEMuSGlnaFFQICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kV2ViUnRjSGlnaFFwVGhyZXNob2xkKHdlYlJUQy5IaWdoUVApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZCBBZ2dyZWdhdGVkIFN0YXRzIHRvIHRoZSBTaWduYWxpbmcgU2VydmVyXHJcblx0ICogQHBhcmFtIHN0YXRzIC0gQWdncmVnYXRlZCBTdGF0c1xyXG5cdCAqL1xyXG5cdHNlbmRTdGF0c1RvU2lnbmFsbGluZ1NlcnZlcihzdGF0czogQWdncmVnYXRlZFN0YXRzKSB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiLS0tLSAgIFNlbmRpbmcgQWdncmVnYXRlZCBTdGF0cyB0byBTaWduYWxpbmcgU2VydmVyICAgLS0tLVxcblwiICsgSlNPTi5zdHJpbmdpZnkoc3RhdHMsIHVuZGVmaW5lZCwgNCkgKyBcIlxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIDYpO1xyXG5cdFx0dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLnNlbmRTdGF0cyhzdGF0cyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kcyBhIFVJIEludGVyYWN0aW9uIERlc2NyaXB0b3IgdG8gdGhlIFVFIEluc3RhbmNlXHJcblx0ICogQHBhcmFtIG1lc3NhZ2UgLSBTdHJpbmcgdG8gc2VuZCB0byB0aGUgVUUgSW5zdGFuY2VcclxuXHQgKi9cclxuXHRzZW5kVWVVaURlc2NyaXB0b3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiLS0tLSAgIFVFIFVJIEludGVyYWN0aW9uIFN0cmluZyAgIC0tLS1cXG5cIiArIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UsIHVuZGVmaW5lZCwgNCkgKyBcIlxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCA2KTtcclxuXHRcdHRoaXMudWVEZXNjcmlwdG9yVWkuc2VuZFVpSW50ZXJhY3Rpb24obWVzc2FnZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZW5kcyB0aGUgVUkgRGVzY3JpcHRvciBgc3RhdCBmcHNgIHRvIHRoZSBVRSBJbnN0YW5jZSBcclxuXHQgKi9cclxuXHRzZW5kU2hvd0ZwcygpOiB2b2lkIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCItLS0tICAgU2VuZGluZyBzaG93IHN0YXQgdG8gVUUgICAtLS0tXCIsIDYpO1xyXG5cdFx0dGhpcy51ZURlc2NyaXB0b3JVaS5zZW5kU2hvd0ZwcygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VuZHMgYSByZXF1ZXN0IHRvIHRoZSBVRSBJbnN0YW5jZSB0byBoYXZlIG93bmVyc2hpcCBvZiBRdWFsaXR5XHJcblx0ICovXHJcblx0c2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbE93bmVyc2hpcCgpOiB2b2lkIHtcclxuXHRcdExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCItLS0tICAgU2VuZGluZyBSZXF1ZXN0IHRvIENvbnRyb2wgUXVhbGl0eSAgLS0tLVwiLCA2KTtcclxuXHRcdHRoaXMudWVDb250cm9sTWVzc2FnZS5TZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gYSBMYXRlbmN5IFRlc3QgUmVzdWx0IGFyZSByZWNlaXZlZCBmcm9tIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBsYXRlbmN5VGltaW5ncyAtIExhdGVuY3kgVGVzdCBUaW1pbmdzXHJcblx0ICovXHJcblx0aGFuZGxlTGF0ZW5jeVRlc3RSZXN1bHQobGF0ZW5jeVRpbWluZ3M6IExhdGVuY3lUZXN0UmVzdWx0cykge1xyXG5cdFx0bGF0ZW5jeVRpbWluZ3MudGVzdFN0YXJ0VGltZU1zID0gdGhpcy5sYXRlbmN5U3RhcnRUaW1lO1xyXG5cdFx0bGF0ZW5jeVRpbWluZ3MuYnJvd3NlclJlY2VpcHRUaW1lTXMgPSBEYXRlLm5vdygpO1xyXG5cclxuXHRcdGxhdGVuY3lUaW1pbmdzLmxhdGVuY3lFeGNsdWRpbmdEZWNvZGUgPSB+fihsYXRlbmN5VGltaW5ncy5icm93c2VyUmVjZWlwdFRpbWVNcyAtIGxhdGVuY3lUaW1pbmdzLnRlc3RTdGFydFRpbWVNcyk7XHJcblx0XHRsYXRlbmN5VGltaW5ncy50ZXN0RHVyYXRpb24gPSB+fihsYXRlbmN5VGltaW5ncy5UcmFuc21pc3Npb25UaW1lTXMgLSBsYXRlbmN5VGltaW5ncy5SZWNlaXB0VGltZU1zKTtcclxuXHRcdGxhdGVuY3lUaW1pbmdzLm5ldHdvcmtMYXRlbmN5ID0gfn4obGF0ZW5jeVRpbWluZ3MubGF0ZW5jeUV4Y2x1ZGluZ0RlY29kZSAtIGxhdGVuY3lUaW1pbmdzLnRlc3REdXJhdGlvbik7XHJcblxyXG5cdFx0aWYgKGxhdGVuY3lUaW1pbmdzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zICYmIGxhdGVuY3lUaW1pbmdzLmJyb3dzZXJSZWNlaXB0VGltZU1zKSB7XHJcblx0XHRcdGxhdGVuY3lUaW1pbmdzLmVuZFRvRW5kTGF0ZW5jeSA9IH5+KGxhdGVuY3lUaW1pbmdzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zICsgbGF0ZW5jeVRpbWluZ3MubmV0d29ya0xhdGVuY3ksICsgbGF0ZW5jeVRpbWluZ3MuQ2FwdHVyZVRvU2VuZE1zKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZGVsZWdhdGUub25MYXRlbmN5VGVzdFJlc3VsdChsYXRlbmN5VGltaW5ncyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHdoZW4gdGhlIEVuY29kZXIgYW5kIFdlYiBSVEMgU2V0dGluZ3MgYXJlIHJlY2VpdmVkIGZyb20gdGhlIFVFIEluc3RhbmNlXHJcblx0ICogQHBhcmFtIHNldHRpbmdzIC0gSW5pdGlhbCBFbmNvZGVyIGFuZCBXZWIgUlRDIFNldHRpbmdzXHJcblx0ICovXHJcblx0aGFuZGxlSW5pdGlhbFNldHRpbmdzKHNldHRpbmdzOiBJbml0aWFsU2V0dGluZ3MpIHtcclxuXHRcdHRoaXMuZGVsZWdhdGUub25Jbml0aWFsU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIHRoZSBRdWFudGl6YXRpb24gUGFyYW1ldGVyIGFyZSByZWNlaXZlZCBmcm9tIHRoZSBVRSBJbnN0YW5jZVxyXG5cdCAqIEBwYXJhbSBBdmdRUCAtIEVuY29kZXJzIFF1YW50aXphdGlvbiBQYXJhbWV0ZXJcclxuXHQgKi9cclxuXHRoYW5kbGVWaWRlb0VuY29kZXJBdmdRUChBdmdRUDogbnVtYmVyKSB7XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uVmlkZW9FbmNvZGVyQXZnUVAoQXZnUVApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmxhZyBzZXQgaWYgdGhlIHVzZXIgaGFzIFF1YWxpdHkgT3duZXJzaGlwXHJcblx0ICogQHBhcmFtIGhhc1F1YWxpdHlPd25lcnNoaXAgLSBEb2VzIHRoZSBjdXJyZW50IGNsaWVudCBoYXZlIFF1YWxpdHkgT3duZXJzaGlwXHJcblx0ICovXHJcblx0aGFuZGxlUXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoaGFzUXVhbGl0eU93bmVyc2hpcDogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5kZWxlZ2F0ZS5vblF1YWxpdHlDb250cm9sT3duZXJzaGlwKGhhc1F1YWxpdHlPd25lcnNoaXApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB3aGVuIHRoZSBBZ2dyZWdhdGVkIHN0YXRzIGFyZSBDb2xsZWN0ZWRcclxuXHQgKiBAcGFyYW0gc3RhdHMgLSBBZ2dyZWdhdGVkIFN0YXRzXHJcblx0ICovXHJcblx0aGFuZGxlVmlkZW9TdGF0cyhzdGF0czogQWdncmVnYXRlZFN0YXRzKSB7XHJcblx0XHR0aGlzLmRlbGVnYXRlLm9uVmlkZW9TdGF0cyhzdGF0cyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQqIFRvIFJlc2l6ZSB0aGUgVmlkZW8gUGxheWVyIGVsZW1lbnRcclxuXHQqL1xyXG5cdHJlc2l6ZVBsYXllclN0eWxlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy51aUNvbnRyb2xsZXIucmVzaXplUGxheWVyU3R5bGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgb3ZlcnJpZGRlbiBkaXNjb25uZWN0IG1lc3NhZ2VcclxuXHQgKi9cclxuXHRnZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5kaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHRoZSBvdmVycmlkZSBmb3IgdGhlIGRpc2Nvbm5lY3QgbWVzc2FnZVxyXG5cdCAqL1xyXG5cdHNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLmRpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUgPSBtZXNzYWdlO1xyXG5cdH1cclxufVxyXG4iLCIvKipcclxuICogVGhlIFR5cGVzIG9mIE1lc3NhZ2VzIHRoYXQgd2lsbCBiZSByZWNlaXZlZFxyXG4gKi9cclxuZXhwb3J0IGVudW0gTWVzc2FnZVJlY3ZUeXBlcyB7XHJcbiAgICBBVVRIRU5USUNBVElPTl9SRVFVSVJFRCA9IFwiYXV0aGVudGljYXRpb25SZXF1aXJlZFwiLFxyXG4gICAgQVVUSEVOVElDQVRJT05fUkVTUE9OU0UgPSBcImF1dGhlbnRpY2F0aW9uUmVzcG9uc2VcIixcclxuICAgIElOU1RBTkNFX1NUQVRFID0gXCJpbnN0YW5jZVN0YXRlXCIsXHJcbiAgICBDT05GSUcgPSBcImNvbmZpZ1wiLFxyXG4gICAgUExBWUVSX0NPVU5UID0gXCJwbGF5ZXJDb3VudFwiLFxyXG4gICAgQU5TV0VSID0gXCJhbnN3ZXJcIixcclxuICAgIElDRV9DQU5ESURBVEUgPSBcImljZUNhbmRpZGF0ZVwiLFxyXG4gICAgUElORyA9IFwicGluZ1wiXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUeXBlcyBvZiBBdXRoZW50aWNhdGlvbiByZXBvc2VzIFxyXG4gKi9cclxuZXhwb3J0IGVudW0gTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlIHtcclxuICAgIFJFRElSRUNUID0gXCJSRURJUkVDVFwiLFxyXG4gICAgSU5WQUxJRF9UT0tFTiA9IFwiSU5WQUxJRF9UT0tFTlwiLFxyXG4gICAgQVVUSEVOVElDQVRFRCA9IFwiQVVUSEVOVElDQVRFRFwiLFxyXG4gICAgRVJST1IgPSBcIkVSUk9SXCJcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YXRlcyBvZiB0aGUgVUUgSW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBlbnVtIEluc3RhbmNlU3RhdGUge1xyXG4gICAgVU5BTExPQ0FURUQgPSBcIlVOQUxMT0NBVEVEXCIsXHJcbiAgICBQRU5ESU5HID0gXCJQRU5ESU5HXCIsXHJcbiAgICBGQUlMRUQgPSBcIkZBSUxFRFwiLFxyXG4gICAgUkVBRFkgPSBcIlJFQURZXCJcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbmNyZXRlIFJlY2VpdmVkIE1lc3NhZ2Ugd3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VSZWN2IHtcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIGlkOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZCBNZXNzYWdlIHdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlQXV0aFJlcXVpcmVkIGV4dGVuZHMgTWVzc2FnZVJlY3YgeyB9XHJcblxyXG4vKipcclxuICogQXV0aGVudGljYXRpb24gUmVzcG9uc2UgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUF1dGhSZXNwb25zZSBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcclxuICAgIG91dGNvbWU6IE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZTtcclxuICAgIHJlZGlyZWN0OiBzdHJpbmc7XHJcbiAgICBlcnJvcjogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogSW5zdGFuY2UgU3RhdGUgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUluc3RhbmNlU3RhdGUgZXh0ZW5kcyBNZXNzYWdlUmVjdiB7XHJcbiAgICBzdGF0ZTogSW5zdGFuY2VTdGF0ZTtcclxuICAgIGRldGFpbHM6IHN0cmluZztcclxuICAgIHByb2dyZXNzOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25maWcgTWVzc2FnZSBXcmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUNvbmZpZyBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcclxuICAgIHBlZXJDb25uZWN0aW9uT3B0aW9uczogUlRDQ29uZmlndXJhdGlvbjsgXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQbGF5ZXIgQ291bnQgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZVBsYXllckNvdW50IGV4dGVuZHMgTWVzc2FnZVJlY3Yge1xyXG4gICAgY291bnQ6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdlYiBSVEMgb2ZmZXIgQW5zd2VyIE1lc3NhZ2Ugd3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VBbnN3ZXIgZXh0ZW5kcyBNZXNzYWdlUmVjdiB7XHJcbiAgICBzZHA6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEljZSBDYW5kaWRhdGUgTWVzc2FnZSB3cmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUljZUNhbmRpZGF0ZSBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcclxuICAgIGNhbmRpZGF0ZTogUlRDSWNlQ2FuZGlkYXRlSW5pdDtcclxufSIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCB7IENhbmRpZGF0ZVBhaXJTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQ2FuZGlkYXRlUGFpclN0YXRzXCI7XHJcbmltcG9ydCB7IENhbmRpZGF0ZVN0YXQgfSBmcm9tIFwiLi4vUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0NhbmRpZGF0ZVN0YXRcIjtcclxuaW1wb3J0IHsgZGF0YUNoYW5uZWxTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvRGF0YUNoYW5uZWxTdGF0c1wiO1xyXG5pbXBvcnQgeyBpbmJvdW5kQXVkaW9TdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvSW5ib3VuZEF1ZGlvU3RhdHNcIjtcclxuaW1wb3J0IHsgaW5ib3VuZFZpZGVvU3RhdHMgfSBmcm9tIFwiLi4vUGVlckNvbm5lY3Rpb25Db250cm9sbGVyL0luYm91bmRWaWRlb1N0YXRzXCI7XHJcbmltcG9ydCB7IE91dEJvdW5kVmlkZW9TdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvT3V0Qm91bmRWaWRlb1N0YXRzXCI7XHJcblxyXG4vKipcclxuICogVGhlIFNlbmQgVHlwZXMgdGhhdCBhcmUgcHVzaGVkIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICovXHJcbmV4cG9ydCBlbnVtIE1lc3NhZ2VTZW5kVHlwZXMge1xyXG4gICAgSUNFX0NBTkRJREFURSA9IFwiaWNlQ2FuZGlkYXRlXCIsXHJcbiAgICBTVEFUUyA9IFwic3RhdHNcIixcclxuICAgIEFVVEhFTlRJQ0FUSU9OX1JFUVVFU1QgPSBcImF1dGhlbnRpY2F0aW9uUmVxdWVzdFwiLFxyXG4gICAgUkVRVUVTVF9JTlNUQU5DRSA9IFwicmVxdWVzdEluc3RhbmNlXCIsXHJcbiAgICBPRkZFUiA9IFwib2ZmZXJcIixcclxuICAgIFBPTkcgPSBcInBvbmdcIlxyXG59XHJcblxyXG4vKipcclxuICogQSBXcmFwcGVyIGZvciB0aGUgbWVzc2FnZSB0byBzZW5kIHRvIHRoZSBzaWduYWxpbmcgc2VydmVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZVNlbmQgaW1wbGVtZW50cyBTZW5kIHtcclxuICAgIHR5cGU6IE1lc3NhZ2VTZW5kVHlwZXM7XHJcbiAgICBwZWVyQ29ubmVjdGlvbk9wdGlvbnM6IE9iamVjdDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFR1cm5zIHRoZSB3cmFwcGVyIGludG8gYSBKU09OIFN0cmluZ1xyXG4gICAgICogQHJldHVybnMgLSBKU09OIFN0cmluZyBvZiB0aGUgTWVzc2FnZSB0byBzZW5kXHJcbiAgICAgKi9cclxuICAgIHBheWxvYWQoKSB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlNlbmRpbmcgPT4gXFxuXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLCB1bmRlZmluZWQsIDQpLCA2KTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VuZCB7XHJcbiAgICAvKipcclxuICAgICAqIFR1cm5zIHRoZSB3cmFwcGVyIGludG8gYSBKU09OIFN0cmluZ1xyXG4gICAgICogQHJldHVybnMgLSBKU09OIFN0cmluZyBvZiB0aGUgTWVzc2FnZSB0byBzZW5kXHJcbiAgICAgKi9cclxuICAgIHBheWxvYWQ6ICgpID0+IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEF1dGggUmVxdWVzdCBNZXNzYWdlIFdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlQXV0aFJlcXVlc3QgZXh0ZW5kcyBNZXNzYWdlU2VuZCB7XHJcbiAgICB0b2tlbjogc3RyaW5nO1xyXG4gICAgcHJvdmlkZXI6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRva2VuIFByb3ZpZGVkIGJ5IHRoZSBBdXRoIFByb3ZpZGVyXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgLSBOYW1lIG9mIHRoZSBwcm92aWRlciB0aGF0IGlzIHJlZ2lzdGVyZWQgaW4gdGhlIGF1dGggcGx1Z2luXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRva2VuOiBzdHJpbmcsIHByb3ZpZGVyOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IE1lc3NhZ2VTZW5kVHlwZXMuQVVUSEVOVElDQVRJT05fUkVRVUVTVDtcclxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XHJcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5zdGFuY2UgUmVxdWVzdCBNZXNzYWdlIFdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlUG9uZyBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcclxuXHJcbiAgICB0aW1lOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLlBPTkc7XHJcbiAgICAgICAgdGhpcy50aW1lID0gdGltZVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5zdGFuY2UgUmVxdWVzdCBNZXNzYWdlIFdyYXBwZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlUmVxdWVzdEluc3RhbmNlIGV4dGVuZHMgTWVzc2FnZVNlbmQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLlJFUVVFU1RfSU5TVEFOQ0U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZ2dyZWdhdGVkIFN0YXRzIE1lc3NhZ2UgV3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VTdGF0cyBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcclxuICAgIGluYm91bmRWaWRlb1N0YXRzOiBpbmJvdW5kVmlkZW9TdGF0cztcclxuICAgIGluYm91bmRBdWRpb1N0YXRzOiBpbmJvdW5kQXVkaW9TdGF0cztcclxuICAgIGNhbmRpZGF0ZVBhaXI6IENhbmRpZGF0ZVBhaXJTdGF0c1xyXG4gICAgZGF0YUNoYW5uZWxTdGF0czogZGF0YUNoYW5uZWxTdGF0cztcclxuICAgIGxvY2FsQ2FuZGlkYXRlczogQXJyYXk8Q2FuZGlkYXRlU3RhdD47XHJcbiAgICByZW1vdGVDYW5kaWRhdGVzOiBBcnJheTxDYW5kaWRhdGVTdGF0PjtcclxuICAgIG91dGJvdW5kVmlkZW9TdGF0czogT3V0Qm91bmRWaWRlb1N0YXRzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFnZ3JlZ2F0ZWRTdGF0cyAtIEFnZ3JlZ2F0ZWQgU3RhdHMgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFnZ3JlZ2F0ZWRTdGF0czogQWdncmVnYXRlZFN0YXRzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLlNUQVRTXHJcbiAgICAgICAgdGhpcy5pbmJvdW5kVmlkZW9TdGF0cyA9IGFnZ3JlZ2F0ZWRTdGF0cy5pbmJvdW5kVmlkZW9TdGF0cztcclxuICAgICAgICB0aGlzLmluYm91bmRBdWRpb1N0YXRzID0gYWdncmVnYXRlZFN0YXRzLmluYm91bmRBdWRpb1N0YXRzO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpciA9IGFnZ3JlZ2F0ZWRTdGF0cy5jYW5kaWRhdGVQYWlyO1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWxTdGF0cyA9IGFnZ3JlZ2F0ZWRTdGF0cy5kYXRhQ2hhbm5lbFN0YXRzXHJcbiAgICAgICAgdGhpcy5sb2NhbENhbmRpZGF0ZXMgPSBhZ2dyZWdhdGVkU3RhdHMubG9jYWxDYW5kaWRhdGVzO1xyXG4gICAgICAgIHRoaXMucmVtb3RlQ2FuZGlkYXRlcyA9IGFnZ3JlZ2F0ZWRTdGF0cy5yZW1vdGVDYW5kaWRhdGVzO1xyXG4gICAgICAgIHRoaXMub3V0Ym91bmRWaWRlb1N0YXRzID0gYWdncmVnYXRlZFN0YXRzLm91dEJvdW5kVmlkZW9TdGF0cztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqICBXZWIgUlRDIE9mZmVyIG1lc3NhZ2Ugd3JhcHBlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VXZWJSVENPZmZlciBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcclxuICAgIHNkcDogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG9mZmVyIC0gR2VuZXJhdGVkIFdlYiBSVEMgT2ZmZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob2ZmZXI/OiBSVENTZXNzaW9uRGVzY3JpcHRpb25Jbml0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNzYWdlU2VuZFR5cGVzLk9GRkVSO1xyXG5cclxuICAgICAgICBpZiAob2ZmZXIpIHtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gb2ZmZXIudHlwZSBhcyBNZXNzYWdlU2VuZFR5cGVzO1xyXG4gICAgICAgICAgICB0aGlzLnNkcCA9IG9mZmVyLnNkcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSVEMgSWNlIENhbmRpZGF0ZSBXcmFwcGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWVzc2FnZUljZUNhbmRpZGF0ZSBpbXBsZW1lbnRzIFNlbmQge1xyXG4gICAgY2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGU7XHJcbiAgICB0eXBlOiBNZXNzYWdlU2VuZFR5cGVzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNhbmRpZGF0ZSAtIFJUQyBJY2UgQ2FuZGlkYXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNhbmRpZGF0ZTogUlRDSWNlQ2FuZGlkYXRlKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gTWVzc2FnZVNlbmRUeXBlcy5JQ0VfQ0FORElEQVRFO1xyXG4gICAgICAgIHRoaXMuY2FuZGlkYXRlID0gY2FuZGlkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHVybnMgdGhlIHdyYXBwZXIgaW50byBhIEpTT04gU3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyAtIEpTT04gU3RyaW5nIG9mIHRoZSBNZXNzYWdlIHRvIHNlbmRcclxuICAgICAqL1xyXG4gICAgcGF5bG9hZCgpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiU2VuZGluZyA9PiBcXG5cIiArIEpTT04uc3RyaW5naWZ5KHRoaXMsIHVuZGVmaW5lZCwgNCksIDYpO1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9Mb2dnZXIvTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEFnZ3JlZ2F0ZWRTdGF0cyB9IGZyb20gXCIuLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzXCI7XHJcbmltcG9ydCAqIGFzIE1lc3NhZ2VSZWNlaXZlIGZyb20gXCIuL01lc3NhZ2VSZWNlaXZlXCI7XHJcbmltcG9ydCAqIGFzIE1lc3NhZ2VTZW5kIGZyb20gXCIuL01lc3NhZ2VTZW5kXCI7XHJcblxyXG4vLyBkZWNsYXJlIHRoZSBuZXcgbWV0aG9kIGZvciB0aGUgd2Vic29ja2V0IGludGVyZmFjZVxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICBpbnRlcmZhY2UgV2ViU29ja2V0IHtcclxuICAgICAgICBvbm1lc3NhZ2ViaW5hcnk/KGV2ZW50PzogTWVzc2FnZUV2ZW50KTogdm9pZDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBjb250cm9sbGVyIGZvciB0aGUgV2ViU29ja2V0IGFuZCBhbGwgYXNzb2NpYXRlZCBtZXRob2RzIFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFdlYlNvY2tldENvbnRyb2xsZXIge1xyXG4gICAgV1NfT1BFTl9TVEFURSA9IDE7XHJcbiAgICBhZGRyZXNzOiBzdHJpbmc7XHJcbiAgICB3ZWJTb2NrZXQ6IFdlYlNvY2tldDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBBZGRyZXNzIC0gVGhlIEFkZHJlc3Mgb2YgdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoQWRkcmVzczogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gQWRkcmVzcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqIEByZXR1cm5zIC0gSWYgdGhlcmUgaXMgYSBjb25uZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIGNvbm5lY3QoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCB0aGlzLmFkZHJlc3MsIDYpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLmFkZHJlc3MpO1xyXG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldC5vbm9wZW4gPSAoZXZlbnQpID0+IHRoaXMuaGFuZGxlT25PcGVuKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25lcnJvciA9IChldmVudCkgPT4gdGhpcy5oYW5kbGVPbkVycm9yKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4gdGhpcy5oYW5kbGVPbkNsb3NlKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB0aGlzLmhhbmRsZU9uTWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0Lm9ubWVzc2FnZWJpbmFyeSA9IChldmVudCkgPT4gdGhpcy5oYW5kZWxPbk1lc3NhZ2VCaW5hcnkoZXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBMb2dnZXIuRXJyb3IoZXJyb3IsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGF0IGhhcHBlbnMgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgaW4gYmluYXJ5IGZvcm1cclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1lc3NhZ2UgUmVjZWl2ZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGVsT25NZXNzYWdlQmluYXJ5KGV2ZW50OiBNZXNzYWdlRXZlbnQpIHtcclxuICAgICAgICAvLyBpZiB0aGUgZXZlbnQgaXMgZW1wdHkgcmV0dXJuXHJcbiAgICAgICAgaWYgKCFldmVudCB8fCAhZXZlbnQuZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBoYW5kZWwgdGhlIGJpbmFyeSBhbmQgdGhlbiBoYW5kZWwgdGhlIG1lc3NhZ2VcclxuICAgICAgICBldmVudC5kYXRhLnRleHQoKS50aGVuKChtZXNzYWdlU3RyaW5nOiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgIC8vIGJ1aWxkIGEgbmV3IG1lc3NhZ2VcclxuICAgICAgICAgICAgbGV0IGNvbnN0cnVjdGVkTWVzc2FnZSA9IG5ldyBNZXNzYWdlRXZlbnQoJ21lc3NhZ2VGcm9tQmluYXJ5Jywge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogbWVzc2FnZVN0cmluZ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlbmQgdGhlIG5ldyBzdHJpbmdpZmllZCBldmVudCBiYWNrIGludG8gYG9ubWVzc2FnZWBcclxuICAgICAgICAgICAgdGhpcy5oYW5kZWxPbk1lc3NhZ2VCaW5hcnkoY29uc3RydWN0ZWRNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgYEZhaWxlZCB0byBwYXJzZSBiaW5hcnkgYmxvYiBmcm9tIHdlYnNvY2tldCwgcmVhc29uOiAke2Vycm9yfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGF0IGhhcHBlbnMgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWRcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE1lc3NhZ2UgUmVjZWl2ZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25NZXNzYWdlKGV2ZW50OiBNZXNzYWdlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2Vic29ja2V0IG1lc3NhZ2UgaXMgYmluYXJ5LCBpZiBzbywgc3RyaW5naWZ5IGl0LlxyXG4gICAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGVsT25NZXNzYWdlQmluYXJ5KGV2ZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1lc3NhZ2U6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2ID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwicmVjZWl2ZWQgPT4gXFxuXCIgKyBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGV2ZW50LmRhdGEpLCB1bmRlZmluZWQsIDEpLCA2KTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlUmVjdlR5cGVzLlBJTkc6IHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZW5kIG91ciBwb25nIHBheWxvYWQgYmFjayB0byB0aGUgc2lnbmFsbGluZyBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBuZXcgTWVzc2FnZVNlbmQuTWVzc2FnZVBvbmcobmV3IERhdGUoKS5nZXRUaW1lKCkpLnBheWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlUmVjdlR5cGVzLlBJTkcgKyBcIjogXCIgKyBwYXlsb2FkLCA2KTtcclxuICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQocGF5bG9hZClcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuQVVUSEVOVElDQVRJT05fUkVRVUlSRUQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdGlvblJlcXVpcmVkOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQXV0aFJlcXVpcmVkID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdXJsX3N0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IG5ldyBVUkwodXJsX3N0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGF1dGhSZXF1ZXN0ID0gbmV3IE1lc3NhZ2VTZW5kLk1lc3NhZ2VBdXRoUmVxdWVzdCh1cmwuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIiksIHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicHJvdmlkZXJcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoYXV0aFJlcXVlc3QucGF5bG9hZCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuQVVUSEVOVElDQVRJT05fUkVTUE9OU0U6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBVVRIRU5USUNBVElPTl9SRVNQT05TRVwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdGlvblJlc3BvbnNlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQXV0aFJlc3BvbnNlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoZW50aWNhdGlvblJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF1dGhlbnRpY2F0aW9uUmVzcG9uc2Uub3V0Y29tZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlLlJFRElSRUNUOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYXV0aGVudGljYXRpb25SZXNwb25zZS5yZWRpcmVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlLkFVVEhFTlRJQ0FURUQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIlVzZXIgaXMgYXV0aGVudGljYXRlZCBhbmQgbm93IHJlcXVlc3RpbmcgYW4gaW5zdGFuY2VcIiwgNik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndlYlNvY2tldC5zZW5kKG5ldyBNZXNzYWdlU2VuZC5NZXNzYWdlUmVxdWVzdEluc3RhbmNlKCkucGF5bG9hZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlLklOVkFMSURfVE9LRU46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBdXRoZW50aWNhdGlvbiBlcnJvciA6IEludmFsaWQgVG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZS5FUlJPUjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuSW5mbyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkF1dGhlbnRpY2F0aW9uIEVycm9yIGZyb20gc2VydmVyIENoZWNrIHdoYXQgeW91IGFyZSBzZW5kaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJUaGUgT3V0Y29tZSBNZXNzYWdlIGhhcyBub3QgYmVlbiBoYW5kbGVkIDogdGhpcyBpcyByZWFsbHkgYmFkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuSU5TVEFOQ0VfU1RBVEU6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJJTlNUQU5DRV9TVEFURVwiLCA2KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnN0YW5jZVN0YXRlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlSW5zdGFuY2VTdGF0ZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5zdGFuY2VTdGF0ZUNoYW5nZShpbnN0YW5jZVN0YXRlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZVJlY3ZUeXBlcy5DT05GSUc6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJDT05GSUdcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlnOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQ29uZmlnID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db25maWcoY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVJlY2VpdmUuTWVzc2FnZVJlY3ZUeXBlcy5QTEFZRVJfQ09VTlQ6IHtcclxuICAgICAgICAgICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJQTEFZRVJfQ09VTlRcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGxheWVyQ291bnQ6IE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VQbGF5ZXJDb3VudCA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiUGxheWVyIENvdW50OiBcIiArIChwbGF5ZXJDb3VudC5jb3VudCAtIDEpLCA2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuQU5TV0VSOiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQU5TV0VSXCIsIDYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFuc3dlcjogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUFuc3dlciA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uV2ViUnRjQW5zd2VyKGFuc3dlcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VSZWNlaXZlLk1lc3NhZ2VSZWN2VHlwZXMuSUNFX0NBTkRJREFURToge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIklDRV9DQU5ESURBVEVcIiwgNik7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWNlQ2FuZGlkYXRlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlSWNlQ2FuZGlkYXRlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25JY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlLmNhbmRpZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJFcnJvciBNZXNzYWdlIHR5cGUgbm90IERlZmluZWRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgd2hlbiB0aGUgV2Vic29ja2V0IGlzIG9wZW5lZCBcclxuICAgICAqIEBwYXJhbSBldmVudCAtIE5vdCBVc2VkXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU9uT3BlbihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQ29ubmVjdGVkIHRvIHRoZSBzaWduYWxsaW5nIHNlcnZlciB2aWEgV2ViU29ja2V0XCIsIDYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIG9uIHRoZSB3ZWJzb2NrZXRcclxuICAgICAqIEBwYXJhbSBldmVudCAtIEVycm9yIFBheWxvYWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25FcnJvcihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBMb2dnZXIuRXJyb3IoTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgJ1dlYlNvY2tldCBlcnJvcjogJyk7XHJcbiAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBldmVudC50b1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgd2hlbiB0aGUgV2Vic29ja2V0IGlzIGNsb3NlZFxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gQ2xvc2UgRXZlbnRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT25DbG9zZShldmVudDogQ2xvc2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMub25XZWJTb2NrZXRPbmNsb3NlT3ZlcmxheU1lc3NhZ2UoZXZlbnQpO1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJEaXNjb25uZWN0ZWQgdG8gdGhlIHNpZ25hbGxpbmcgc2VydmVyIHZpYSBXZWJTb2NrZXQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoZXZlbnQuY29kZSkgKyBcIiAtIFwiICsgZXZlbnQucmVhc29uLCA2KTtcclxuICAgICAgICB0aGlzLnN0b3BBZmtXYXJuaW5nVGltZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFuIG92ZXJyaWRlIGZvciBzdG9wcGluZyB0aGUgYWZrIHdhcm5pbmcgdGltZXJcclxuICAgICAqL1xyXG4gICAgc3RvcEFma1dhcm5pbmdUaW1lcigpIHsgfVxyXG5cclxuICAgIHNlbmRXZWJSdGNPZmZlcihvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCkge1xyXG4gICAgICAgIGxldCBwYXlsb2FkID0gbmV3IE1lc3NhZ2VTZW5kLk1lc3NhZ2VXZWJSVENPZmZlcihvZmZlcik7XHJcbiAgICAgICAgdGhpcy53ZWJTb2NrZXQuc2VuZChwYXlsb2FkLnBheWxvYWQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kcyBhbiBSVEMgSWNlIENhbmRpZGF0ZSB0byB0aGUgU2VydmVyXHJcbiAgICAgKiBAcGFyYW0gY2FuZGlkYXRlIC0gUlRDIEljZSBDYW5kaWRhdGVcclxuICAgICAqL1xyXG4gICAgc2VuZEljZUNhbmRpZGF0ZShjYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZSkge1xyXG4gICAgICAgIExvZ2dlci5Mb2coTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJTZW5kaW5nIEljZSBDYW5kaWRhdGVcIiwgNik7XHJcbiAgICAgICAgaWYgKHRoaXMud2ViU29ja2V0ICYmIHRoaXMud2ViU29ja2V0LnJlYWR5U3RhdGUgPT09IHRoaXMuV1NfT1BFTl9TVEFURSkge1xyXG4gICAgICAgICAgICAvL3dzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnaWNlQ2FuZGlkYXRlJywgY2FuZGlkYXRlOiBjYW5kaWRhdGUgfSkpO1xyXG4gICAgICAgICAgICBsZXQgSWNlQ2FuZGlkYXRlID0gbmV3IE1lc3NhZ2VTZW5kLk1lc3NhZ2VJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoSWNlQ2FuZGlkYXRlLnBheWxvYWQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2VzIHRoZSBXZWJzb2NrZXQgY29ubmVjdGlvblxyXG4gICAgICovXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLndlYlNvY2tldC5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgdGhlIEFnZ3JlZ2F0ZWQgU3RhdHMgdG8gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqIEBwYXJhbSBzdGF0cyAtIFN0YXRzIFBheWxvYWRcclxuICAgICAqL1xyXG4gICAgc2VuZFN0YXRzKHN0YXRzOiBBZ2dyZWdhdGVkU3RhdHMpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBNZXNzYWdlU2VuZC5NZXNzYWdlU3RhdHMoc3RhdHMpO1xyXG4gICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoZGF0YS5wYXlsb2FkKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBFdmVudCB1c2VkIGZvciBEaXNwbGF5aW5nIHdlYnNvY2tldCBjbG9zZWQgbWVzc2FnZXMgKi9cclxuICAgIG9uV2ViU29ja2V0T25jbG9zZU92ZXJsYXlNZXNzYWdlKGV2ZW50OiBDbG9zZUV2ZW50KSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBNZXNzYWdlIENvbnRhaW5zIHRoZSBwYXlsb2FkIG9mIHRoZSBwZWVyIGNvbm5lY3Rpb24gb3B0aW9ucyB1c2VkIGZvciB0aGUgUlRDIFBlZXIgaGFuZCBzaGFrZVxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VDb25maWcgLSBDb25maWcgTWVzc2FnZSByZWNlaXZlZCBmcm9tIGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgb25Db25maWcobWVzc2FnZUNvbmZpZzogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUNvbmZpZykgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWNlQ2FuZGlkYXRlIC0gSWNlIENhbmRpZGF0ZSBzZW50IGZyb20gdGhlIFNpZ25hbGluZyBzZXJ2ZXIgc2VydmVyJ3MgUlRDIGhhbmQgc2hha2VcclxuICAgICAqL1xyXG4gICAgb25JY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGVJbml0KSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIHdlYnNvY2tldCByZWNlaXZlcyB0aGUgYW5zd2VyIGZvciB0aGUgUlRDIHBlZXIgQ29ubmVjdGlvblxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VBbnN3ZXIgLSBUaGUgUlRDIEFuc3dlciBwYXlsb2FkIGZyb20gdGhlIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgb25XZWJSdGNBbnN3ZXIobWVzc2FnZUFuc3dlcjogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUFuc3dlcikgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBmaXJlZCB3aXRoIHRoZSB3ZWJzb2NrZXQgcmVjZWl2ZXMgYSBpbnN0YW5jZSBzdGF0ZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlU3RhdGUgLSBVRSBJbnN0YW5jZSBTdGF0ZVxyXG4gICAgICovXHJcbiAgICBvbkluc3RhbmNlU3RhdGVDaGFuZ2UoaW5zdGFuY2VTdGF0ZTogTWVzc2FnZVJlY2VpdmUuTWVzc2FnZUluc3RhbmNlU3RhdGUpIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgZmlyZWQgd2l0aCB0aGUgd2Vic29ja2V0IHJlY2VpdmVzIGEgQXV0aGVudGljYXRpb24gUmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBhdXRoUmVzcG9uc2UgLSBBdXRoZW50aWNhdGlvbiBSZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBvbkF1dGhlbnRpY2F0aW9uUmVzcG9uc2UoYXV0aFJlc3BvbnNlOiBNZXNzYWdlUmVjZWl2ZS5NZXNzYWdlQXV0aFJlc3BvbnNlKSB7IH1cclxufVxyXG5cclxuXHJcbi8qIDUyNGY0ZDRkICovXHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCB7IHdlYlJ0Y1BsYXllckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9XZWJSdGNQbGF5ZXIvV2ViUnRjUGxheWVyQ29udHJvbGxlclwiXHJcbmV4cG9ydCB7IENvbmZpZywgQ29udHJvbFNjaGVtZVR5cGUgfSBmcm9tIFwiLi9Db25maWcvQ29uZmlnXCJcclxuZXhwb3J0IHsgSURlbGVnYXRlIH0gZnJvbSBcIi4vRGVsZWdhdGUvSURlbGVnYXRlXCJcclxuZXhwb3J0IHsgRGVsZWdhdGVCYXNlIH0gZnJvbSBcIi4vRGVsZWdhdGUvRGVsZWdhdGVCYXNlXCJcclxuZXhwb3J0IHsgSVdlYlJ0Y1BsYXllckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9XZWJSdGNQbGF5ZXIvSVdlYlJ0Y1BsYXllckNvbnRyb2xsZXJcIlxyXG5cclxuZXhwb3J0IHsgSU92ZXJsYXkgfSBmcm9tICcuL092ZXJsYXkvSU92ZXJsYXknO1xyXG5leHBvcnQgeyBJVGV4dE92ZXJsYXkgfSBmcm9tICcuL092ZXJsYXkvSVRleHRPdmVybGF5JztcclxuZXhwb3J0IHsgSUFjdGlvbk92ZXJsYXkgfSBmcm9tIFwiLi9PdmVybGF5L0lBY3Rpb25PdmVybGF5XCJcclxuZXhwb3J0IHsgSUFma092ZXJsYXkgfSBmcm9tICcuL092ZXJsYXkvSUFma092ZXJsYXknO1xyXG5leHBvcnQgeyBBZmtMb2dpYyB9IGZyb20gJy4vQWZrL0Fma0xvZ2ljJztcclxuXHJcbmV4cG9ydCB7IExhdGVuY3lUZXN0UmVzdWx0cyB9IGZyb20gXCIuL0RhdGFDaGFubmVsL0xhdGVuY3lUZXN0UmVzdWx0c1wiO1xyXG5leHBvcnQgeyBFbmNvZGVyLCBJbml0aWFsU2V0dGluZ3MsIFdlYlJUQyB9IGZyb20gJy4vRGF0YUNoYW5uZWwvSW5pdGlhbFNldHRpbmdzJztcclxuZXhwb3J0IHsgQWdncmVnYXRlZFN0YXRzIH0gZnJvbSAnLi9QZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIvQWdncmVnYXRlZFN0YXRzJztcclxuZXhwb3J0IHsgTWVzc2FnZUluc3RhbmNlU3RhdGUsIEluc3RhbmNlU3RhdGUsIE1lc3NhZ2VBdXRoUmVzcG9uc2UsIE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZSB9IGZyb20gJy4vV2ViU29ja2V0cy9NZXNzYWdlUmVjZWl2ZSc7XHJcbmV4cG9ydCB7IExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyL0xvZ2dlcic7XHJcbmV4cG9ydCB7IERhdGFDaGFubmVsQ29udHJvbGxlciB9IGZyb20gJy4vRGF0YUNoYW5uZWwvRGF0YUNoYW5uZWxDb250cm9sbGVyJztcclxuZGVjbGFyZSB2YXIgTElCUkFSWV9WRVJTSU9OOiBzdHJpbmc7XHJcbmV4cG9ydCBjb25zdCB2ZXJzaW9uID0gTElCUkFSWV9WRVJTSU9OO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=